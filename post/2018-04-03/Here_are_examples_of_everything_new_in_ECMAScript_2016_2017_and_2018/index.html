<!DOCTYPE html><html lang="en" data-reactroot=""><head><title data-react-helmet="true">开发笔记</title><meta data-react-helmet="true" name="title" content="开发笔记"/><meta data-react-helmet="true" property="og:description" content="Javascript总是在发布新功能，想要一直跟上脚步不太容易，配套的demo也很少，本文旨在结合实例展示最新的18个新特性，做个技术的布道者。

下面依照版本的先后顺序开始介..."/><meta data-react-helmet="true" property="og:title" content="ES2016, 2017和2018到底有哪些新东西？"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="description" content="Javascript总是在发布新功能，想要一直跟上脚步不太容易，配套的demo也很少，本文旨在结合实例展示最新的18个新特性，做个技术的布道者。

下面依照版本的先后顺序开始介..."/><meta data-react-helmet="true" name="keywords" content="js,JavaScript,前端,frontend,ECMAScript,ECMAScript 2016,ECMAScript 2017,ECMAScript 2018,es6,es7,async,await,async/await"/><link rel="preload" as="script" href="https://shjie047.github.io/bootstrap.9d1d5f8f.js"/><link rel="preload" as="script" href="https://shjie047.github.io/templates/src/containers/Post.f97300b9.js"/><link rel="preload" as="script" href="https://shjie047.github.io/main.96794c51.js"/><link rel="preload" as="style" href="https://shjie047.github.io/styles.49ed94a1.css"/><link rel="stylesheet" href="https://shjie047.github.io/styles.49ed94a1.css"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><style data-styled-components="bDWFJH gkZsHu fuJRCL mvmj eesrXV gRptws">
/* sc-component-id: sc-bwzfXH */
.fuJRCL{padding:0 40px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;} @media only screen and (max-width:400px){.fuJRCL{padding:0 20px;}} .fuJRCL a{font-size:1.6rem;font-weight:normal;} .fuJRCL .icon-link{font-size:1.8rem;} .fuJRCL .archive{margin-left:auto;}
/* sc-component-id: sc-htpNat */
@media only screen and (max-width:920px){.mvmj{display:none;}} .mvmj a{font-size:1.4rem;} .mvmj::before{content:'';height:2.1rem;width:1px;background-color:#00000038;display:inline-block;vertical-align:middle;}
/* sc-component-id: sc-bxivhb */
.eesrXV{display:none;padding:0;margin:0;position:relative;font-size:1.4rem;} .eesrXV::before{content:'';height:2.1rem;width:1px;background-color:#00000038;display:inline-block;vertical-align:middle;} .eesrXV > i{display:inline-block;padding:1rem;color:#fff;font-weight:normal;-webkit-transition:color .3s ease;transition:color .3s ease;} .eesrXV a{font-size:1.4rem;font-weight:normal;line-height:1;display:block;padding:1.2rem 3rem 1.2rem 1rem;} .eesrXV li{margin:0;} .eesrXV ul{list-style:none;padding:0;margin:0;position:absolute;top:100%;left:0;background-color:#108db8;display:none;width:120px;padding:10px 0;} .eesrXV ul.show{display:inline-block;} @media only screen and (max-width:920px){.eesrXV{display:inline;}}
/* sc-component-id: sc-ifAKCX */
.gkZsHu{position:absolute;top:0;left:50%;top:50%;font-size:1.6rem;color:#fff;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-weight:normal;cursor:pointer;} .gkZsHu:hover{color:#fff!important;}
/* sc-component-id: sc-dnqmqq */
.gRptws{position:relative;width:80%;max-width:710px;margin:4rem auto;padding-bottom:4rem;border-bottom:1px solid #ebf2f6;word-wrap:break-word;} .gRptws::after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;box-shadow:0 0 0 5px #fff;} .gRptws .read-more{-webkit-text-decoration:none;text-decoration:none;} .gRptws .author-thumb{width:24px;height:24px;float:left;margin-right:9px;border-radius:100%;} .gRptws .post-header{margin-bottom:3.4rem;} .gRptws .post-title a{-webkit-text-decoration:none;text-decoration:none;} .gRptws .post-meta{display:block;margin:1.75rem 0 0;font-family:Open Sans,sans-serif;font-size:1.5rem;line-height:2.2rem;color:#9eabb3;} .gRptws .post-excerpt p{margin:0;font-size:.9em;line-height:1.7em;} .gRptws .post-meta a{color:#9eabb3;-webkit-text-decoration:none;text-decoration:none;} .gRptws .post-meta a:hover{color:#9eabb3;-webkit-text-decoration:underline;text-decoration:underline;} .gRptws .post-date{display:inline-block;text-transform:uppercase;font-size:1.3rem;white-space:nowrap;} .gRptws .post-date.has-author{margin-left:8px;padding-left:12px;border-left:1px solid #d5dbde;} @media only screen and (max-width:900px){.gRptws{font-size:.95em;}} @media only screen and (max-width:500px){.gRptws{width:auto;margin:2rem 16px;padding-bottom:2rem;line-height:1.65em;}.gRptws .post-excerpt p{font-size:.85em;}.gRptws .post-meta{font-size:1.3rem;margin-top:1rem;}} .gRptws pre{padding:1.2rem;} .gRptws pre > code{box-shadow:0 0 15px rgba(0,0,0,.35);padding:1.5rem;}</style></head><body><div id="root"><div class="sc-bdVaJa bDWFJH" data-reactroot=""><div class="headroom-wrapper"><div style="position:relative;top:0;left:0;right:0;z-index:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)" class="headroom headroom--unfixed"><a class="sc-ifAKCX gkZsHu" aria-current="false" href="https://shjie047.github.io/">开发笔记</a><nav class="sc-bwzfXH fuJRCL"><a class="icon-link" aria-current="false" href="https://shjie047.github.io/"><i class="iconfont icon-home"></i></a><span class="sc-htpNat mvmj"><a aria-current="false" href="https://shjie047.github.io/tags/frontend">前端</a><a aria-current="false" href="https://shjie047.github.io/tags/backend">后端</a><a aria-current="false" href="https://shjie047.github.io/tags/mobile">移动端</a><a aria-current="false" href="https://shjie047.github.io/tags/java">Java</a></span><span class="toggled-popular sc-bxivhb eesrXV"><i class="iconfont icon-popular"></i><ul><li><a aria-current="false" href="https://shjie047.github.io/tags/backend">后端</a></li><li><a aria-current="false" href="https://shjie047.github.io/tags/mobile">移动端</a></li><li><a aria-current="false" href="https://shjie047.github.io/tags/java">Java</a></li></ul></span><a class="archive icon-link" aria-current="false" data-tip="归档" href="https://shjie047.github.io/archives"><i class="iconfont icon-archive"></i></a></nav></div></div><div class="content"><article class="sc-dnqmqq gRptws"><header class="post-header"><h1 class="post-title">ES2016, 2017和2018到底有哪些新东西？</h1><section class="post-meta "><a aria-current="false" href="https://shjie047.github.io/authors/rajaraodv">rajaraodv</a><time class="post-date has-author" dateTime="2018-04-03">2018/4/3</time><span>, </span><span><span><a aria-current="false" href="https://shjie047.github.io/tags/js">js</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/javascript">JavaScript</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/前端">前端</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/frontend">frontend</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/ecmascript">ECMAScript</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/ecmascript 2016">ECMAScript 2016</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/ecmascript 2017">ECMAScript 2017</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/ecmascript 2018">ECMAScript 2018</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/es6">es6</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/es7">es7</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/async">async</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/await">await</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/async/await">async/await</a></span></span></section></header><section class="post-content markdown-body"><div><p><img style="display:block;margin:0 auto;margin-top:4rem;cursor:zoom-in" src="http://p6jqy6mfr.bkt.clouddn.com/1_Z-9unq6Am3vekNOa5fD1xg.png"/></p><p>Javascript总是在发布新功能，想要一直跟上脚步不太容易，配套的demo也很少，本文旨在结合实例展示最新的18个新特性，做个技术的布道者。</p><p><strong>下面依照版本的先后顺序开始介绍:</strong></p><p><img style="display:block;margin:0 auto;margin-top:4rem;cursor:zoom-in" src="http://p6jqy6mfr.bkt.clouddn.com/1_K09EWrqTcTwN9_dlhlzy6Q.png"/></p><h2>1. Array.prototype.includes</h2><p>首先是数组的一个实例方法<code>includes</code>，这个方法的功能很简单：用于判断某一项是否在数组里，和这个方法功能类似的有<code>indexOf</code>，两者的区别是<code>indexOf</code>无法判断<code>NaN</code>，
如图：</p><pre><code class="language-Javascript">const arr = [1, 2, 3, 4, NaN];

// es5
if (arr.indexOf(3) &gt;= 0) {
  console.log(true)
}

// es2016
if (arr.includes(e)) {
  console.log(true)
}

// 注：indexOf不支持检查`NaN`
arr.indexOf(NaN) // -1
arr.includes(NaN) // true</code></pre><h2>2. 求幂运算符</h2><p>第二个新功能也比较简单：<strong>求幂运算符</strong> -- <code>**</code>，用于取代之前的求幂方法<code>Math.pow</code>，
如图：</p><pre><code class="language-Javascript">// 之前
Math.pow(3, 2) // 9

// 现在
3**2 // 9</code></pre><p><img style="display:block;margin:0 auto;margin-top:4rem;cursor:zoom-in" src="http://p6jqy6mfr.bkt.clouddn.com/1_fV_95TaY3ocgE8hlDhhv8w.png"/></p><h2>1. Object.values()</h2><p><code>Object.values</code>这个方法和<code>Object.keys</code>类似，都是返回一个数组，通过方法名可以直观的猜到返回的是对象的值(value)，需要注意的是：两个方法都是返回自身原型的属性，不包括原型链上的属性，如图：</p><pre><code class="language-Javascript">const cars = {BMW: 3, Tesla: 2, Toyota: 1}

// es5
const vals = Object.keys(cars).map(key =&gt; cars[key]) 
console.log(vals) // [3, 2, 1]

// es2016
const values = Object.values(cars)
console.log(values) // [3, 2, 1]</code></pre><h2>2. Object.entries()</h2><p><code>Object.entries()</code>这个方法比较有意思，有点像<code>Object.keys</code>和<code>Object.values</code>的结合体，同时返回对象的<code>key</code>和<code>value</code>，并封装在一个数组里，这个方法的好处在于你可以通过<code>for of</code>遍历一次取出key/value 或者 把<code>Object</code>转为<code>Map</code>：</p><p><strong>例1</strong>，遍历:</p><pre><code class="language-Javascript">const cars = { BMW: 3, Tesla: 2, Toyota: 1 }

// es5的遍历方式
// 需要把`key`取出来，再遍历
Object.keys(cars).forEach(key =&gt; {
  console.log(`key: ${key}, value: ${cars[key]}`)
})

// es2017
for (let [key, value] of Object.entries(cars)) {
  console.log(`key: ${key}, value: ${cars[key]}`)
}</code></pre><p><strong>例2</strong>，把object直接转换为<code>Map</code>:</p><pre><code class="language-Javascript">const cars = { BMW: 3, Tesla: 2, Toyota: 1 }

// es5
const map1 = new Map()
Object.keys(cars).map(key =&gt; {
  map1.set(key, cars[key])
})

console.log(map1) // Map { &#x27;BMW&#x27;: 3, &#x27;Tesla&#x27;: 2, &#x27;Toyota&#x27;: 1 }

// es2016
const map2 = new Map(Object.entries(cars))

console.log(map2) // Map { &#x27;BMW&#x27;: 3, &#x27;Tesla&#x27;: 2, &#x27;Toyota&#x27;: 1 }</code></pre><h2>3. String padding</h2><p>String增加了两个实例方法 -- <code>padStart</code>和<code>padEnd</code>，这两个方法可以在字符串的首/尾添加其他字符串:</p><pre><code class="language-Javascript">// &#x27;someStr&#x27;.padStart(字符数, [,添加的字符])

&#x27;hello&#x27;.padStart(&#x27;10&#x27;, &#x27;a&#x27;) // &#x27;aaaaahello&#x27;, 添加了5个字符`a`后一共`10`个字符
&#x27;hello&#x27;.padEnd(&#x27;10&#x27;, &#x27;b&#x27;) // &#x27;hellobbbbb&#x27;
&#x27;hello&#x27;.padStart(&#x27;7&#x27;) // &#x27;  hello&#x27;, 在头部添加两个个空格</code></pre><h3>3.1 padStart示例</h3><pre><code class="language-Javascript">const formatted = [0, 1, 12, 123, 1234, 12345].map(num =&gt;
  num.toString().padStart(10, &#x27;0&#x27;)
)

console.log(formatted)
// 输出:
// [
//   &#x27;0000000000&#x27;,
//   &#x27;0000000001&#x27;,
//   &#x27;0000000012,&#x27;
//   &#x27;0000000234,&#x27;
//   &#x27;0000001234,&#x27;
//   &#x27;0009012345&#x27;
// ]</code></pre><h3>3.2 padEnd示例</h3><pre><code class="language-Javascript">const cars = {
  &#x27;🚙BMW&#x27;: &#x27;10&#x27;,
  &#x27;🚘Tesla&#x27;: &#x27;5&#x27;,
  &#x27;🚖Lamborghini&#x27;: &#x27;0&#x27;
}

Object.entries(cars).map(([name, count]) =&gt; {
  console.log(`${name.padEnd(20, &#x27; -&#x27;)} Count: ${count.padStart(3, &#x27;0&#x27;)}`)
});

//输出:
// 🚙BMW - - - - - - -  Count: 010
// 🚘Tesla - - - - - -  Count: 005
// 🚖Lamborghini - - -  Count: 000</code></pre><h2>4.Object.getOwnPropertyDescriptors</h2><p>这个方法的作用是补充<code>Object.assign</code>的功能，在浅拷贝(shallow clone)对象的基础上，也会复制<code>getter</code>和<code>setter</code>方法：</p><p>下面的例子用<code>Object.defineProperties</code>拷贝原对象<code>Car</code>到新对象<code>ElectricCar</code>来区分<code>Object.assign</code>和<code>Object.getOwnPropertyDescriptors</code>。</p><pre><code class="language-Javascript">const Car = {
  name: &#x27;BMW&#x27;,
  price: 100000,
  set discount(x) {
    this.d = x
  }
  get discount() {
    return this.d
  }
}

console.log(Object.getOwnPropertyDescriptor(Car, &#x27;discount&#x27;)
// 输出:
// {
//   get: [Function: get],
//   set: [Function: set],
//   enumerable: true,
//   configurable: true
// }

const ElectricCar = Object.assign({}, Car)
console.log(Object.getOwnPropertyDescriptor(ElectricCar, &#x27;discount&#x27;))
// 输出:
// {
//   value: undefined,
//   writable: true,
//   enumerable: true,
//   configurable: true
// }

// 使用`Object.assign`创建`ElectricCar`后，属性`getter`和`setter`丢失了</code></pre><h3>使用<code>Object.getOwnPropertyDescriptors</code>后:</h3><pre><code class="language-Javascript">const Car = {
  name: &#x27;BMW&#x27;,
  price: 100000,
  set discount(x) {
    this.d = x
  }
  get discount() {
    return this.d
  }
}

const ElectricCar2 = Object.defineProperties({}, Object.getOwnPropertyDescriptors(Car))
// 输出:
// {
//   get: [Function: get],  &lt;-----👈
//   set: [Function: set],  &lt;-----👈
//   enumerable: true,
//   configurable: true 
// }</code></pre><h2>5. 在函数最后一个参数的末尾添加逗号</h2><p>这是个很小的一个功能点，在函数形参最后一个参数末尾添加逗号，可以避免<code>git blame</code>提示不必要的改动，
代码示例：</p><pre><code class="language-Javascript">// 假设这个函数由 `程序员_1` 创建
// 这个函数最后一个参数`age`后没有逗号
function Person(
  name,
  age
) {
  this.name = name
  this.age = age
}

// 如果 `程序员_2` 这时有了以下修改
function Person(
  name,
  age, /* 那么这个`,`逗号也会引起`git blame`认为 `程序员_1` 修改了这一行*/
  gender /* 添加了新参数 */
) { // 新添加
  this.name = name
  this.age = age
  this.gender = gender // 新添加
}

// es2017对这个混淆的处理办法是:
// 通过 `程序员_1`在`age`末尾添加`,`逗号

// 更新如下:

// 假设这个函数由 `程序员_1` 创建
// 在最后一个参数`age`后添加`,`逗号
function Person(
  name,
  age, /* 添加逗号 */
) {
  this.name = name
  this.age = age
}</code></pre><h2>6. Async/Await</h2><p>这个特性是目前为止最重要的一个功能，使用<code>async</code>函数可以让我们避免频繁调用<em>恶心的</em><code>callback</code>，使代码保持干净整洁。</p><p>当编译器进入<code>async</code>函数后，遇到<code>await</code>关键字会暂停执行，可以把<code>await</code>后的表达式看成一个<code>promise</code>，直到promise被<code>resolve</code>或<code>reject</code>后，函数才会恢复执行，
具体看如下代码：</p><pre><code class="language-Javascript">  
// es5的`Promise`
function getAmount(userId) {
  getUser(userId)
    .then(getBankBalance)
    .then(amount =&gt; {
      console.log(amount)
    })
}

// es2017的`async`
async function getAmount2(userId) {
  var user = await getUser(userId)
  var amount = await getBankBalance()
  console.log(amount)
}

getAmount(&#x27;1&#x27;) // $1,000
getAmount2(&#x27;1&#x27;) // $1,000

function getUser(userId) {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      resolve(&#x27;张三&#x27;)
    }, 1000)
  })
}

function getBankBalance() {
  return new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; {
      if (user === &#x27;张三&#x27;) {
        resolve(&#x27;$1,000&#x27;)
      } else {
        resolve(&#x27;Unknown User&#x27;)
      }
    }, 1000)
  })
}</code></pre><h3>6.1 Async函数本身返回一个Promise</h3><p>要想得到Async函数的返回值，需要把返回值当作一个promise进行<code>then</code>求值。</p><p>具体看如下代码：</p><pre><code class="language-Javascript">async function doubleAndAdd(a, b) {
  a = await doubleAfter1Sec(a)
  b = await doubleAfter1Sec(b)
  return a + b
}

doubleAndAdd(1, 2).then(console.log) // 5 

async function doubleAfter1Sec(param) {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      resolve(param * 2)
    }, 1000)
  })
}</code></pre><h3>6.2 并行调用async/await</h3><p>在上一个函数<code>doubleAndAdd</code>里依次调用了两个<code>async</code>函数，但是每次调用都等待了1秒，效率很差；因为<code>a</code>和<code>b</code>之间没有耦合，所以我们可以使用<code>Promise.all</code>来并行执行这两次调用:</p><pre><code class="language-Javascript">async function doubleAndAdd(a, b) {
  // 使用`Promise.all`
  // 这个地方使用数组`解构`
  // 来得到两次调用的结果
  const [a, b] = Promise.all([doubleAfter1Sec(a), doubleAfter1Sec(b)])
  return a + b
}

doubleAndAdd(1, 2).then(console.log) // 5 

async function doubleAfter1Sec(param) {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      resolve(param * 2)
    }, 1000)
  })
}</code></pre><h3>6.3 async/await的错误处理</h3><p>使用<code>async/await</code>时的错误处理有很多方法：</p><h4>1. 在函数内使用try/catch</h4><pre><code class="language-Javascript">async function doubleAndAdd(a, b) {
  try {
    a = await doubleAfter1Sec(a)
    b = await doubleAfter1Sec(b)
  } catch (e) {
    return NaN
  }
  return a + b
}

doubleAndAdd(&#x27;one&#x27;, 2).then(console.log) // NaN
doubleAndAdd(1, 2).then(console.log) // 5 

async function doubleAfter1Sec(param) {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      const val = param * 2
      isNaN(val) ? reject(NaN) : resolve(val)
    }, 1000)
  })
}</code></pre><h4>2. catch 所有<code>await</code>表达式</h4><p>因为<code>await</code>表达式返回一个<code>promise</code>，所以我们可以在<code>await</code>表达式后直接执行<code>catch</code>来处理错误</p><pre><code class="language-Javascript">async function doubleAndAdd(a, b) {
  a = await doubleAfter1Sec(a).catch(e =&gt; console.log(`&#x27;a&#x27; is NaN`)
  b = await doubleAfter1Sec(b).catch(e =&gt; console.log(`&#x27;b&#x27; is NaN`))

  if (!a || !b) return NaN
  return a + b
}

doubleAndAdd(&#x27;one&#x27;, 2).then(console.log) // NaN, &quot;a&quot; is NaN
doubleAndAdd(1, 2).then(console.log) // 5 

async function doubleAfter1Sec(param) {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      const val = param * 2
      isNaN(val) ? reject(NaN) : resolve(val)
    }, 1000)
  })
}</code></pre><h4>3. catch 整个async-await函数</h4><pre><code class="language-Javascript">async function doubleAndAdd(a, b) {
  a = await doubleAfter1Sec(a)
  b = await doubleAfter1Sec(b)
  return a + b
}

doubleAndAdd(&#x27;one&#x27;, 2)
  .then(console.log)
  .catch(console.log) // 使用catch</code></pre><p><img style="display:block;margin:0 auto;margin-top:4rem;cursor:zoom-in" src="http://p6jqy6mfr.bkt.clouddn.com/1_X755b572fEcI0vK0fRKWkw.png"/></p><blockquote><p>ECMAScript目前在最终稿阶段，将会在2018年6月或7月正式推出。下面介绍的所有特性属于<strong>stage-4</strong>，都将成为ECMAScript 2018的一部分。</p></blockquote><h2>1. 共享内存和原子性</h2><p>这是JS的一个高级特性，是JS引擎的核心改进。</p><p><strong>共享内存的主要思想是： 把多线程的特性带到JS，开发者从之前由JS引擎管理内存变为自己管理内存，从而写出高性能、高并发的代码。</strong></p><p>这个特性由一个新的全局对象<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer" target="_blank">SharedArrayBuffer</a>来实现，这个对象在一块<strong>共享内存空间</strong>储存数据，这部分数据可以由JS的主线程和<code>web-worker</code>线程共享。</p><p>当前，如果我们想要在JS主线程和web-worker间共享数据时，必须使用<code>postMessage</code>在不同线程间传递数据，有了<code>SharedArrayBuffer</code>后，不同的线程可以直接访问这个对象来共享数据。</p><p>但是多线程间的共享内存会导致竞态条件，为了避免这种情况，引入了<code>原子性</code>的全局对象。原子性对象提供了各种方法来锁住正在被某个线程访问的内存，以保证内存安全。</p></div></section><section class="post-footer"></section></article></div><div class="__react_component_tooltip place-top type-dark " data-id="tooltip"></div></div></div><script type="text/javascript">window.__CSS_CHUNKS__ = {"main":"https://shjie047.github.io/styles.49ed94a1.css"}</script><script type="text/javascript">
                window.__routeInfo = {'path':'post/2018-04-03/Here_are_examples_of_everything_new_in_ECMAScript_2016_2017_and_2018','templateID':2,'sharedPropsHashes':{},'localProps':null,'allProps':{'post':{'title':'ES2016, 2017\u548C2018\u5230\u5E95\u6709\u54EA\u4E9B\u65B0\u4E1C\u897F\uFF1F','author':'rajaraodv','tags':['js','JavaScript','\u524D\u7AEF','frontend','ECMAScript','ECMAScript 2016','ECMAScript 2017','ECMAScript 2018','es6','es7','async','await','async/await'],'iso8601Date':'2018-04-03T08:00:00+08:00','basename':'Here_are_examples_of_everything_new_in_ECMAScript_2016_2017_and_2018','body':'\n\n![](1_Z-9unq6Am3vekNOa5fD1xg.png)\n\nJavascript\u603B\u662F\u5728\u53D1\u5E03\u65B0\u529F\u80FD\uFF0C\u60F3\u8981\u4E00\u76F4\u8DDF\u4E0A\u811A\u6B65\u4E0D\u592A\u5BB9\u6613\uFF0C\u914D\u5957\u7684demo\u4E5F\u5F88\u5C11\uFF0C\u672C\u6587\u65E8\u5728\u7ED3\u5408\u5B9E\u4F8B\u5C55\u793A\u6700\u65B0\u768418\u4E2A\u65B0\u7279\u6027\uFF0C\u505A\u4E2A\u6280\u672F\u7684\u5E03\u9053\u8005\u3002\n\n**\u4E0B\u9762\u4F9D\u7167\u7248\u672C\u7684\u5148\u540E\u987A\u5E8F\u5F00\u59CB\u4ECB\u7ECD:**\n\n![](1_K09EWrqTcTwN9_dlhlzy6Q.png)\n\n## 1. Array.prototype.includes\n\n\u9996\u5148\u662F\u6570\u7EC4\u7684\u4E00\u4E2A\u5B9E\u4F8B\u65B9\u6CD5`includes`\uFF0C\u8FD9\u4E2A\u65B9\u6CD5\u7684\u529F\u80FD\u5F88\u7B80\u5355\uFF1A\u7528\u4E8E\u5224\u65AD\u67D0\u4E00\u9879\u662F\u5426\u5728\u6570\u7EC4\u91CC\uFF0C\u548C\u8FD9\u4E2A\u65B9\u6CD5\u529F\u80FD\u7C7B\u4F3C\u7684\u6709`indexOf`\uFF0C\u4E24\u8005\u7684\u533A\u522B\u662F`indexOf`\u65E0\u6CD5\u5224\u65AD`NaN`\uFF0C\n\u5982\u56FE\uFF1A\n\n```Javascript\nconst arr = [1, 2, 3, 4, NaN];\n\n// es5\nif (arr.indexOf(3) >= 0) {\n  console.log(true)\n}\n\n// es2016\nif (arr.includes(e)) {\n  console.log(true)\n}\n\n// \u6CE8\uFF1AindexOf\u4E0D\u652F\u6301\u68C0\u67E5`NaN`\narr.indexOf(NaN) // -1\narr.includes(NaN) // true\n```\n\n\n## 2. \u6C42\u5E42\u8FD0\u7B97\u7B26\n\n\u7B2C\u4E8C\u4E2A\u65B0\u529F\u80FD\u4E5F\u6BD4\u8F83\u7B80\u5355\uFF1A**\u6C42\u5E42\u8FD0\u7B97\u7B26** -- `**`\uFF0C\u7528\u4E8E\u53D6\u4EE3\u4E4B\u524D\u7684\u6C42\u5E42\u65B9\u6CD5`Math.pow`\uFF0C\n\u5982\u56FE\uFF1A\n\n```Javascript\n// \u4E4B\u524D\nMath.pow(3, 2) // 9\n\n// \u73B0\u5728\n3**2 // 9\n```\n\n![](1_fV_95TaY3ocgE8hlDhhv8w.png)\n\n## 1. Object.values()\n\n`Object.values`\u8FD9\u4E2A\u65B9\u6CD5\u548C`Object.keys`\u7C7B\u4F3C\uFF0C\u90FD\u662F\u8FD4\u56DE\u4E00\u4E2A\u6570\u7EC4\uFF0C\u901A\u8FC7\u65B9\u6CD5\u540D\u53EF\u4EE5\u76F4\u89C2\u7684\u731C\u5230\u8FD4\u56DE\u7684\u662F\u5BF9\u8C61\u7684\u503C(value)\uFF0C\u9700\u8981\u6CE8\u610F\u7684\u662F\uFF1A\u4E24\u4E2A\u65B9\u6CD5\u90FD\u662F\u8FD4\u56DE\u81EA\u8EAB\u539F\u578B\u7684\u5C5E\u6027\uFF0C\u4E0D\u5305\u62EC\u539F\u578B\u94FE\u4E0A\u7684\u5C5E\u6027\uFF0C\u5982\u56FE\uFF1A\n\n```Javascript\nconst cars = {BMW: 3, Tesla: 2, Toyota: 1}\n\n// es5\nconst vals = Object.keys(cars).map(key => cars[key]) \nconsole.log(vals) // [3, 2, 1]\n\n// es2016\nconst values = Object.values(cars)\nconsole.log(values) // [3, 2, 1]\n```\n\n\n## 2. Object.entries()\n\n`Object.entries()`\u8FD9\u4E2A\u65B9\u6CD5\u6BD4\u8F83\u6709\u610F\u601D\uFF0C\u6709\u70B9\u50CF`Object.keys`\u548C`Object.values`\u7684\u7ED3\u5408\u4F53\uFF0C\u540C\u65F6\u8FD4\u56DE\u5BF9\u8C61\u7684`key`\u548C`value`\uFF0C\u5E76\u5C01\u88C5\u5728\u4E00\u4E2A\u6570\u7EC4\u91CC\uFF0C\u8FD9\u4E2A\u65B9\u6CD5\u7684\u597D\u5904\u5728\u4E8E\u4F60\u53EF\u4EE5\u901A\u8FC7`for of`\u904D\u5386\u4E00\u6B21\u53D6\u51FAkey/value \u6216\u8005 \u628A`Object`\u8F6C\u4E3A`Map`\uFF1A\n\n**\u4F8B1**\uFF0C\u904D\u5386:\n\n```Javascript\nconst cars = { BMW: 3, Tesla: 2, Toyota: 1 }\n\n// es5\u7684\u904D\u5386\u65B9\u5F0F\n// \u9700\u8981\u628A`key`\u53D6\u51FA\u6765\uFF0C\u518D\u904D\u5386\nObject.keys(cars).forEach(key => {\n  console.log(`key: ${key}, value: ${cars[key]}`)\n})\n\n// es2017\nfor (let [key, value] of Object.entries(cars)) {\n  console.log(`key: ${key}, value: ${cars[key]}`)\n}\n``` \n\n**\u4F8B2**\uFF0C\u628Aobject\u76F4\u63A5\u8F6C\u6362\u4E3A`Map`:\n\n```Javascript\nconst cars = { BMW: 3, Tesla: 2, Toyota: 1 }\n\n// es5\nconst map1 = new Map()\nObject.keys(cars).map(key => {\n  map1.set(key, cars[key])\n})\n\nconsole.log(map1) // Map { \'BMW\': 3, \'Tesla\': 2, \'Toyota\': 1 }\n\n// es2016\nconst map2 = new Map(Object.entries(cars))\n\nconsole.log(map2) // Map { \'BMW\': 3, \'Tesla\': 2, \'Toyota\': 1 }\n```\n\n## 3. String padding\n\nString\u589E\u52A0\u4E86\u4E24\u4E2A\u5B9E\u4F8B\u65B9\u6CD5 -- `padStart`\u548C`padEnd`\uFF0C\u8FD9\u4E24\u4E2A\u65B9\u6CD5\u53EF\u4EE5\u5728\u5B57\u7B26\u4E32\u7684\u9996/\u5C3E\u6DFB\u52A0\u5176\u4ED6\u5B57\u7B26\u4E32:\n\n```Javascript\n// \'someStr\'.padStart(\u5B57\u7B26\u6570, [,\u6DFB\u52A0\u7684\u5B57\u7B26])\n\n\'hello\'.padStart(\'10\', \'a\') // \'aaaaahello\', \u6DFB\u52A0\u4E865\u4E2A\u5B57\u7B26`a`\u540E\u4E00\u5171`10`\u4E2A\u5B57\u7B26\n\'hello\'.padEnd(\'10\', \'b\') // \'hellobbbbb\'\n\'hello\'.padStart(\'7\') // \'  hello\', \u5728\u5934\u90E8\u6DFB\u52A0\u4E24\u4E2A\u4E2A\u7A7A\u683C\n```\n\n### 3.1 padStart\u793A\u4F8B\n\n```Javascript\nconst formatted = [0, 1, 12, 123, 1234, 12345].map(num =>\n  num.toString().padStart(10, \'0\')\n)\n\nconsole.log(formatted)\n// \u8F93\u51FA:\n// [\n//   \'0000000000\',\n//   \'0000000001\',\n//   \'0000000012,\'\n//   \'0000000234,\'\n//   \'0000001234,\'\n//   \'0009012345\'\n// ]\n```\n\n### 3.2 padEnd\u793A\u4F8B\n\n```Javascript\nconst cars = {\n  \'\uD83D\uDE99BMW\': \'10\',\n  \'\uD83D\uDE98Tesla\': \'5\',\n  \'\uD83D\uDE96Lamborghini\': \'0\'\n}\n\nObject.entries(cars).map(([name, count]) => {\n  console.log(`${name.padEnd(20, \' -\')} Count: ${count.padStart(3, \'0\')}`)\n});\n\n//\u8F93\u51FA:\n// \uD83D\uDE99BMW - - - - - - -  Count: 010\n// \uD83D\uDE98Tesla - - - - - -  Count: 005\n// \uD83D\uDE96Lamborghini - - -  Count: 000\n```\n\n## 4.Object.getOwnPropertyDescriptors\n\n\u8FD9\u4E2A\u65B9\u6CD5\u7684\u4F5C\u7528\u662F\u8865\u5145`Object.assign`\u7684\u529F\u80FD\uFF0C\u5728\u6D45\u62F7\u8D1D(shallow clone)\u5BF9\u8C61\u7684\u57FA\u7840\u4E0A\uFF0C\u4E5F\u4F1A\u590D\u5236`getter`\u548C`setter`\u65B9\u6CD5\uFF1A\n\n\u4E0B\u9762\u7684\u4F8B\u5B50\u7528`Object.defineProperties`\u62F7\u8D1D\u539F\u5BF9\u8C61`Car`\u5230\u65B0\u5BF9\u8C61`ElectricCar`\u6765\u533A\u5206`Object.assign`\u548C`Object.getOwnPropertyDescriptors`\u3002\n\n```Javascript\nconst Car = {\n  name: \'BMW\',\n  price: 100000,\n  set discount(x) {\n    this.d = x\n  }\n  get discount() {\n    return this.d\n  }\n}\n\nconsole.log(Object.getOwnPropertyDescriptor(Car, \'discount\')\n// \u8F93\u51FA:\n// {\n//   get: [Function: get],\n//   set: [Function: set],\n//   enumerable: true,\n//   configurable: true\n// }\n\nconst ElectricCar = Object.assign({}, Car)\nconsole.log(Object.getOwnPropertyDescriptor(ElectricCar, \'discount\'))\n// \u8F93\u51FA:\n// {\n//   value: undefined,\n//   writable: true,\n//   enumerable: true,\n//   configurable: true\n// }\n\n// \u4F7F\u7528`Object.assign`\u521B\u5EFA`ElectricCar`\u540E\uFF0C\u5C5E\u6027`getter`\u548C`setter`\u4E22\u5931\u4E86\n```\n\n### \u4F7F\u7528`Object.getOwnPropertyDescriptors`\u540E:\n\n```Javascript\nconst Car = {\n  name: \'BMW\',\n  price: 100000,\n  set discount(x) {\n    this.d = x\n  }\n  get discount() {\n    return this.d\n  }\n}\n\nconst ElectricCar2 = Object.defineProperties({}, Object.getOwnPropertyDescriptors(Car))\n// \u8F93\u51FA:\n// {\n//   get: [Function: get],  <-----\uD83D\uDC48\n//   set: [Function: set],  <-----\uD83D\uDC48\n//   enumerable: true,\n//   configurable: true \n// }\n```\n\n## 5. \u5728\u51FD\u6570\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u7684\u672B\u5C3E\u6DFB\u52A0\u9017\u53F7\n\n\u8FD9\u662F\u4E2A\u5F88\u5C0F\u7684\u4E00\u4E2A\u529F\u80FD\u70B9\uFF0C\u5728\u51FD\u6570\u5F62\u53C2\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u672B\u5C3E\u6DFB\u52A0\u9017\u53F7\uFF0C\u53EF\u4EE5\u907F\u514D`git blame`\u63D0\u793A\u4E0D\u5FC5\u8981\u7684\u6539\u52A8\uFF0C\n\u4EE3\u7801\u793A\u4F8B\uFF1A\n\n```Javascript\n// \u5047\u8BBE\u8FD9\u4E2A\u51FD\u6570\u7531 `\u7A0B\u5E8F\u5458_1` \u521B\u5EFA\n// \u8FD9\u4E2A\u51FD\u6570\u6700\u540E\u4E00\u4E2A\u53C2\u6570`age`\u540E\u6CA1\u6709\u9017\u53F7\nfunction Person(\n  name,\n  age\n) {\n  this.name = name\n  this.age = age\n}\n\n// \u5982\u679C `\u7A0B\u5E8F\u5458_2` \u8FD9\u65F6\u6709\u4E86\u4EE5\u4E0B\u4FEE\u6539\nfunction Person(\n  name,\n  age, /* \u90A3\u4E48\u8FD9\u4E2A`,`\u9017\u53F7\u4E5F\u4F1A\u5F15\u8D77`git blame`\u8BA4\u4E3A `\u7A0B\u5E8F\u5458_1` \u4FEE\u6539\u4E86\u8FD9\u4E00\u884C*/\n  gender /* \u6DFB\u52A0\u4E86\u65B0\u53C2\u6570 */\n) { // \u65B0\u6DFB\u52A0\n  this.name = name\n  this.age = age\n  this.gender = gender // \u65B0\u6DFB\u52A0\n}\n\n// es2017\u5BF9\u8FD9\u4E2A\u6DF7\u6DC6\u7684\u5904\u7406\u529E\u6CD5\u662F:\n// \u901A\u8FC7 `\u7A0B\u5E8F\u5458_1`\u5728`age`\u672B\u5C3E\u6DFB\u52A0`,`\u9017\u53F7\n\n// \u66F4\u65B0\u5982\u4E0B:\n\n// \u5047\u8BBE\u8FD9\u4E2A\u51FD\u6570\u7531 `\u7A0B\u5E8F\u5458_1` \u521B\u5EFA\n// \u5728\u6700\u540E\u4E00\u4E2A\u53C2\u6570`age`\u540E\u6DFB\u52A0`,`\u9017\u53F7\nfunction Person(\n  name,\n  age, /* \u6DFB\u52A0\u9017\u53F7 */\n) {\n  this.name = name\n  this.age = age\n}\n```\n\n## 6. Async/Await\n\n\u8FD9\u4E2A\u7279\u6027\u662F\u76EE\u524D\u4E3A\u6B62\u6700\u91CD\u8981\u7684\u4E00\u4E2A\u529F\u80FD\uFF0C\u4F7F\u7528`async`\u51FD\u6570\u53EF\u4EE5\u8BA9\u6211\u4EEC\u907F\u514D\u9891\u7E41\u8C03\u7528*\u6076\u5FC3\u7684*`callback`\uFF0C\u4F7F\u4EE3\u7801\u4FDD\u6301\u5E72\u51C0\u6574\u6D01\u3002\n\n\u5F53\u7F16\u8BD1\u5668\u8FDB\u5165`async`\u51FD\u6570\u540E\uFF0C\u9047\u5230`await`\u5173\u952E\u5B57\u4F1A\u6682\u505C\u6267\u884C\uFF0C\u53EF\u4EE5\u628A`await`\u540E\u7684\u8868\u8FBE\u5F0F\u770B\u6210\u4E00\u4E2A`promise`\uFF0C\u76F4\u5230promise\u88AB`resolve`\u6216`reject`\u540E\uFF0C\u51FD\u6570\u624D\u4F1A\u6062\u590D\u6267\u884C\uFF0C\n\u5177\u4F53\u770B\u5982\u4E0B\u4EE3\u7801\uFF1A\n\n```Javascript\n  \n// es5\u7684`Promise`\nfunction getAmount(userId) {\n  getUser(userId)\n    .then(getBankBalance)\n    .then(amount => {\n      console.log(amount)\n    })\n}\n\n// es2017\u7684`async`\nasync function getAmount2(userId) {\n  var user = await getUser(userId)\n  var amount = await getBankBalance()\n  console.log(amount)\n}\n\ngetAmount(\'1\') // $1,000\ngetAmount2(\'1\') // $1,000\n\nfunction getUser(userId) {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(\'\u5F20\u4E09\')\n    }, 1000)\n  })\n}\n\nfunction getBankBalance() {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (user === \'\u5F20\u4E09\') {\n        resolve(\'$1,000\')\n      } else {\n        resolve(\'Unknown User\')\n      }\n    }, 1000)\n  })\n}\n```\n\n### 6.1 Async\u51FD\u6570\u672C\u8EAB\u8FD4\u56DE\u4E00\u4E2APromise\n\n\u8981\u60F3\u5F97\u5230Async\u51FD\u6570\u7684\u8FD4\u56DE\u503C\uFF0C\u9700\u8981\u628A\u8FD4\u56DE\u503C\u5F53\u4F5C\u4E00\u4E2Apromise\u8FDB\u884C`then`\u6C42\u503C\u3002\n\n\u5177\u4F53\u770B\u5982\u4E0B\u4EE3\u7801\uFF1A\n\n```Javascript\nasync function doubleAndAdd(a, b) {\n  a = await doubleAfter1Sec(a)\n  b = await doubleAfter1Sec(b)\n  return a + b\n}\n\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(param * 2)\n    }, 1000)\n  })\n}\n```\n\n### 6.2 \u5E76\u884C\u8C03\u7528async/await\n\n\u5728\u4E0A\u4E00\u4E2A\u51FD\u6570`doubleAndAdd`\u91CC\u4F9D\u6B21\u8C03\u7528\u4E86\u4E24\u4E2A`async`\u51FD\u6570\uFF0C\u4F46\u662F\u6BCF\u6B21\u8C03\u7528\u90FD\u7B49\u5F85\u4E861\u79D2\uFF0C\u6548\u7387\u5F88\u5DEE\uFF1B\u56E0\u4E3A`a`\u548C`b`\u4E4B\u95F4\u6CA1\u6709\u8026\u5408\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528`Promise.all`\u6765\u5E76\u884C\u6267\u884C\u8FD9\u4E24\u6B21\u8C03\u7528:\n\n```Javascript\nasync function doubleAndAdd(a, b) {\n  // \u4F7F\u7528`Promise.all`\n  // \u8FD9\u4E2A\u5730\u65B9\u4F7F\u7528\u6570\u7EC4`\u89E3\u6784`\n  // \u6765\u5F97\u5230\u4E24\u6B21\u8C03\u7528\u7684\u7ED3\u679C\n  const [a, b] = Promise.all([doubleAfter1Sec(a), doubleAfter1Sec(b)])\n  return a + b\n}\n\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(param * 2)\n    }, 1000)\n  })\n}\n```\n\n### 6.3 async/await\u7684\u9519\u8BEF\u5904\u7406\n\n\u4F7F\u7528`async/await`\u65F6\u7684\u9519\u8BEF\u5904\u7406\u6709\u5F88\u591A\u65B9\u6CD5\uFF1A\n\n#### 1. \u5728\u51FD\u6570\u5185\u4F7F\u7528try/catch\n\n```Javascript\nasync function doubleAndAdd(a, b) {\n  try {\n    a = await doubleAfter1Sec(a)\n    b = await doubleAfter1Sec(b)\n  } catch (e) {\n    return NaN\n  }\n  return a + b\n}\n\ndoubleAndAdd(\'one\', 2).then(console.log) // NaN\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      const val = param * 2\n      isNaN(val) ? reject(NaN) : resolve(val)\n    }, 1000)\n  })\n}\n```\n\n#### 2. catch \u6240\u6709`await`\u8868\u8FBE\u5F0F\n\n\u56E0\u4E3A`await`\u8868\u8FBE\u5F0F\u8FD4\u56DE\u4E00\u4E2A`promise`\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u5728`await`\u8868\u8FBE\u5F0F\u540E\u76F4\u63A5\u6267\u884C`catch`\u6765\u5904\u7406\u9519\u8BEF\n\n```Javascript\nasync function doubleAndAdd(a, b) {\n  a = await doubleAfter1Sec(a).catch(e => console.log(`\'a\' is NaN`)\n  b = await doubleAfter1Sec(b).catch(e => console.log(`\'b\' is NaN`))\n\n  if (!a || !b) return NaN\n  return a + b\n}\n\ndoubleAndAdd(\'one\', 2).then(console.log) // NaN, "a" is NaN\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      const val = param * 2\n      isNaN(val) ? reject(NaN) : resolve(val)\n    }, 1000)\n  })\n}\n```\n\n#### 3. catch \u6574\u4E2Aasync-await\u51FD\u6570\n\n```Javascript\nasync function doubleAndAdd(a, b) {\n  a = await doubleAfter1Sec(a)\n  b = await doubleAfter1Sec(b)\n  return a + b\n}\n\ndoubleAndAdd(\'one\', 2)\n  .then(console.log)\n  .catch(console.log) // \u4F7F\u7528catch\n```\n\n![](1_X755b572fEcI0vK0fRKWkw.png)\n\n> ECMAScript\u76EE\u524D\u5728\u6700\u7EC8\u7A3F\u9636\u6BB5\uFF0C\u5C06\u4F1A\u57282018\u5E746\u6708\u62167\u6708\u6B63\u5F0F\u63A8\u51FA\u3002\u4E0B\u9762\u4ECB\u7ECD\u7684\u6240\u6709\u7279\u6027\u5C5E\u4E8E**stage-4**\uFF0C\u90FD\u5C06\u6210\u4E3AECMAScript 2018\u7684\u4E00\u90E8\u5206\u3002\n\n## 1. \u5171\u4EAB\u5185\u5B58\u548C\u539F\u5B50\u6027\n\n\u8FD9\u662FJS\u7684\u4E00\u4E2A\u9AD8\u7EA7\u7279\u6027\uFF0C\u662FJS\u5F15\u64CE\u7684\u6838\u5FC3\u6539\u8FDB\u3002\n\n**\u5171\u4EAB\u5185\u5B58\u7684\u4E3B\u8981\u601D\u60F3\u662F\uFF1A \u628A\u591A\u7EBF\u7A0B\u7684\u7279\u6027\u5E26\u5230JS\uFF0C\u5F00\u53D1\u8005\u4ECE\u4E4B\u524D\u7531JS\u5F15\u64CE\u7BA1\u7406\u5185\u5B58\u53D8\u4E3A\u81EA\u5DF1\u7BA1\u7406\u5185\u5B58\uFF0C\u4ECE\u800C\u5199\u51FA\u9AD8\u6027\u80FD\u3001\u9AD8\u5E76\u53D1\u7684\u4EE3\u7801\u3002**\n\n\u8FD9\u4E2A\u7279\u6027\u7531\u4E00\u4E2A\u65B0\u7684\u5168\u5C40\u5BF9\u8C61[SharedArrayBuffer](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer)\u6765\u5B9E\u73B0\uFF0C\u8FD9\u4E2A\u5BF9\u8C61\u5728\u4E00\u5757**\u5171\u4EAB\u5185\u5B58\u7A7A\u95F4**\u50A8\u5B58\u6570\u636E\uFF0C\u8FD9\u90E8\u5206\u6570\u636E\u53EF\u4EE5\u7531JS\u7684\u4E3B\u7EBF\u7A0B\u548C`web-worker`\u7EBF\u7A0B\u5171\u4EAB\u3002\n\n\u5F53\u524D\uFF0C\u5982\u679C\u6211\u4EEC\u60F3\u8981\u5728JS\u4E3B\u7EBF\u7A0B\u548Cweb-worker\u95F4\u5171\u4EAB\u6570\u636E\u65F6\uFF0C\u5FC5\u987B\u4F7F\u7528`postMessage`\u5728\u4E0D\u540C\u7EBF\u7A0B\u95F4\u4F20\u9012\u6570\u636E\uFF0C\u6709\u4E86`SharedArrayBuffer`\u540E\uFF0C\u4E0D\u540C\u7684\u7EBF\u7A0B\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E2A\u5BF9\u8C61\u6765\u5171\u4EAB\u6570\u636E\u3002\n\n\u4F46\u662F\u591A\u7EBF\u7A0B\u95F4\u7684\u5171\u4EAB\u5185\u5B58\u4F1A\u5BFC\u81F4\u7ADE\u6001\u6761\u4EF6\uFF0C\u4E3A\u4E86\u907F\u514D\u8FD9\u79CD\u60C5\u51B5\uFF0C\u5F15\u5165\u4E86`\u539F\u5B50\u6027`\u7684\u5168\u5C40\u5BF9\u8C61\u3002\u539F\u5B50\u6027\u5BF9\u8C61\u63D0\u4F9B\u4E86\u5404\u79CD\u65B9\u6CD5\u6765\u9501\u4F4F\u6B63\u5728\u88AB\u67D0\u4E2A\u7EBF\u7A0B\u8BBF\u95EE\u7684\u5185\u5B58\uFF0C\u4EE5\u4FDD\u8BC1\u5185\u5B58\u5B89\u5168\u3002\n','date':'2018-04-03'}},'siteData':{'title':'React Static'}};</script><script defer="" type="text/javascript" src="https://shjie047.github.io/bootstrap.9d1d5f8f.js"></script><script defer="" type="text/javascript" src="https://shjie047.github.io/templates/src/containers/Post.f97300b9.js"></script><script defer="" type="text/javascript" src="https://shjie047.github.io/main.96794c51.js"></script></body></html>