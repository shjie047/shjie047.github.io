{"path":"tags/Javascript","templateID":5,"sharedPropsHashes":{"tags":"1C8cqm"},"localProps":{"posts":[{"author":"Travis Fischer","title":"é‚£äº›å€¼å¾—ä¸€ç”¨çš„JSåº“","cover":"http://p6jqy6mfr.bkt.clouddn.com/1_Ed4yEvBF4DmMJ1Es1p_hXw.jpeg","iso8601Date":"2018-03-10T08:00:00+08:00","basename":"JavaScript_Modules_Worth_Using","tags":["Javascript","Frontend","å‰ç«¯","NodeJS","Node","Npm"],"date":"2018-03-10","cate":"frontend","summary":"æœ¬æ–‡æ”¶é›†äº†å‰ç«¯JSå¼€å‘å’ŒNodeJSå¼€å‘ä¸­çš„ä¸€äº›ä¼˜ç§€çš„åº“å’Œå·¥å…·ã€‚\n\n1. å‘½ä»¤è¡Œå·¥å…·\n\nnp - æ›´å¥½çš„npm publish\n\nå¦‚æœä½ æ˜¯ä¸€ä¸ªnpmä½œè€…ï¼Œå¼ºçƒˆæ¨èä½¿ç”¨npæ¨¡å—ï¼Œå®ƒèƒ½ä¸ºä½ è½»è€Œæ˜“ä¸¾åœ°è§£å†³æ›´æ–°ç‰ˆæœ¬ã€æ·»åŠ gitå‘å¸ƒtagå’Œå‘å¸ƒä»£ç åˆ°npmï¼Œç‰¹åˆ«æ˜¯å½“ä½ æœ‰å¾ˆå¤šnpmæ¨¡å—è¦ç»´æŠ¤çš„æ—¶å€™ã€‚\n\n\n\nyarn - æ›´å¥½çš„åŒ…ç®¡ç†å·¥å…·ï¼ŒåŒæ—¶å…¼å®¹npm\n\nè™½ç„¶npm v5å·²ç»æ¯”ä¸Šä¸€ä¸ªç‰ˆæœ¬é€Ÿåº¦æå‡å¾ˆå¤šï¼Œä½†æ˜¯ä¸ªäººæ„Ÿè§‰åœ¨æœ¬åœ°å¼€å‘ä¸­yarnä»ç„¶ä»¥é€Ÿåº¦å’Œç¨³å®šæ€§å–èƒœã€‚ä½†æ˜¯æ— è®ºç”¨å“ªä¸ªå·¥å…·ï¼Œä½ éƒ½åœ¨ä½¿ç”¨åŒä¸€ä¸ªnpmåŒ…çš„æ•°æ®ï¼Œç©¶ç«Ÿä¸¤è€…å­°ä¼˜å­°åŠ£å¹¶æ²¡æœ‰å®šè®ºï¼Œæ‰€ä»¥æŒ‘é€‰å“ªä¸ªå·¥å…·è¿˜æ˜¯è¦çœ‹ä½ çš„é¡¹ç›®éœ€æ±‚ã€‚\n\nprettier - å¼ºçƒˆæ¨èçš„ä¸€æ¬¾ä»£ç æ ¼å¼åŒ–å·¥å…·\n\nPrettieré€šè¿‡ä»£ç è§£æå¼ºåˆ¶è¦æ±‚ä»£ç é£æ ¼ä¿æŒä¸€è‡´ï¼Œç„¶åç”¨å†…ç½®çš„è§„åˆ™æ¥é‡æ–°è¾“å‡ºæ ·å¼ï¼Œå¹¶é€šè¿‡å¿…è¦çš„ä»£ç å°è£…æ¥é™åˆ¶ä»£ç æœ€å¤§è¡Œæ•°ã€‚\n\n\n\nnow\n\nNowæ¯«æ— ç–‘é—®æ˜¯è¿„ä»Šä¸ºæ­¢æœ€å¥½çš„å…è´¹éƒ¨ç½²ç³»ç»Ÿï¼Œä»¥ç®€å•ã€ç¨³å®šå’ŒåŠŸèƒ½å¤šè‘—ç§°ã€‚å®ƒéå¸¸é€‚åˆæµ‹è¯•é™æ€å’ŒåŠ¨æ€éƒ¨ç½²ï¼Œå¹¶ä¸”å¾ˆæ–¹ä¾¿æ‰©å……æœåŠ¡å™¨ã€‚\n\n\n\nasciinema - å½•åˆ¶é«˜è´¨é‡çš„ç»ˆç«¯(terminal)ä¿¡æ¯\n\nä¸€æ¬¾å½•åˆ¶ç»ˆç«¯ &amp; ä»£ç çš„ç¥å™¨ï¼Œä»æ­¤åˆ†äº«ä»£ç å‘Šåˆ«æˆªå±ï¼\n\n2. Promise\n\nè¿™ä¸€å°èŠ‚å€¼å¾—ä¸“é—¨æ‹¿å‡ºæ¥å†™ä¸€ç¯‡æ–‡ç« ï¼Œå°¤å…¶ç°åœ¨async/awaitå·²ç»æˆä¸ºJSçš„å¹¶å‘ç¼–ç¨‹çš„æ ‡å‡†ã€‚è¿™é‡Œæ”¶é›†äº†ä¸€äº›Nodeç«¯éå¸¸æœ‰ç”¨çš„Promiseç›¸å…³åº“ï¼š\n\npify - è½¬æ¢callbackä¸ºpromise\n\nç›®å‰æœ‰å¾ˆå¤šæ–¹æ³•éƒ½å¯ä»¥æŠŠè¿‡æ—¶çš„callback-styleçš„ä»£ç è½¬æˆpromise-styleï¼Œä½†æ˜¯pifyå¯èƒ½æ˜¯å…¶ä¸­æœ€å¥½çš„è§£å†³æ–¹æ¡ˆã€‚å®ƒä½“ç§¯å¾ˆå°ï¼ŒåŒæ—¶æœ‰util.promisify(nodeæœ¬åœ°æ¥å£)æ²¡æœ‰çš„ä¸€äº›ç»†èŠ‚ï¼šæ¯”å¦‚æ–¹æ³•è‡ªåŠ¨ç»‘å®šç­‰ã€‚\n\np-map - ç»™å¹¶è¡Œè®¾ç½®é™åˆ¶æ•°\n\nå¹¶è¡Œè™½ç„¶å¾ˆå¥½ï¼Œä½†æ˜¯å¤§å¤šæ—¶å€™å‡ºäºå¸¦å®½æˆ–è€…è®¡ç®—èµ„æºçš„è€ƒè™‘éœ€è¦è®¾ç½®ä¸€ä¸ªå¯¹å¹¶è¡Œçš„é™åˆ¶ï¼Œè¿™æ˜¯p-mapæ“…é•¿çš„é¢†åŸŸã€‚å®ƒå¯ä»¥å–ä»£ä¸æ”¯æŒé™åˆ¶å¹¶è¡Œçš„Promise.all()æ–¹æ³•ã€‚\n\np-retry - ç»™promiseè¯·æ±‚æ·»åŠ é‡æ–°è¯·æ±‚æœºåˆ¶\n\né€šå¸¸åœ¨å‘é€httpè¯·æ±‚æˆ–è€…å¤–éƒ¨æœåŠ¡è°ƒç”¨çš„æ—¶å€™å¯ä»¥ç”¨p-retryåœ¨å¤–éƒ¨å°è£…ä¸€å±‚ï¼Œæé«˜è¯·æ±‚çš„å¥å£®æ€§ã€‚\n\np-timeout - ä¸ºpromiseè¯·æ±‚æ·»åŠ è¶…æ—¶å¤„ç†\n\nä¸ºpromiseè¯·æ±‚æŒ‡å®šä¸€ä¸ªè¶…æ—¶æ—¶é—´ï¼Œç„¶åæ·»åŠ è¶…æ—¶å¤„ç†æ–¹æ¡ˆ\n\n3. æ•°æ®æŠ“å–\n\næœ‰å¾ˆå¤šå¾ˆæ£’çš„æŠ“å–å·¥å…·ï¼Œæœ‰ä¸€äº›ç›´æ¥æ“ä½œHTMLï¼Œåƒcheerioï¼Œè¿˜æœ‰ä¸€ä¸ªäº›å¯ä»¥æ¨¡æ‹Ÿä¸€ä¸ªå®Œæ•´çš„æµè§ˆå™¨ç¯å¢ƒåƒpuppeteerã€‚å…·ä½“ä½¿ç”¨å“ªç§å·¥å…·è¿˜æ˜¯è¦ä¾èµ–ä½¿ç”¨åœºæ™¯ã€‚\n\ncheerio - å¿«é€Ÿã€çµæ´»å’Œå®ç°æ ¸å¿ƒjQuery Apiï¼ŒæœåŠ¡äºæœåŠ¡ç«¯\n\nå½“ä½ æƒ³æ“ä½œHTMLæ—¶ï¼ŒCheerioéå¸¸é€‚åˆå¿«é€Ÿ &amp; è‚®è„çš„webæ•°æ®æŠ“å–ã€‚å®ƒæä¾›äº†å¥å£®çš„ç±»jQueryè¯­æ³•ï¼Œç”¨æ¥éå†å’Œå¤„ç†HTMLæ–‡æ¡£ã€‚åœ¨æŠ“å–è¿œç¨‹HTMLæ–‡æ¡£æ—¶ï¼ŒCheerioå’Œä¸‹é¢è¦ä»‹ç»çš„require-promise-nativeéå¸¸é€‚åˆæ­é…ä¸€èµ·ä½¿ç”¨ã€‚\n\npuppeteer - Headless Chrome Node API\n\nå’Œcheerioä¸åŒï¼Œpuppeteeræ˜¯åœ¨headless Chrome(æ²¡æœ‰UIçš„Chromeï¼Œä¾›æœåŠ¡ç«¯è‡ªåŠ¨åŒ–æµ‹è¯•ç”¨)å¤–åŒ…è£…çš„ä¸€å±‚é«˜çº§APIï¼Œé€šè¿‡å¼€å‘å·¥å…·åè®®æ§åˆ¶headless Chromeæˆ–è€…Chromiumï¼Œå®ƒä¹Ÿå¯ä»¥é€šè¿‡é…ç½®æ¥ä½¿ç”¨å…¨éƒ¨Chromeæˆ–è€…Chromiusçš„åŠŸèƒ½ã€‚\n\n4. Node.js\n\ndotenv-safe - ä».envé‡ŒåŠ è½½ç¯å¢ƒå˜é‡\n\nè¿™ä¸ªæ¨¡å—æ‰©å±•äº†éå¸¸æµè¡Œçš„åº“dotenvï¼Œé€šè¿‡æ·»åŠ ä¸€ä¸ª.env.exampleæ–‡ä»¶å¼ºåˆ¶ä¿è¯é¢„æœŸç¯å¢ƒå˜é‡çš„å­˜åœ¨ã€‚ä¸åŸå§‹ç‰ˆæœ¬ä¸€æ ·ï¼Œå®ƒä¸ºNodeæä¾›äº†å¿«é€Ÿçš„ã€å®‰å…¨çš„å’Œå¥å£®çš„ç¯å¢ƒå˜é‡ã€‚\n\nrequestå’Œrequest-promise-native - ç®€å•çš„HTTPè¯·æ±‚å®¢æˆ·ç«¯\n\nå‘é€HTTPè¯·æ±‚æ˜¯ä¸€ä¸ªæå…¶å¸¸ç”¨çš„æ“ä½œï¼Œå¸¸ç”¨çš„åº“æ˜¯request-promise-nativeï¼Œå®ƒå°è£…äº†requeståº“ï¼Œå¹¶æä¾›äº†æœ¬åœ°ES6çš„Promiseæ”¯æŒã€‚\n\nconsolidate - Nodeçš„æ¨¡æ¿å¼•æ“æ•´åˆåº“\n\nConsolidateå¯ä»¥éå¸¸æ¼‚äº®çš„å¤„ç†ä»»ä½•åç«¯æ¨¡æ¿ï¼ˆemail, htmlç­‰ç­‰ï¼‰ã€‚å®ƒæä¾›äº†ç®€å•ã€ç¨³å®šçš„å„ç§æ¨¡æ¿å¼•æ“æ¥å£ã€‚\n\nexeca - æ›´å¥½çš„child_process\n\nåœ¨éœ€è¦æ‰§è¡Œshellå‘½ä»¤æˆ–è€…spawnä¸€ä¸ªå­è¿›ç¨‹æ—¶æå…¶æœ‰ç”¨\n\nfs-extra - æ›´å¥½çš„fsï¼Œæ‹¥æœ‰æ›´å¤šæ–¹æ³•å’ŒPromiseæ”¯æŒ\n\n5. æ•°å­¦\n\nd3-random - ç”Ÿæˆå„ç§åˆ†å¸ƒçš„éšæœºæ•°\n\nd3-ease - äº§ç”Ÿæµç•…åŠ¨ç”»çš„Easingå‡½æ•°\n\n6. æµ‹è¯•\n\nava - å¾ˆæ£’çš„JS test runner\n\nAvaæ˜¯æ¯”è¾ƒæ–°çš„JSå•å…ƒæµ‹è¯•å·¥å…·ï¼Œå®ƒå…·æœ‰ä¼—å¤šJSæµ‹è¯•åº“(Mochaã€tapeã€chaiå’Œå…¶ä»–åº“)çš„ä¼˜ç‚¹ï¼Œé»˜è®¤æƒ…å†µä¸‹é‡‡ç”¨å¹¶è¡Œè¿è¡Œçš„æ–¹å¼ã€‚\n\n\n\nnock - HTTPæ¨¡æ‹Ÿè¯·æ±‚\n\nNockæ˜¯ä¸€ä¸ªå¾ˆæ£’çš„æµ‹è¯•HTTPè¯·æ±‚çš„åº“ã€‚å¦‚æœä½ çš„Nodeæ¨¡å—éœ€è¦å‘é€HTTPè¯·æ±‚ï¼Œå¹¶ä¸”ä½ æƒ³è¦å¯¹è¿™ä¸ªè¯·æ±‚åšå•å…ƒæµ‹è¯•ï¼Œé‚£ä¹ˆnockæ˜¯ä½ çš„ä¸äºŒä¹‹é€‰ã€‚","readingtime":5,"url":"/cates/frontend/post/2018-03-10/JavaScript_Modules_Worth_Using","dirs":["js"],"relatives":[{"url":"/cates/frontend/post/2018-04-03/Here_are_examples_of_everything_new_in_ECMAScript_2016_2017_and_2018","title":"ES2016, 2017å’Œ2018åˆ°åº•æœ‰å“ªäº›æ–°ä¸œè¥¿ï¼Ÿ"},{"url":"/cates/frontend/post/2018-04-08/hyperapp","title":"1kbçš„JSæ¡†æ¶ - Hyperapp"}]},{"author":"shjie047","title":"1kbçš„JSæ¡†æ¶ - Hyperapp","cover":"http://p6jqy6mfr.bkt.clouddn.com/stock-photo-249278113.jpg","iso8601Date":"2018-04-08T08:00:00+08:00","basename":"hyperapp","tags":["å‰ç«¯","Javascript","Frontend","Hyperapp","React","Web"],"date":"2018-04-08","cate":"frontend","summary":"1. æ¦‚è§ˆ\n\nHyperappæ˜¯æœ€è¿‘å¼€æºçš„ä¸€ä¸ªå‰ç«¯webå¼€å‘æ¡†æ¶ï¼Œä½“ç§¯å¾ˆå° -- åªæœ‰1.4kbï¼Œapiå¾ˆç®€å• -- åªæœ‰ä¸¤ä¸ªå‡½æ•°: hå’Œappï¼›å€Ÿé‰´äº†Reactã€Reduxå’ŒElmçš„æ€æƒ³,\n\nå®ƒçš„ä¸»è¦è¦ç‰¹ç‚¹æ˜¯ï¼š\n\næœ€å°åŒ– -- ç”¨æœ€å°‘çš„ä»£ç å®ç°äº†åŒç±»æ¡†æ¶(Reactã€Vueç­‰)çš„æ ¸å¿ƒåŠŸèƒ½é‡å®æ•ˆ -- åšæŒå‡½æ•°å¼ç¼–ç¨‹æ¥ç®¡ç†çŠ¶æ€(state)ï¼ŒåŒæ—¶æä¾›æœ‰æ•ˆçš„æ–¹æ³•æ¥å¤„ç†è¾¹é™…æ•ˆåº”(side effects)æ¯”å¦‚ï¼šå¼‚æ­¥actionå’ŒDOMæ“ä½œç‹¬ç«‹æ€§ -- è‡ªèº«é›†æˆçŠ¶æ€ç®¡ç†å’Œè™šæ‹ŸDOMå¼•æ“(è™šæ‹ŸDOMæ”¯æŒkeyæ›´æ–° &amp;&amp; ç”Ÿå‘½å‘¨æœŸäº‹ä»¶)ï¼Œæ²¡æœ‰ç¬¬ä¸‰æ–¹ä¾èµ–\n\nä¸‹é¢ç”¨Hyperappå®ç°ä¸€ä¸ªCounterçš„demoï¼Œå®ç°äº†ç®€å•çš„åŠ å’Œå‡:\n\n`Javascript\n// ä¸¤ä¸ªAPI\nimport { h, app } from &quot;hyperapp&quot;\n\n// çŠ¶æ€\nconst state = {\n  count: 0\n}\n\n// ç”¨actionæ¥æ›´æ–°state\nconst actions = {\n  down: value =&gt; state =&gt; ({ count: state.count - value }),\n  up: value =&gt; state =&gt; ({ count: state.count + value })\n}\n\n// ç”¨jsxæ¥ç¼–å†™è§†å›¾\nconst view = (state, actions) =&gt; (\n  &lt;div&gt;\n    &lt;h1&gt;{state.count}&lt;/h1&gt;\n    &lt;button onclick={() =&gt; actions.down(1)}&gt;-&lt;/button&gt;\n    &lt;button onclick={() =&gt; actions.up(1)}&gt;+&lt;/button&gt;\n  &lt;/div&gt;\n)\n\n// æŠŠstateï¼Œactionsï¼Œviewè¿æ¥èµ·æ¥å¹¶æ¸²æŸ“åˆ°é¡µé¢çš„bodyå…ƒç´ ä¸Š\napp(state, actions, view, document.body)\n`\n\n2. API\n\nHyperappç”±ä¸¤ä¸ªå‡½æ•°APIç»„æˆï¼šhå’Œappã€‚\n\nhè¿”å›ä¸€ä¸ªæ–°çš„è™šæ‹ŸDOMèŠ‚ç‚¹æ ‘ï¼ŒappæŠŠä¸€ä¸ªæ–°çš„appæ¸²æŸ“åˆ°æŒ‡å®šDOMå…ƒç´ ä¸Šã€‚\n\nä»¥ä¸Šçš„ç¤ºä¾‹éœ€è¦æœ¬åœ°ç¯å¢ƒå®‰è£…ï¼šç¼–è¯‘å™¨ -- Babelæˆ–è€…TypeScriptï¼Œæ‰“åŒ…å·¥å…· -- Parcelæˆ–è€…Webpackï¼Œä½¿ç”¨JSXæ¥ç¼–å†™æ¨¡æ¿éœ€è¦åœ¨.babelrcå®‰è£…transform pluginæ¥æ”¯æŒ:\n\nJSON\n{\n  &quot;plugins&quot;: [[&quot;transform-react-jsx&quot;, { &quot;pragma&quot;: &quot;h&quot; }]]\n}\n\n\n2.1 JSX\n\nJSXæ˜¯JSçš„è¯­è¨€æ‰©å±•ï¼Œå¯ä»¥å†™å‡ºå’ŒHTMLç±»ä¼¼çš„æ ‡ç­¾å¼ç»„ä»¶ï¼Œæµè§ˆå™¨æœ¬èº«ä¸æ”¯æŒJSXï¼Œéœ€è¦é…åˆç¼–è¯‘å™¨æŠŠJSXç¼–è¯‘ä¸ºhyperapp.hå¯ä»¥è°ƒç”¨çš„ä»£ç ã€‚\n\nä½†æ˜¯JSXå¹¶ä¸æ˜¯Hyperappæ‰€å¿…éœ€çš„ï¼Œå¯ä»¥ç›´æ¥ä½¿ç”¨hyperapp.hçš„apiæ¥ç›´æ¥ç¼–å†™ç»„ä»¶ï¼Œçœå»ç¼–è¯‘JSXçš„æ­¥éª¤ï¼š\n\n`Javascript\n\n// ç›´æ¥ç”¨ h æ¥ç¼–å†™\nconst view = (state, actions) =&gt;\n  h(&quot;div&quot;, {}, [\n    h(&quot;h1&quot;, {}, state.count),\n    h(&quot;button&quot;, { onclick: () =&gt; actions.down(1) }, &quot;-&quot;),\n    h(&quot;button&quot;, { onclick: () =&gt; actions.up(1) }, &quot;+&quot;)\n  ])\n`\n\n3. æ¶æ„\n\nHyperappç¼–å†™çš„åº”ç”¨ç”±ä¸‰éƒ¨åˆ†æ„æˆï¼šstateã€actionå’Œview\n\nåœ¨ç¨‹åºåˆå§‹åŒ–å®Œæˆåï¼Œæ•´ä¸ªappä¼šå¤„äºä¸€ä¸ªæŒç»­çš„å¾ªç¯æ‰§è¡Œé‡Œã€‚é€šè¿‡ç”¨æˆ·æˆ–è€…å¤–éƒ¨äº‹ä»¶äº§ç”Ÿçš„actionæ¥æ›´æ–°stateï¼Œç”¨virtual domæ¥å±•ç¤ºviewå±‚çš„æ”¹åŠ¨ã€‚å¯ä»¥æŠŠactionå½“ä½œä¸€ä¸ªé€šçŸ¥Hyperappæ›´æ–°çŠ¶æ€é‡ç»˜viewçš„ä¿¡å·ï¼Œå½“actionå¤„ç†å®Œåï¼Œç”¨æˆ·ä¼šçœ‹åˆ°æ–°çš„çŠ¶æ€(state)ã€‚\n\n3.1 State\n\nStateæ˜¯ä¸€ä¸ªæ‰å¹³å¯¹è±¡ï¼Œå­˜å‚¨appçš„æ‰€æœ‰åŠ¨æ€æ•°æ®ï¼Œç”¨æ¥æè¿°appçš„çŠ¶æ€ã€‚Stateåœ¨ç¨‹åºåˆ›å»ºåä¸èƒ½ç›´æ¥ä¿®æ”¹ï¼Œåªèƒ½é€šè¿‡Actionæ¥æ›´æ–°ã€‚\n\nJavascript\nconst state = {\n  count: 0\n}\n\nStateå¯ä»¥å…è®¸åµŒå¥—ï¼š\n\nJavascript\nconst state = {\n  top: {\n    count: 0\n  },\n  bottom: {\n    count: 0\n  }\n}\n\n\n3.2 Actions\n\næ”¹å˜Stateçš„å”¯ä¸€æ–¹å¼æ˜¯é€šè¿‡Actionã€‚Actionæ˜¯ä¸€ä¸ªä¸€å…ƒå‡½æ•°ï¼šæ¥æ”¶ä¸€ä¸ªå‚æ•°ï¼Œå‚æ•°å¯ä»¥æ˜¯ä»»ä½•ç±»å‹ï¼›actioné€šè¿‡è¿”å›éƒ¨åˆ†stateæ¥æ›´æ–°å½“å‰stateï¼Œæ–°çš„stateæ˜¯actionè¿”å›çš„éƒ¨åˆ†stateå’Œå½“å‰stateçš„ç»„åˆã€‚\n\nJavascript\nconst actions = {\n  setValue: value =&gt; ({ value })\n}\n\n\nActionè¿˜å¯ä»¥è¿”å›ä¸€ä¸ªå‡½æ•°ï¼Œå‡½æ•°æ¥æ”¶å½“å‰stateå’Œactionä¸ºå‚æ•°ï¼Œè¿”å›éƒ¨åˆ†state:\n\nJavascript\nconst actions = {\n  setValue: value =&gt; (state, actions) =&gt; ({value: state.count - count})\n}\n\n\n3.2.1 å¼‚æ­¥Action\n\nActionç”¨äºå¤„ç†è¾¹é™…æ•ˆåº”ï¼ˆæ¯”å¦‚ï¼šå†™æ•°æ®åˆ°æ•°æ®åº“ã€å‘é€ä¸€ä¸ªè¯·æ±‚åˆ°æœåŠ¡å™¨ï¼Œç­‰ç­‰ï¼‰å¹¶ä¸æ˜¯æ¯æ¬¡éƒ½éœ€è¦è¿”å›ä¸€ä¸ªå€¼ã€‚ä½ å¯ä»¥åœ¨ä¸€ä¸ªactioné‡Œæˆ–è€…å›è°ƒå‡½æ•°é‡Œè°ƒç”¨å¦å¤–ä¸€ä¸ªactionã€‚å½“Actionè¿”å›Promiseã€undefinedæˆ–è€…nullæ—¶ï¼Œä¸ä¼šè§¦å‘è§†å›¾é‡ç»˜æˆ–çŠ¶æ€æ›´æ–°ã€‚\n\nJavascript\nconst actions = {\n  upLater: value =&gt; (state, actions) =&gt; {\n    setTimeout(actions.up, 1000, value)\n  },\n  up: value =&gt; state =&gt; ({ count: state.count + value })\n}\n\n\nActionå¯ä»¥æ˜¯ä¸€ä¸ªasyncå¼‚æ­¥å‡½æ•°ã€‚å› ä¸ºasyncå‡½æ•°è¿”å›ä¸€ä¸ªPromiseè€Œä¸æ˜¯éƒ¨åˆ†stateï¼Œè¿™æ—¶å€™éœ€è¦è°ƒç”¨å¦å¤–ä¸€ä¸ªactionæ¥æ›´æ–°stateã€‚\n\nJavascript\nconst actions = {\n  upLater: () =&gt; async (state, actions) =&gt; {\n    await new Promise(done =&gt; setTimeout(done, 1000))\n    actions.up(10)\n  },\n  up: value =&gt; state =&gt; ({ count: state.count + value })\n}\n\n\n3.2.2 åµŒå¥—çš„Action\n\nActionå¯ä»¥åœ¨å‘½åç©ºé—´é‡ŒåµŒå¥—ã€‚æ›´æ–°æ·±åº¦åµŒå¥—çš„stateå°±åƒåœ¨åŒæ ·è·¯å¾„ä¸‹å£°æ˜ä¸€ä¸ªactionæ¥æ›´æ–°éƒ¨åˆ†stateä¸€æ ·ç®€å•ã€‚\n\n`Javascript\nconst state = {\n  counter: {\n    count: 0\n  }\n}\n\nconst actions = {\n  counter: {\n    down: value =&gt; state =&gt; ({ count: state.count - value }),\n    up: value =&gt; state =&gt; ({ count: state.count + value })\n  }\n}\n`\n\n3.2.3 æ“ä½œæ€§\n\nappå‡½æ•°è¿”å›ä¸€ä¸ªåŒ…å«actionçš„å¯¹è±¡ï¼Œå¯ä»¥ç”¨æ¥æ›´æ–°stateã€‚æš´éœ²è¿™ä¸ªå¯¹è±¡åˆ°å¤–éƒ¨å¯ä»¥æ–¹ä¾¿çš„å’Œå…¶ä»–ç¨‹åºæˆ–æ¡†æ¶äº¤äº’ã€è®¢é˜…å…¨å±€äº‹ä»¶ã€ç›‘å¬é¼ æ ‡æˆ–é”®ç›˜è¾“å…¥ï¼Œç­‰ç­‰ã€‚\n\n`Javascript\nconst main = app(state, actions, view, document.body)\n\nsetInterval(main.up, 250, 1)\nsetInterval(main.down, 500, 1)\n`\n\n4. View\n\nå½“stateæ”¹å˜æ—¶ï¼Œviewå‡½æ•°è¢«æ‰§è¡Œï¼›viewå‡½æ•°è¿”å›ä¸€ä¸ªjså¯¹è±¡ï¼Œè¢«ç§°ä½œvirtual domï¼ŒHyperappæ ¹æ®virtual domæ¥æ›´æ–°å®é™…çš„DOMèŠ‚ç‚¹ã€‚\n\n`Javascript\nimport { h } from &quot;hyperapp&quot;\n\nexport const view = (state, actions) =&gt;\n  h(&quot;div&quot;, {}, [\n    h(&quot;h1&quot;, {}, state.count),\n    h(&quot;button&quot;, { onclick: () =&gt; actions.down(1) }, &quot;-&quot;),\n    h(&quot;button&quot;, { onclick: () =&gt; actions.up(1) }, &quot;+&quot;)\n  ])\n`\n\n4.1 Virtual DOM\n\nVirtual DOMä½¿ç”¨ä¸€ä¸ªæ ‘ç»“æ„çš„jså¯¹è±¡æ¥æè¿°çœŸå®DOMèŠ‚ç‚¹ï¼Œå…·ä½“å½¢å¼å¦‚ä¸‹ï¼š\n\nJavascript\n{\n  nodeName: &quot;div&quot;,\n  attributes: {},\n  children: [\n    {\n      nodeName: &quot;h1&quot;,\n      attributes: {},\n      children: [0]\n    },\n    {\n      nodeName: &quot;button&quot;,\n      attributes: { ... },\n      children: [&quot;-&quot;]\n    },\n    {\n      nodeName:   &quot;button&quot;,\n      attributes: { ... },\n      children: [&quot;+&quot;]\n    }\n  ]\n}\n\n\nä»¥ä¸Šä¾¿æ˜¯Hyperappçš„æ¦‚è¦ï¼Œåœ¨é¡¹ç›®ä½¿ç”¨ä¸­ï¼Œç”±äºhyperappä»£ç çŸ­å°ç²¾ç‚¼ï¼Œæ›´æ˜“äºè°ƒè¯•å’Œæ‰©å±•ï¼Œæ¨èæ„Ÿå…´è¶£çš„åŒå­¦è¯•ç”¨ã€‚","readingtime":11,"url":"/cates/frontend/post/2018-04-08/hyperapp","dirs":["js"],"relatives":[{"url":"/cates/frontend/post/2018-04-03/Here_are_examples_of_everything_new_in_ECMAScript_2016_2017_and_2018","title":"ES2016, 2017å’Œ2018åˆ°åº•æœ‰å“ªäº›æ–°ä¸œè¥¿ï¼Ÿ"},{"url":"/cates/frontend/post/2018-03-10/JavaScript_Modules_Worth_Using","title":"é‚£äº›å€¼å¾—ä¸€ç”¨çš„JSåº“"}]}],"tag":"Javascript"}}#39;]å’Œä¹‹åè¢«æ›¿æ¢ä¸ºå€¼çš„å˜é‡[&#39;å¼ ä¸‰&#39;]ï¼Œæœ€åé€šè¿‡å‡½æ•°è¿”å›ä»»ä½•ä½ æƒ³è¦çš„ç»“æœï¼Œè¿™ä¸ªå‡½æ•°è¢«ç§°ä½œTaggedå‡½æ•°ï¼Œä¸‹é¢Taggedå‡½æ•°greetæ¥æ‰©å±•ä¸Šä¾‹ä¸­çš„greetingsï¼š\n\nJavascript\nconst userName = &#39;å¼ ä¸‰&#39;\nconst greetings = hello ${userName}!`\n\nconsole.log(greetings) // &quot;hello å¼ ä¸‰!æ—©ä¸Šå¥½!&quot;\n\n// hardCodedPartsArray: å­—ç¬¦ä¸²å†™æ­»çš„å„éƒ¨åˆ†,  [ &quot;hello &quot;, &quot;!&quot; ]\n// replacementPartsArray: å­—ç¬¦ä¸²é‡ŒåµŒå…¥çš„å˜é‡, [ &quot;å¼ ä¸‰&quot; ]\nfunction greet(hardCodedPartsArray, ...replacementPartsArray) {\n  let str = &#39;&#39;\n  hardCodedPartsArray.forEach((part, i) =&gt; {\n    if (i &lt; replacementPartsArray.length) {\n      str += ${part}${replacementPartsArray[i] || &#39;&#39;}\n    } else {\n      str += ${part} ${timeGreet()} // åœ¨ç»“å°¾æ·»åŠ é—®å€™è¯­\n    }\n  })\n\n  return str\n}\n\nfunction timeGreet() {\n  const hr = new Date().getHours()\n  return hr &lt; 12\n    ? &#39;æ—©ä¸Šå¥½!&#39;\n    : hr &lt; 18 ? &#39;ä¸‹åˆå¥½!&#39; : &#39;æ™šä¸Šå¥½!&#39;\n}\n`\n\n3. æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„.åŒ¹é…æ‰€æœ‰å­—ç¬¦\n\nåœ¨ç›®å‰çš„æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œè™½ç„¶.ç‚¹è¢«è®¤ä¸ºä»£è¡¨æ‰€ä»¥å­—ç¬¦ï¼Œå®é™…ä¸Šå®ƒä¸ä¼šåŒ¹é…åƒ\\nã€\\rå’Œ\\fç­‰æ¢è¡Œç¬¦ã€‚\n\nä¾‹å¦‚:\n\nJavascript\n// ä¹‹å‰\n/first.second/.test(&#39;first\\nsecond&#39;); // false\n\n\nè¿™ä¸ªæ”¹è¿›ä½¿.ç‚¹æ“ä½œç¬¦åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ã€‚ä¸ºäº†ä¿è¯ä¸‹é¢è¿™æ®µä»£ç åœ¨ä»»ä½•JSç‰ˆæœ¬éƒ½æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬åœ¨ç»“å°¾åŠ ä¸Š/sä¿®é¥°ç¬¦\n\nJavascript\n//ECMAScript 2018\n/first.second/s.test(&#39;first\\nsecond&#39;); // true   æ³¨æ„: /s ğŸ‘ˆğŸ¼\n\n\n4. æ­£åˆ™è¡¨è¾¾å¼æ•è·Named Group\n\nè¿™ä¸ªæ”¹è¿›å¸¦æ¥äº†åœ¨å…¶ä»–è¯­è¨€ä¸­æ¯”å¦‚:Javaã€Pythonç­‰å·²ç»æ”¯æŒäº†çš„æœ‰ç”¨çš„æ­£åˆ™ç‰¹æ€§ã€‚è¿™ä¸ªç‰¹æ€§å…è®¸å¼€å‘è€…åœ¨æ­£åˆ™ä¸­ä¸ºä¸åŒçš„ç»„å†™æ ¼å¼ä¸º(&lt;?name&gt;)çš„åå­—æ ‡è¯†ç¬¦ï¼Œä¹‹åå¯ä»¥åœ¨åŒ¹é…çš„ç»“æœé‡Œé€šè¿‡åå­—æ ‡è¯†çš„ç»„æ¥è·å–å¯¹åº”çš„å€¼ã€‚\n\n4.1 åŸºç¡€ç¤ºä¾‹\n\n`Javascript\n// ä¹‹å‰\nconst re1 = /(\\d{4})-(\\d{2})-(\\d{2})/\nconst result1 = re1.exec(&#39;2015-01-08&#39;)\nconsole.log(result1)\n// è¾“å‡ºï¼š\n// [\n//   &quot;2015-01-08&quot;,\n//   &quot;2015&quot;,\n//   &quot;01&quot;,\n//   &quot;08&quot;,\n//   index: 0,\n//   input: &quot;2015-01-08&quot;,\n//   groups: undefined\n// ]\n\n// ç°åœ¨ (es2018)\nconst re2 = /(?&lt;year&gt;\\d{4})-(?&lt;month&gt;\\d{2})-(?&lt;day&gt;\\d{2})/u\nconst result2 = re2.exec(&#39;2015-01-08&#39;)\nconsole.log(result2)\n\n// è¾“å‡ºï¼š\n// [\n//   &quot;2015-01-08&quot;,\n//   &quot;2015&quot;,\n//   &quot;01&quot;,\n//   &quot;08&quot;,\n//   groups: {\n//     day: &quot;08&quot;,\n//     month: &quot;01&quot;,\n//     year: &quot;2015&quot;\n//   },\n//   index: 0,\n//   input: &quot;2015-01-08&quot;,\n// ]\n`\n\n4.2 åœ¨æ­£åˆ™è‡ªèº«ä½¿ç”¨å‘½åç»„\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ ¼å¼\\k&lt;group name&gt;åœ¨æ­£åˆ™è‡ªèº«æ¥å¼•ç”¨ä¹‹å‰çš„ç»„ã€‚ä¸‹é¢çš„ç”¨ä¾‹å­å±•ç¤ºï¼š\n\nJavascript\n// åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå‘½åç»„fruitï¼Œ\n// å®ƒå¯ä»¥åŒ¹é…appleæˆ–è€…orangeï¼Œæˆ‘ä»¬å¯ä»¥ç”¨\\k&lt;group name&gt;`(\\k&lt;fruit&gt;)\n// æ¥å¼•ç”¨ä¹‹å‰åŒ¹é…çš„è¿™ä¸ªç»„\n// æ‰€ä»¥ç­‰å·ä¸¤è¾¹çš„å€¼æ˜¯ç›¸ç­‰çš„\n\nconst sameWords = /(?&lt;fruit&gt;apple|orange)==\\k&lt;fruit&gt;/u\nsameWords.test(&#39;apple==apple&#39;) // true\nsameWords.test(&#39;orange==orange&#39;) // true\nsameWords.test(&#39;apple==orange&#39;) // false\n`\n\n4.3 åœ¨String.prototype.replaceé‡Œä½¿ç”¨å‘½åç»„\n\nå‘½åç»„ç‰¹æ€§å·²ç»è¢«æ·»åŠ åˆ°replaceæ–¹æ³•é‡Œï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°æ›¿æ¢å­—ç¬¦ä¸²äº†ã€‚\n\nä¾‹å¦‚ï¼š æ”¹å˜&quot;firstName, lastName&quot; ä¸º &quot;lastName, firstName&quot;:\n\nJavascript\nconst re = /(?&lt;firstName&gt;[A-Za-z]+) (?&lt;lastName&gt;[A-Za-z]+)/u\n&#39;John Lennon&#39;.replace(re, &#39;$&lt;lastName&gt;, $&lt;firstName&gt;&#39;) // Lennon John\n\n\n5. å¯¹è±¡çš„Rest properties\n\nRestæ“ä½œç¬¦...ï¼ˆä¸‰ä¸ªç‚¹ï¼‰å…è®¸æˆ‘ä»¬å–å‡ºå‰©ä½™çš„å¯¹è±¡å±æ€§\n\n5.1 ä½¿ç”¨Rest propertiesæ¥å–å‡ºä½ æƒ³è¦ä½¿ç”¨çš„å±æ€§\n\n`Javascript\nlet { name, age, ...remaining} = {\n  name: &#39;å¼ ä¸‰&#39;,\n  age: 20,\n  gender: &#39;ç”·&#39;,\n  address: &#39;xxxxx&#39;\n}\n\nname // &#39;å¼ ä¸‰&#39;\nage // 20\n`\n\n5.2 ä½ ç”šè‡³å¯ä»¥ç§»é™¤ä¸æƒ³è¦çš„å±æ€§\n\n`Javascript\n// å¦‚æœæˆ‘ä»¬æƒ³è¦åˆ é™¤addresså±æ€§ï¼Œ\n// ä½†æ˜¯æˆ‘ä»¬åˆä¸æƒ³è¦éå†å¯¹è±¡é‡æ–°åˆ›å»ºæ–°å¯¹è±¡\n// æˆ‘ä»¬åªè¦ç®€å•çš„è§£æ„å‡ºè¿™ä¸ªè¦ç§»é™¤çš„å±æ€§\n// å‰©ä¸‹çš„æ²¡æœ‰è§£æ„çš„å¯¹è±¡\n// å°±æ˜¯æˆ‘ä»¬æƒ³è¦ç•™ä¸‹çš„å¯¹è±¡\nlet {address, ...cleanObj} = {\n  name: &#39;john&#39;,\n  address: &#39;åŒ—äº¬å¸‚æµ·æ·€åŒº&#39;,\n  gender: &#39;ç”·&#39;\n}\n\ncleanObj // {name, gender}\n`\n\n6. å¯¹è±¡çš„Spread properties\n\nSpreadå±æ€§çœ‹èµ·æ¥å’ŒRestå±æ€§å¾ˆåƒï¼Œä¹Ÿæ˜¯ä¸‰ä¸ªç‚¹...æ“ä½œç¬¦ï¼Œä¸åŒçš„æ˜¯Spreadç”¨äºåˆ›å»ºæ–°å¯¹è±¡ã€‚\n\n`Javascript\nconst person = {name: &#39;john&#39;, age: 20}\nconst address = {city: &#39;Beijing&#39;, country: &#39;china&#39;}\n\nconst personWithAddress = {\n  ...person,\n  ...address\n}\n\npersonWithAddress // {name, age, city, country}\n`\n\n7. æ­£åˆ™Lookbehindæ–­è¨€\n\nè¿™ä¸ªæ­£åˆ™çš„æ”¹è¿›å…è®¸æˆ‘ä»¬ä¿è¯åœ¨ä¸€äº›å­—ç¬¦ä¸²ä¹‹å‰å­˜åœ¨æŸäº›å­—ç¬¦ä¸²ã€‚\n\nä½ å¯ä»¥ä½¿ç”¨ä¸€ç»„(?&lt;=...)(é—®å·ï¼Œå°äºç­‰äº)å¯»æ‰¾åé¢è‚¯å®šçš„æ–­è¨€ã€‚\n\næ›´è¿›ä¸€æ­¥ï¼Œä½ å¯ä»¥ä½¿ç”¨(?&lt;!...(é—®å·ï¼Œå°äºå·å¹å·)å¯»æ‰¾åé¢å¦å®šçš„æ–­è¨€ã€‚\n\nè‚¯å®šæ–­è¨€: æ¯”å¦‚æˆ‘ä»¬æƒ³è¦ç¡®å®šåœ¨ç¬¦å·#å‡ºç°åœ¨å•è¯winningå‰ï¼Œå³#winningï¼Œåªè¿”å›winning:\n\n`Javascript\n/(?&lt;=#)./.test(&#39;winning&#39;) // false\n/(?&lt;=#)./.test(&#39;#winning&#39;) // true\n\n// ä¹‹å‰\n&#39;#winning&#39;.match(/#.*/)[0] // &#39;#winning&#39;\n\n// es2018\n&#39;#winning&#39;.match(/(?&lt;=#).*/)[0] // &#39;winning&#39;, æ²¡æœ‰ #, #åªæ˜¯ä¸ºäº†éªŒè¯\n`\n\nå¦å®šæ–­è¨€ï¼šæ¯”å¦‚æˆ‘ä»¬æƒ³è¦å–å‡ºæ•°å­—å‰æ ‡å¿—æ˜¯#ï¼Œè€Œä¸æ˜¯$çš„æ•°å­—\n\nJavascript\n&#39;this is a test signal $1.23&#39;.match(/(?&lt;!\\$)\\d+\\.\\d+/) // null\n&#39;this is a test signal #2.43&#39;.match(/(?&lt;!\\$)\\d+\\.\\d+/)[0] // 2.43\n\n\n8. æ­£åˆ™Unicodeå±æ€§è½¬ä¹‰ç¬¦\n\nç”¨æ­£åˆ™åŒ¹é…æ‰€æœ‰çš„unicodeå­—ç¬¦å¾ˆå›°éš¾ã€‚åƒ\\wã€\\Wã€\\dç­‰åªèƒ½åŒ¹é…è‹±æ–‡å­—ç¬¦å’Œæ•°å­—ï¼Œä½†æ˜¯å‡ºç°åœ¨å…¶ä»–è¯­è¨€æ¯”å¦‚å¸Œè…Šè¯­é‡Œçš„æ•°å­—æˆ‘ä»¬è¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ\n\nUnicodeå±æ€§è½¬ä¹‰ç¬¦å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒä½¿Unicodeä¸ºæ¯ä¸ªå­—ç¬¦æ·»åŠ æè¿°æ€§çš„metadataã€‚","readingtime":34,"url":"/cates/frontend/post/2018-04-03/Here_are_examples_of_everything_new_in_ECMAScript_2016_2017_and_2018","dirs":["js"],"relatives":[{"url":"/cates/frontend/post/2018-03-10/JavaScript_Modules_Worth_Using","title":"é‚£äº›å€¼å¾—ä¸€ç”¨çš„JSåº“"},{"url":"/cates/frontend/post/2018-04-08/hyperapp","title":"1kbçš„JSæ¡†æ¶ - Hyperapp"}]}],"tag":"JavaScript"}}