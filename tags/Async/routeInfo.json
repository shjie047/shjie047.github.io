{"path":"tags/Async","templateID":4,"sharedPropsHashes":{"tags":"1C8cqm"},"localProps":{"posts":[{"title":"ES2016, 2017å’Œ2018åˆ°åº•æœ‰å“ªäº›æ–°ä¸œè¥¿ï¼Ÿ","author":"rajaraodv","cover":"http://p6jqy6mfr.bkt.clouddn.com/1_Z-9unq6Am3vekNOa5fD1xg.png","iso8601Date":"2018-04-03T08:00:00+08:00","basename":"Here_are_examples_of_everything_new_in_ECMAScript_2016_2017_and_2018","tags":["Js","JavaScript","å‰ç«¯","Frontend","ECMAScript","ECMAScript2016","ECMAScript2017","ECMAScript2018","Es6","Es7","Async","Await","Async/await"],"date":"2018-04-03","cate":"frontend","summary":"JSæ›´æ–°çš„é€Ÿåº¦éå¸¸å¿«ï¼Œé…å¥—çš„æ•™ç¨‹å´å¾ˆå°‘ï¼Œä»Šå¤©ä¸ºå¤§å®¶å¸¦æ¥18ä¸ªæ–°ç‰¹æ€§ï¼Œå¹¶è¯¦ç»†è®²è§£ä½¿ç”¨æ–¹æ³•ã€‚\n\nä¸‹é¢ä¾ç…§JSç‰ˆæœ¬çš„é¡ºåºå¼€å§‹ä»‹ç»:\n\n\n\n1. Array.prototype.includes\n\nincludesæ˜¯æ•°ç»„çš„å®ä¾‹æ–¹æ³•ï¼Œè¿™ä¸ªæ–¹æ³•çš„åŠŸèƒ½å¾ˆç®€å•ï¼šç”¨äºåˆ¤æ–­æŸä¸€é¡¹æ˜¯å¦å­˜åœ¨æ•°ç»„é‡Œï¼Œå’Œè¿™ä¸ªæ–¹æ³•åŠŸèƒ½ç±»ä¼¼çš„æœ‰indexOfï¼Œä¸¤è€…çš„åŒºåˆ«æ˜¯indexOfæ— æ³•åˆ¤æ–­NaNï¼Œ\nå¦‚å›¾ï¼š\n\n`Javascript\nconst arr = [1, 2, 3, 4, NaN];\n\n// es5\nif (arr.indexOf(3) &gt;= 0) {\n  console.log(true)\n}\n\n// es2016\nif (arr.includes(1)) {\n  console.log(true)\n}\n\n// æ³¨ï¼šindexOfä¸æ”¯æŒæ£€æŸ¥NaN\narr.indexOf(NaN) // -1\narr.includes(NaN) // true\n`\n\n2. æ±‚å¹‚è¿ç®—ç¬¦\n\næ±‚å¹‚è¿ç®—ç¬¦: **ï¼Œç”¨äºå–ä»£ä»¥å‰çš„æ±‚å¹‚æ–¹æ³•Math.powï¼Œ\n\nä½¿ç”¨æ–¹æ³•å¦‚ä¸‹ï¼š\n\n`Javascript\n// ä¹‹å‰\nMath.pow(3, 2) // 9\n\n// ç°åœ¨\n3**2 // 9\n`\n\n\n\n1. Object.values()\n\nObject.valuesæ–¹æ³•å’ŒObject.keysç±»ä¼¼ï¼Œè¿”å›ç±»å‹éƒ½æ˜¯æ•°ç»„ï¼Œè¿”å›çš„å€¼æ˜¯å¯¹è±¡çš„å€¼çš„é›†åˆï¼Œéœ€è¦æ³¨æ„ä¸€ç‚¹ï¼šä¸¤ä¸ªæ–¹æ³•éƒ½æ˜¯è¿”å›è‡ªèº«çš„å±æ€§ï¼Œä¸åŒ…æ‹¬ä»»ä½•åŸå‹é“¾ä¸Šçš„å±æ€§ï¼Œå¦‚å›¾ï¼š\n\n`Javascript\nconst cars = {BMW: 3, Tesla: 2, Toyota: 1}\n\n// es5\nconst vals = Object.keys(cars).map(key =&gt; cars[key]) \nconsole.log(vals) // [3, 2, 1]\n\n// es2016\nconst values = Object.values(cars)\nconsole.log(values) // [3, 2, 1]\n`\n\n2. Object.entries()\n\nObject.entries()æ–¹æ³•æœ‰ç‚¹åƒObject.keyså’ŒObject.valuesçš„ç»“åˆä½“ï¼Œè¿”å›ç±»å‹æ˜¯æ•°ç»„ï¼ŒåŒæ—¶æ•°ç»„çš„æ¯ä¸€é¡¹ä¹Ÿæ˜¯æ•°ç»„ -- åŒ…å«ä¸¤é¡¹ï¼škeyå’Œvalueï¼Œè¿™ä¸ªæ–¹æ³•çš„å¥½å¤„åœ¨äºä½ å¯ä»¥é€šè¿‡for oféå†ä¸€æ¬¡å–å‡ºkey/value å’Œ Objectå¯ä»¥ç›´æ¥è½¬ä¸ºMapï¼š\n\nä¾‹1ï¼Œéå†:\n\n`Javascript\nconst cars = { BMW: 3, Tesla: 2, Toyota: 1 }\n\n// es5çš„éå†æ–¹å¼\n// éœ€è¦æŠŠkeyå–å‡ºæ¥ï¼Œå†éå†\nObject.keys(cars).forEach(key =&gt; {\n  console.log(key: ${key}, value: ${cars[key]})\n})\n\n// es2017\n// Object.entries(carts):\n// [\n//   [&#39;BMW&#39;, 3],\n//   [&#39;Tesla&#39;, 2],\n//   [&#39;Toyota&#39;, 1]\n// ]\nfor (let [key, value] of Object.entries(cars)) {\n  console.log(key: ${key}, value: ${cars[key]})\n}\n` \n\nä¾‹2ï¼ŒæŠŠobjectç›´æ¥è½¬æ¢ä¸ºMap:\n\n`Javascript\nconst cars = { BMW: 3, Tesla: 2, Toyota: 1 }\n\n// es5\nconst map1 = new Map()\nObject.keys(cars).map(key =&gt; {\n  map1.set(key, cars[key])\n})\n\nconsole.log(map1) // Map { &#39;BMW&#39;: 3, &#39;Tesla&#39;: 2, &#39;Toyota&#39;: 1 }\n\n// es2016\nconst map2 = new Map(Object.entries(cars))\n\nconsole.log(map2) // Map { &#39;BMW&#39;: 3, &#39;Tesla&#39;: 2, &#39;Toyota&#39;: 1 }\n`\n\n3. String padding\n\nStringå¢åŠ äº†ä¸¤ä¸ªå®ä¾‹æ–¹æ³• -- padStartå’ŒpadEndï¼Œè¿™ä¸¤ä¸ªæ–¹æ³•å¯ä»¥åœ¨å­—ç¬¦ä¸²çš„é¦–/å°¾æ·»åŠ å…¶ä»–å­—ç¬¦ä¸²:\n\n`Javascript\n// &#39;someStr&#39;.padStart(å­—ç¬¦æ•°, [,æ·»åŠ çš„å­—ç¬¦])\n\n&#39;hello&#39;.padStart(&#39;10&#39;, &#39;a&#39;) // &#39;aaaaahello&#39;, æ·»åŠ äº†5ä¸ªå­—ç¬¦aåä¸€å…±10ä¸ªå­—ç¬¦\n&#39;hello&#39;.padEnd(&#39;10&#39;, &#39;b&#39;) // &#39;hellobbbbb&#39;\n&#39;hello&#39;.padStart(&#39;7&#39;) // &#39;  hello&#39;, åœ¨å¤´éƒ¨æ·»åŠ ä¸¤ä¸ªä¸ªç©ºæ ¼\n`\n\n3.1 padStartç¤ºä¾‹\n\n`Javascript\nconst formatted = [0, 1, 12, 123, 1234, 12345].map(num =&gt;\n  num.toString().padStart(10, &#39;0&#39;)\n)\n\nconsole.log(formatted)\n// è¾“å‡º:\n// [\n//   &#39;0000000000&#39;,\n//   &#39;0000000001&#39;,\n//   &#39;0000000012,&#39;\n//   &#39;0000000234,&#39;\n//   &#39;0000001234,&#39;\n//   &#39;0009012345&#39;\n// ]\n`\n\n3.2 padEndç¤ºä¾‹\n\n`Javascript\nconst cars = {\n  &#39;ğŸš™BMW&#39;: &#39;10&#39;,\n  &#39;ğŸš˜Tesla&#39;: &#39;5&#39;,\n  &#39;ğŸš–Lamborghini&#39;: &#39;0&#39;\n}\n\nObject.entries(cars).map(([name, count]) =&gt; {\n  console.log(${name.padEnd(20, &#39; -&#39;)} Count: ${count.padStart(3, &#39;0&#39;)})\n});\n\n//è¾“å‡º:\n// ğŸš™BMW - - - - - - -  Count: 010\n// ğŸš˜Tesla - - - - - -  Count: 005\n// ğŸš–Lamborghini - - -  Count: 000\n`\n\n4.Object.getOwnPropertyDescriptors\n\nè¿™ä¸ªæ–¹æ³•çš„ä½œç”¨æ˜¯è¡¥å……Object.assignçš„åŠŸèƒ½ï¼Œåœ¨æµ…æ‹·è´(shallow clone)å¯¹è±¡çš„åŸºç¡€ä¸Šï¼Œä¹Ÿä¼šå¤åˆ¶getterå’Œsetteræ–¹æ³•ï¼š\n\nä¸‹é¢çš„ä¾‹å­ç”¨Object.definePropertiesæ‹·è´åŸå¯¹è±¡Caråˆ°æ–°å¯¹è±¡ElectricCaræ¥å±•ç¤ºObject.assignå’ŒObject.getOwnPropertyDescriptorsçš„ä¸åŒã€‚\n\n`Javascript\nconst Car = {\n  name: &#39;BMW&#39;,\n  price: 100000,\n  set discount(x) {\n    this.d = x\n  }\n  get discount() {\n    return this.d\n  }\n}\n\nconsole.log(Object.getOwnPropertyDescriptor(Car, &#39;discount&#39;)\n// è¾“å‡º:\n// {\n//   get: [Function: get],\n//   set: [Function: set],\n//   enumerable: true,\n//   configurable: true\n// }\n\nconst ElectricCar = Object.assign({}, Car)\nconsole.log(Object.getOwnPropertyDescriptor(ElectricCar, &#39;discount&#39;))\n// è¾“å‡º:\n// {\n//   value: undefined,\n//   writable: true,\n//   enumerable: true,\n//   configurable: true\n// }\n\n// ä½¿ç”¨Object.assignåˆ›å»ºElectricCaråï¼Œå±æ€§getterå’Œsetterä¸¢å¤±äº†\n`\n\nä½¿ç”¨Object.getOwnPropertyDescriptorså:\n\n`Javascript\nconst Car = {\n  name: &#39;BMW&#39;,\n  price: 100000,\n  set discount(x) {\n    this.d = x\n  }\n  get discount() {\n    return this.d\n  }\n}\n\nconst ElectricCar2 = Object.defineProperties({}, Object.getOwnPropertyDescriptors(Car))\n// è¾“å‡º:\n// {\n//   get: [Function: get],  &lt;-----ğŸ‘ˆ\n//   set: [Function: set],  &lt;-----ğŸ‘ˆ\n//   enumerable: true,\n//   configurable: true \n// }\n`\n\n5. åœ¨å‡½æ•°æœ€åä¸€ä¸ªå‚æ•°çš„æœ«å°¾æ·»åŠ é€—å·\n\nè¿™æ˜¯ä¸ªå¾ˆå°çš„åŠŸèƒ½ç‚¹ï¼Œåœ¨å‡½æ•°å½¢å‚æœ€åä¸€ä¸ªå‚æ•°æœ«å°¾æ·»åŠ é€—å·ï¼Œå¯ä»¥é¿å…git blameæç¤ºä¸Šä¸€ä¸ªä½œè€…å¹¶ä¸å­˜åœ¨çš„æ”¹åŠ¨ï¼Œ\nä»£ç ç¤ºä¾‹ï¼š\n\nJavascript\n// å‡è®¾è¿™ä¸ªå‡½æ•°ç”± ç¨‹åºå‘˜_1 åˆ›å»º\n// è¿™ä¸ªå‡½æ•°æœ€åä¸€ä¸ªå‚æ•°age`åæ²¡æœ‰é€—å·\nfunction Person(\n  name,\n  age\n) {\n  this.name = name\n  this.age = age\n}\n\n// å¦‚æœ ç¨‹åºå‘˜_2 è¿™æ—¶æœ‰äº†ä»¥ä¸‹ä¿®æ”¹\nfunction Person(\n  name,\n  age, / é‚£ä¹ˆè¿™ä¸ª,é€—å·ä¹Ÿä¼šå¼•èµ·git blameè®¤ä¸º ç¨‹åºå‘˜_1 ä¿®æ”¹äº†è¿™ä¸€è¡Œ/\n  gender / æ·»åŠ äº†æ–°å‚æ•° /\n) { // æ–°æ·»åŠ \n  this.name = name\n  this.age = age\n  this.gender = gender // æ–°æ·»åŠ \n}\n\n// es2017å¯¹è¿™ä¸ªæ··æ·†çš„å¤„ç†åŠæ³•æ˜¯:\n// é€šè¿‡ ç¨‹åºå‘˜_1åœ¨ageæœ«å°¾æ·»åŠ ,é€—å·\n\n// æ›´æ–°å¦‚ä¸‹:\n\n// å‡è®¾è¿™ä¸ªå‡½æ•°ç”± ç¨‹åºå‘˜_1 åˆ›å»º\n// åœ¨æœ€åä¸€ä¸ªå‚æ•°ageåæ·»åŠ ,é€—å·\nfunction Person(\n  name,\n  age, / æ·»åŠ é€—å· /\n) {\n  this.name = name\n  this.age = age\n}\n`\n\n6. Async/Await\n\nè¿™ä¸ªç‰¹æ€§æ˜¯ç›®å‰ä¸ºæ­¢æœ€é‡è¦çš„ä¸€ä¸ªåŠŸèƒ½ï¼Œasyncå‡½æ•°å¯ä»¥è®©æˆ‘ä»¬é¿å…é¢‘ç¹è°ƒç”¨æ¶å¿ƒçš„callbackï¼Œä½¿ä»£ç ä¿æŒå¹²å‡€æ•´æ´ã€‚\n\nå½“ç¼–è¯‘å™¨è¿›å…¥asyncå‡½æ•°åï¼Œé‡åˆ°awaitå…³é”®å­—ä¼šæš‚åœæ‰§è¡Œï¼Œå¯ä»¥æŠŠawaitåè¡¨è¾¾å¼å½“ä½œä¸€ä¸ªpromiseï¼Œç›´åˆ°promiseè¢«resolveæˆ–rejectåï¼Œå‡½æ•°æ‰ä¼šæ¢å¤æ‰§è¡Œï¼Œ\n\nå…·ä½“çœ‹å¦‚ä¸‹ä»£ç ï¼š\n\nJavascript\n// es5çš„Promise`\nfunction getAmount(userId) {\n  getUser(userId)\n    .then(getBankBalance)\n    .then(amount =&gt; {\n      console.log(amount)\n    })\n}\n\n// es2017çš„async\nasync function getAmount2(userId) {\n  var user = await getUser(userId)\n  var amount = await getBankBalance()\n  console.log(amount)\n}\n\ngetAmount(&#39;1&#39;) // $1,000\ngetAmount2(&#39;1&#39;) // $1,000\n\nfunction getUser(userId) {\n  return new Promise(resolve =&gt; {\n    setTimeout(() =&gt; {\n      resolve(&#39;å¼ ä¸‰&#39;)\n    }, 1000)\n  })\n}\n\nfunction getBankBalance() {\n  return new Promise((resolve, reject) =&gt; {\n    setTimeout(() =&gt; {\n      if (user === &#39;å¼ ä¸‰&#39;) {\n        resolve(&#39;$1,000&#39;)\n      } else {\n        resolve(&#39;Unknown User&#39;)\n      }\n    }, 1000)\n  })\n}\n`\n\n6.1 Asyncå‡½æ•°æœ¬èº«è¿”å›ä¸€ä¸ªPromise\n\nå› ä¸ºasyncå‡½æ•°è¿”å›ä¸€ä¸ªpromiseï¼Œæ‰€ä»¥æƒ³è¦å¾—åˆ°asyncå‡½æ•°çš„è¿”å›å€¼éœ€è¦å¯¹è¿”å›çš„promiseè¿›è¡Œthenæ±‚å€¼ã€‚\n\nå…·ä½“çœ‹å¦‚ä¸‹ä»£ç ï¼š\n\n`Javascript\nasync function doubleAndAdd(a, b) {\n  a = await doubleAfter1Sec(a)\n  b = await doubleAfter1Sec(b)\n  return a + b\n}\n\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve =&gt; {\n    setTimeout(() =&gt; {\n      resolve(param * 2)\n    }, 1000)\n  })\n}\n`\n\n6.2 å¹¶è¡Œè°ƒç”¨async/await\n\nä¸Šä¸€ä¸ªå‡½æ•°doubleAndAddé‡Œä¾æ¬¡è°ƒç”¨äº†ä¸¤ä¸ªasyncå‡½æ•°ï¼Œä½†æ˜¯æ¯æ¬¡è°ƒç”¨éƒ½å¿…é¡»ç­‰å¾…1ç§’ï¼Œæ€§èƒ½å¾ˆå·®ï¼›å› ä¸ºå‚æ•°aå’Œå‚æ•°bä¹‹é—´å¹¶æ— è€¦åˆï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥ä½¿ç”¨Promise.allæ¥å¹¶è¡Œæ‰§è¡Œè¿™ä¸¤æ¬¡è°ƒç”¨:\n\nJavascript\nasync function doubleAndAdd(a, b) {\n  // ä½¿ç”¨Promise.all\n  // è¿™ä¸ªåœ°æ–¹ä½¿ç”¨æ•°ç»„è§£æ„`\n  // æ¥å¾—åˆ°ä¸¤æ¬¡è°ƒç”¨çš„ç»“æœ\n  const [a, b] = Promise.all([doubleAfter1Sec(a), doubleAfter1Sec(b)])\n  return a + b\n}\n\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve =&gt; {\n    setTimeout(() =&gt; {\n      resolve(param * 2)\n    }, 1000)\n  })\n}\n`\n\n6.3 async/awaitçš„é”™è¯¯å¤„ç†\n\nasync/awaitå¯¹é”™è¯¯å¤„ç†æœ‰å¾ˆå¤šæ–¹æ³•ï¼š\n\n1. åœ¨å‡½æ•°å†…ä½¿ç”¨try/catch\n\n`Javascript\nasync function doubleAndAdd(a, b) {\n  try {\n    a = await doubleAfter1Sec(a)\n    b = await doubleAfter1Sec(b)\n  } catch (e) {\n    return NaN\n  }\n  return a + b\n}\n\ndoubleAndAdd(&#39;one&#39;, 2).then(console.log) // NaN\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve =&gt; {\n    setTimeout(() =&gt; {\n      const val = param * 2\n      isNaN(val) ? reject(NaN) : resolve(val)\n    }, 1000)\n  })\n}\n`\n\n2. catch æ‰€æœ‰awaitè¡¨è¾¾å¼\n\nå› ä¸ºawaitè¡¨è¾¾å¼è¿”å›ä¸€ä¸ªpromiseï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥åœ¨awaitè¡¨è¾¾å¼åç›´æ¥æ‰§è¡Œcatchæ¥å¤„ç†é”™è¯¯\n\nJavascript\nasync function doubleAndAdd(a, b) {\n  a = await doubleAfter1Sec(a).catch(e =&gt; console.log(&#39;a&#39; is NaN)\n  b = await doubleAfter1Sec(b).catch(e =&gt; console.log(&#39;b&#39; is NaN`))\n\n  if (!a || !b) return NaN\n  return a + b\n}\n\ndoubleAndAdd(&#39;one&#39;, 2).then(console.log) // NaN, &quot;a&quot; is NaN\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve =&gt; {\n    setTimeout(() =&gt; {\n      const val = param * 2\n      isNaN(val) ? reject(NaN) : resolve(val)\n    }, 1000)\n  })\n}\n`\n\n3. catch æ•´ä¸ªasync-awaitå‡½æ•°\n\n`Javascript\nasync function doubleAndAdd(a, b) {\n  a = await doubleAfter1Sec(a)\n  b = await doubleAfter1Sec(b)\n  return a + b\n}\n\ndoubleAndAdd(&#39;one&#39;, 2)\n  .then(console.log)\n  .catch(console.log) // ä½¿ç”¨catch\n`\n\n\n\nECMAScriptç›®å‰åœ¨æœ€ç»ˆç¨¿é˜¶æ®µï¼Œå°†ä¼šåœ¨2018å¹´6æœˆæˆ–7æœˆæ­£å¼æ¨å‡ºã€‚ä¸‹é¢ä»‹ç»çš„æ‰€æœ‰ç‰¹æ€§å±äºstage-4ï¼Œå³å°†æˆä¸ºECMAScript 2018çš„ä¸€éƒ¨åˆ†ã€‚\n\n1. å…±äº«å†…å­˜å’ŒåŸå­æ€§\n\nè¿™æ˜¯JSçš„ä¸€ä¸ªé«˜çº§ç‰¹æ€§ï¼Œä¹Ÿæ˜¯JSå¼•æ“çš„æ ¸å¿ƒæ”¹è¿›ã€‚\n\nå…±äº«å†…å­˜çš„ä¸»è¦æ€æƒ³æ˜¯ï¼š æŠŠå¤šçº¿ç¨‹çš„ç‰¹æ€§å¸¦åˆ°JSï¼Œä¸ºäº†æé«˜ä»£ç çš„æ€§èƒ½å’Œé«˜å¹¶å‘ï¼Œç”±ä¹‹å‰çš„JSå¼•æ“ç®¡ç†å†…å­˜å˜ä¸ºè‡ªå·±ç®¡ç†å†…å­˜ã€‚ \n\nè¿™ä¸ªç‰¹æ€§ç”±ä¸€ä¸ªæ–°çš„å…¨å±€å¯¹è±¡SharedArrayBufferæ¥å®ç°ï¼Œè¿™ä¸ªå¯¹è±¡åœ¨ä¸€å—å…±äº«å†…å­˜åŒºå‚¨å­˜æ•°æ®ï¼ŒJSçš„ä¸»çº¿ç¨‹å’Œweb-workerçº¿ç¨‹å…±äº«è¿™éƒ¨åˆ†æ•°æ®ã€‚\n\nå½“å‰ï¼Œå¦‚æœæˆ‘ä»¬æƒ³è¦åœ¨JSä¸»çº¿ç¨‹å’Œweb-workerçº¿ç¨‹é—´å…±äº«æ•°æ®æ—¶ï¼Œå¿…é¡»ä½¿ç”¨postMessageåœ¨ä¸åŒçº¿ç¨‹é—´ä¼ é€’æ•°æ®ï¼Œæœ‰äº†SharedArrayBufferåï¼Œä¸åŒçš„çº¿ç¨‹å¯ä»¥ç›´æ¥è®¿é—®è¿™ä¸ªå¯¹è±¡æ¥å…±äº«æ•°æ®ã€‚\n\nä½†æ˜¯å¤šçº¿ç¨‹é—´çš„å…±äº«å†…å­˜ä¼šäº§ç”Ÿç«æ€æ¡ä»¶ï¼Œä¸ºäº†é¿å…è¿™ç§æƒ…å†µï¼ŒJSå¼•å…¥äº†åŸå­æ€§çš„å…¨å±€å¯¹è±¡ã€‚è¿™ä¸ªå¯¹è±¡æä¾›äº†å¤šç§æ–¹æ³•æ¥ä¿è¯æ­£åœ¨è¢«æŸä¸ªçº¿ç¨‹è®¿é—®çš„å†…å­˜è¢«é”ä½ï¼Œä»¥è¾¾åˆ°å†…å­˜å®‰å…¨ã€‚\n\n2. Tagged Template literal(å¸¦æ ‡ç­¾çš„æ¨¡æ¿å­—é¢é‡?) é™åˆ¶è¢«ç§»é™¤\n\né¦–å…ˆå¼„æ‡‚ä¸€ä¸ªæ¦‚å¿µï¼šä»€ä¹ˆsæ˜¯Tagged Template literal ?\n\ntagged template literalå‡ºç°åœ¨es2015ä»¥åï¼Œå…è®¸å¼€å‘è€…è‡ªå®šä¹‰å­—ç¬¦ä¸²è¢«åµŒå…¥çš„å€¼ã€‚ä¸¾ä¸€ä¸ªä¾‹å­ï¼Œæ ‡å‡†çš„å­—ç¬¦ä¸²åµŒå…¥ä¸€ä¸ªå€¼çš„æ–¹å¼æ˜¯ï¼š\n\nJavaScript\nconst userName = &#39;å¼ ä¸‰&#39;\nconst greetings = hello ${userName}!`\n\nconsole.log(greetings) // &quot;hello å¼ ä¸‰!&quot;\n`\n\nåœ¨tagged template literalé‡Œï¼Œä½ å¯ä»¥ç”¨ä¸€ä¸ªå‡½æ•°é€šè¿‡å‚æ•°æ¥æ¥æ”¶å­—ç¬¦ä¸²å†™æ­»çš„å„éƒ¨åˆ†ï¼Œæ¯”å¦‚: [&#39;hello&#39;, &#39;!&#39;]å’Œä¹‹åè¢«æ›¿æ¢ä¸ºå€¼çš„å˜é‡[&#39;å¼ ä¸‰&#39;]ï¼Œæœ€åé€šè¿‡å‡½æ•°è¿”å›ä»»ä½•ä½ æƒ³è¦çš„ç»“æœï¼Œè¿™ä¸ªå‡½æ•°è¢«ç§°ä½œTaggedå‡½æ•°ï¼Œä¸‹é¢Taggedå‡½æ•°greetæ¥æ‰©å±•ä¸Šä¾‹ä¸­çš„greetingsï¼š\n\nJavascript\nconst userName = &#39;å¼ ä¸‰&#39;\nconst greetings = hello ${userName}!`\n\nconsole.log(greetings) // &quot;hello å¼ ä¸‰!æ—©ä¸Šå¥½!&quot;\n\n// hardCodedPartsArray: å­—ç¬¦ä¸²å†™æ­»çš„å„éƒ¨åˆ†,  [ &quot;hello &quot;, &quot;!&quot; ]\n// replacementPartsArray: å­—ç¬¦ä¸²é‡ŒåµŒå…¥çš„å˜é‡, [ &quot;å¼ ä¸‰&quot; ]\nfunction greet(hardCodedPartsArray, ...replacementPartsArray) {\n  let str = &#39;&#39;\n  hardCodedPartsArray.forEach((part, i) =&gt; {\n    if (i &lt; replacementPartsArray.length) {\n      str += ${part}${replacementPartsArray[i] || &#39;&#39;}\n    } else {\n      str += ${part} ${timeGreet()} // åœ¨ç»“å°¾æ·»åŠ é—®å€™è¯­\n    }\n  })\n\n  return str\n}\n\nfunction timeGreet() {\n  const hr = new Date().getHours()\n  return hr &lt; 12\n    ? &#39;æ—©ä¸Šå¥½!&#39;\n    : hr &lt; 18 ? &#39;ä¸‹åˆå¥½!&#39; : &#39;æ™šä¸Šå¥½!&#39;\n}\n`\n\n3. æ­£åˆ™è¡¨è¾¾å¼ä¸­çš„.åŒ¹é…æ‰€æœ‰å­—ç¬¦\n\nåœ¨ç›®å‰çš„æ­£åˆ™è¡¨è¾¾å¼ä¸­ï¼Œè™½ç„¶.ç‚¹è¢«è®¤ä¸ºä»£è¡¨æ‰€ä»¥å­—ç¬¦ï¼Œå®é™…ä¸Šå®ƒä¸ä¼šåŒ¹é…åƒ\\nã€\\rå’Œ\\fç­‰æ¢è¡Œç¬¦ã€‚\n\nä¾‹å¦‚:\n\nJavascript\n// ä¹‹å‰\n/first.second/.test(&#39;first\\nsecond&#39;); // false\n\n\nè¿™ä¸ªæ”¹è¿›ä½¿.ç‚¹æ“ä½œç¬¦åŒ¹é…ä»»æ„å•ä¸ªå­—ç¬¦ã€‚ä¸ºäº†ä¿è¯ä¸‹é¢è¿™æ®µä»£ç åœ¨ä»»ä½•JSç‰ˆæœ¬éƒ½æ­£å¸¸å·¥ä½œï¼Œæˆ‘ä»¬åœ¨ç»“å°¾åŠ ä¸Š/sä¿®é¥°ç¬¦\n\nJavascript\n//ECMAScript 2018\n/first.second/s.test(&#39;first\\nsecond&#39;); // true   æ³¨æ„: /s ğŸ‘ˆğŸ¼\n\n\n4. æ­£åˆ™è¡¨è¾¾å¼æ•è·Named Group\n\nè¿™ä¸ªæ”¹è¿›å¸¦æ¥äº†åœ¨å…¶ä»–è¯­è¨€ä¸­æ¯”å¦‚:Javaã€Pythonç­‰å·²ç»æ”¯æŒäº†çš„æœ‰ç”¨çš„æ­£åˆ™ç‰¹æ€§ã€‚è¿™ä¸ªç‰¹æ€§å…è®¸å¼€å‘è€…åœ¨æ­£åˆ™ä¸­ä¸ºä¸åŒçš„ç»„å†™æ ¼å¼ä¸º(&lt;?name&gt;)çš„åå­—æ ‡è¯†ç¬¦ï¼Œä¹‹åå¯ä»¥åœ¨åŒ¹é…çš„ç»“æœé‡Œé€šè¿‡åå­—æ ‡è¯†çš„ç»„æ¥è·å–å¯¹åº”çš„å€¼ã€‚\n\n4.1 åŸºç¡€ç¤ºä¾‹\n\n`Javascript\n// ä¹‹å‰\nconst re1 = /(\\d{4})-(\\d{2})-(\\d{2})/\nconst result1 = re1.exec(&#39;2015-01-08&#39;)\nconsole.log(result1)\n// è¾“å‡ºï¼š\n// [\n//   &quot;2015-01-08&quot;,\n//   &quot;2015&quot;,\n//   &quot;01&quot;,\n//   &quot;08&quot;,\n//   index: 0,\n//   input: &quot;2015-01-08&quot;,\n//   groups: undefined\n// ]\n\n// ç°åœ¨ (es2018)\nconst re2 = /(?&lt;year&gt;\\d{4})-(?&lt;month&gt;\\d{2})-(?&lt;day&gt;\\d{2})/u\nconst result2 = re2.exec(&#39;2015-01-08&#39;)\nconsole.log(result2)\n\n// è¾“å‡ºï¼š\n// [\n//   &quot;2015-01-08&quot;,\n//   &quot;2015&quot;,\n//   &quot;01&quot;,\n//   &quot;08&quot;,\n//   groups: {\n//     day: &quot;08&quot;,\n//     month: &quot;01&quot;,\n//     year: &quot;2015&quot;\n//   },\n//   index: 0,\n//   input: &quot;2015-01-08&quot;,\n// ]\n`\n\n4.2 åœ¨æ­£åˆ™è‡ªèº«ä½¿ç”¨å‘½åç»„\n\næˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ ¼å¼\\k&lt;group name&gt;åœ¨æ­£åˆ™è‡ªèº«æ¥å¼•ç”¨ä¹‹å‰çš„ç»„ã€‚ä¸‹é¢çš„ç”¨ä¾‹å­å±•ç¤ºï¼š\n\nJavascript\n// åœ¨è¿™ä¸ªä¾‹å­é‡Œï¼Œæˆ‘ä»¬æœ‰ä¸€ä¸ªå‘½åç»„fruitï¼Œ\n// å®ƒå¯ä»¥åŒ¹é…appleæˆ–è€…orangeï¼Œæˆ‘ä»¬å¯ä»¥ç”¨\\k&lt;group name&gt;`(\\k&lt;fruit&gt;)\n// æ¥å¼•ç”¨ä¹‹å‰åŒ¹é…çš„è¿™ä¸ªç»„\n// æ‰€ä»¥ç­‰å·ä¸¤è¾¹çš„å€¼æ˜¯ç›¸ç­‰çš„\n\nconst sameWords = /(?&lt;fruit&gt;apple|orange)==\\k&lt;fruit&gt;/u\nsameWords.test(&#39;apple==apple&#39;) // true\nsameWords.test(&#39;orange==orange&#39;) // true\nsameWords.test(&#39;apple==orange&#39;) // false\n`\n\n4.3 åœ¨String.prototype.replaceé‡Œä½¿ç”¨å‘½åç»„\n\nå‘½åç»„ç‰¹æ€§å·²ç»è¢«æ·»åŠ åˆ°replaceæ–¹æ³•é‡Œï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥è½»æ¾åœ°æ›¿æ¢å­—ç¬¦ä¸²äº†ã€‚\n\nä¾‹å¦‚ï¼š æ”¹å˜&quot;firstName, lastName&quot; ä¸º &quot;lastName, firstName&quot;:\n\nJavascript\nconst re = /(?&lt;firstName&gt;[A-Za-z]+) (?&lt;lastName&gt;[A-Za-z]+)/u\n&#39;John Lennon&#39;.replace(re, &#39;$&lt;lastName&gt;, $&lt;firstName&gt;&#39;) // Lennon John\n\n\n5. å¯¹è±¡çš„Rest properties\n\nRestæ“ä½œç¬¦...ï¼ˆä¸‰ä¸ªç‚¹ï¼‰å…è®¸æˆ‘ä»¬å–å‡ºå‰©ä½™çš„å¯¹è±¡å±æ€§\n\n5.1 ä½¿ç”¨Rest propertiesæ¥å–å‡ºä½ æƒ³è¦ä½¿ç”¨çš„å±æ€§\n\n`Javascript\nlet { name, age, ...remaining} = {\n  name: &#39;å¼ ä¸‰&#39;,\n  age: 20,\n  gender: &#39;ç”·&#39;,\n  address: &#39;xxxxx&#39;\n}\n\nname // &#39;å¼ ä¸‰&#39;\nage // 20\n`\n\n5.2 ä½ ç”šè‡³å¯ä»¥ç§»é™¤ä¸æƒ³è¦çš„å±æ€§\n\n`Javascript\n// å¦‚æœæˆ‘ä»¬æƒ³è¦åˆ é™¤addresså±æ€§ï¼Œ\n// ä½†æ˜¯æˆ‘ä»¬åˆä¸æƒ³è¦éå†å¯¹è±¡é‡æ–°åˆ›å»ºæ–°å¯¹è±¡\n// æˆ‘ä»¬åªè¦ç®€å•çš„è§£æ„å‡ºè¿™ä¸ªè¦ç§»é™¤çš„å±æ€§\n// å‰©ä¸‹çš„æ²¡æœ‰è§£æ„çš„å¯¹è±¡\n// å°±æ˜¯æˆ‘ä»¬æƒ³è¦ç•™ä¸‹çš„å¯¹è±¡\nlet {address, ...cleanObj} = {\n  name: &#39;john&#39;,\n  address: &#39;åŒ—äº¬å¸‚æµ·æ·€åŒº&#39;,\n  gender: &#39;ç”·&#39;\n}\n\ncleanObj // {name, gender}\n`\n\n6. å¯¹è±¡çš„Spread properties\n\nSpreadå±æ€§çœ‹èµ·æ¥å’ŒRestå±æ€§å¾ˆåƒï¼Œä¹Ÿæ˜¯ä¸‰ä¸ªç‚¹...æ“ä½œç¬¦ï¼Œä¸åŒçš„æ˜¯Spreadç”¨äºåˆ›å»ºæ–°å¯¹è±¡ã€‚\n\n`Javascript\nconst person = {name: &#39;john&#39;, age: 20}\nconst address = {city: &#39;Beijing&#39;, country: &#39;china&#39;}\n\nconst personWithAddress = {\n  ...person,\n  ...address\n}\n\npersonWithAddress // {name, age, city, country}\n`\n\n7. æ­£åˆ™Lookbehindæ–­è¨€\n\nè¿™ä¸ªæ­£åˆ™çš„æ”¹è¿›å…è®¸æˆ‘ä»¬ä¿è¯åœ¨ä¸€äº›å­—ç¬¦ä¸²ä¹‹å‰å­˜åœ¨æŸäº›å­—ç¬¦ä¸²ã€‚\n\nä½ å¯ä»¥ä½¿ç”¨ä¸€ç»„(?&lt;=...)(é—®å·ï¼Œå°äºç­‰äº)å¯»æ‰¾åé¢è‚¯å®šçš„æ–­è¨€ã€‚\n\næ›´è¿›ä¸€æ­¥ï¼Œä½ å¯ä»¥ä½¿ç”¨(?&lt;!...(é—®å·ï¼Œå°äºå·å¹å·)å¯»æ‰¾åé¢å¦å®šçš„æ–­è¨€ã€‚\n\nè‚¯å®šæ–­è¨€: æ¯”å¦‚æˆ‘ä»¬æƒ³è¦ç¡®å®šåœ¨ç¬¦å·#å‡ºç°åœ¨å•è¯winningå‰ï¼Œå³#winningï¼Œåªè¿”å›winning:\n\n`Javascript\n/(?&lt;=#)./.test(&#39;winning&#39;) // false\n/(?&lt;=#)./.test(&#39;#winning&#39;) // true\n\n// ä¹‹å‰\n&#39;#winning&#39;.match(/#.*/)[0] // &#39;#winning&#39;\n\n// es2018\n&#39;#winning&#39;.match(/(?&lt;=#).*/)[0] // &#39;winning&#39;, æ²¡æœ‰ #, #åªæ˜¯ä¸ºäº†éªŒè¯\n`\n\nå¦å®šæ–­è¨€ï¼šæ¯”å¦‚æˆ‘ä»¬æƒ³è¦å–å‡ºæ•°å­—å‰æ ‡å¿—æ˜¯#ï¼Œè€Œä¸æ˜¯$çš„æ•°å­—\n\nJavascript\n&#39;this is a test signal $1.23&#39;.match(/(?&lt;!\\$)\\d+\\.\\d+/) // null\n&#39;this is a test signal #2.43&#39;.match(/(?&lt;!\\$)\\d+\\.\\d+/)[0] // 2.43\n\n\n8. æ­£åˆ™Unicodeå±æ€§è½¬ä¹‰ç¬¦\n\nç”¨æ­£åˆ™åŒ¹é…æ‰€æœ‰çš„unicodeå­—ç¬¦å¾ˆå›°éš¾ã€‚åƒ\\wã€\\Wã€\\dç­‰åªèƒ½åŒ¹é…è‹±æ–‡å­—ç¬¦å’Œæ•°å­—ï¼Œä½†æ˜¯å‡ºç°åœ¨å…¶ä»–è¯­è¨€æ¯”å¦‚å¸Œè…Šè¯­é‡Œçš„æ•°å­—æˆ‘ä»¬è¦æ€ä¹ˆå¤„ç†å‘¢ï¼Ÿ\n\nUnicodeå±æ€§è½¬ä¹‰ç¬¦å°±æ˜¯ä¸ºäº†è§£å†³è¿™ä¸ªé—®é¢˜ã€‚å®ƒä½¿Unicodeä¸ºæ¯ä¸ªå­—ç¬¦æ·»åŠ æè¿°æ€§çš„metadataã€‚","readingtime":34,"url":"/cates/frontend/post/2018-04-03/Here_are_examples_of_everything_new_in_ECMAScript_2016_2017_and_2018","dirs":["js"],"relatives":[{"url":"/cates/frontend/post/2018-03-10/JavaScript_Modules_Worth_Using","title":"é‚£äº›å€¼å¾—ä¸€ç”¨çš„JSåº“"},{"url":"/cates/frontend/post/2018-04-08/hyperapp","title":"1kbçš„JSæ¡†æ¶ - Hyperapp"}]}],"tag":"Async"}}