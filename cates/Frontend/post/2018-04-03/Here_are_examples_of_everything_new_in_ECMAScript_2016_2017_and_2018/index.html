<!DOCTYPE html><html lang="en" data-reactroot=""><head><title data-react-helmet="true">代码拾遗 - 更懂代码的媒体</title><meta data-react-helmet="true" name="title" content="代码拾遗 - 更懂代码的媒体"/><meta data-react-helmet="true" property="og:description" content="JS更新的速度非常快，配套的教程却很少，今天为大家带来18个新特性，并详细讲解使用方法。

下面依照JS版本的顺序开始介绍:



1. Array.prototype.includes

includes是数..."/><meta data-react-helmet="true" property="og:title" content="ES2016, 2017和2018到底有哪些新东西？"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="description" content="JS更新的速度非常快，配套的教程却很少，今天为大家带来18个新特性，并详细讲解使用方法。

下面依照JS版本的顺序开始介绍:



1. Array.prototype.includes

includes是数..."/><meta data-react-helmet="true" name="keywords" content="JS,Javascript,前端,Frontend,ECMAScript,ECMAScript2016,ECMAScript2017,ECMAScript2018,ES6,ES7,Async,Await,Async/Await"/><link rel="preload" as="script" href="https://shjie047.github.io/bootstrap.d5ea8805.js"/><link rel="preload" as="script" href="https://shjie047.github.io/templates/src/containers/Post.5710f9d8.js"/><link rel="preload" as="script" href="https://shjie047.github.io/main.1a92e948.js"/><link rel="preload" as="style" href="https://shjie047.github.io/styles.b4b608e0.css"/><link rel="stylesheet" href="https://shjie047.github.io/styles.b4b608e0.css"/><link data-react-helmet="true" rel="shortcut icon" type="image/x-icon" href="data:image/x-icon;base64,AAABAAEAEBAAAAEAIABoBAAAFgAAACgAAAAQAAAAIAAAAAEAIAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAABe3PX/Y972/2nf9v9v4Pb/cuD3/3bh9/954fj/e+L4/3ri+f954fj/duH3/3Lg9/9u4Pb/ad/1/2Td9v9d3PX/ZN32/2rf9v9w4Pf/duH3/3vi+P9/4/f/geT4/4Pk+P+C5Pj/guT4/3/j+P964vj/duH4/3Hg9/9r3/b/ZN32/2re9v9x4Pb/d+H4/37j+P+D5fb/h+b2/4vm9/+M5vf/jOb3/4vm9v+H5vb/g+X3/37j9/944ff/ceD2/2nf9/9v4Pb/deH3/37j9/+F5fj/i+X5/4/n+P+U5/n/luj5/5bo+f+V6Pj/j+b4/4vl+P+F5Pj/fuP4/3Xh9/9v4Pf/cuD2/3vi+P+C5Pj/iub4/5Hn+P+Y6fn/nOn6/5/p+/+f6vr/nen6/5no+v+S5vn/iuT4/4Pk+f954/f/ceD3/3fh9/+A4/j/iOX4/5Dm9v+Y6fr/nun5/6Pr+f+m6fj/p+v6/6Pp+P+e6fn/mOv6/5Hp+f+I5ff/gOP3/3bh9/954ff/g+T3/4rk9/+Y7fv/nOf2/6fu+/+x8Pn/ufj9/7Px+f+y9f3/qfP//5fh7/+N3+//jej5/4Lk9/964fj/eeH4/4Pj9v+Q7f//g8fW/2qWn/98qbP/aoWM/3OQl/9tiI7/cY+X/2OCif+Iv8n/ebXD/5Hv//+C4vb/eeH5/3rh+P+D4vX/k/L//3Ssuv9ihY7/d5+p/2eEiv92lJr/VGdp/2yMkf9ffIL/jcrW/3y9y/+P7P7/g+P3/3ri+P954fj/guT3/4rl+P+V6vr/f7zJ/5zc5f+w8f3/vvv//5LByv+p5/D/qvT//5/s+/+U6fv/i+X4/4Hk+P944fj/d+H3/4Dj+P+H5ff/j+b4/57z//+h7vv/o+r5/6bp+P+u9P7/puz6/57o+f+X6Pn/j+b4/4fl+P9/4/j/duH3/3Lg9/984vj/hOT4/4rm+P+Q5fb/l+j4/5zq+v+f6vr/nen4/5zp+f+Y6fn/kef4/4rm+P+D5ff/e+P3/3Pg9v9v3/b/duH3/37j+P+F5Pj/iuX6/4/m+f+U6Pj/luj5/5bp+f+T6Pj/kOb4/4vl+P+E5fj/feP4/3bh+P9v3/f/ad/2/3Dg9/934ff/fuP3/4Tk9/+I5ff/iuX4/4zl+f+N5fr/iuX4/4fl+P+E5Pj/f+P3/3fi9/9w4Pb/ad/2/2Pe9v9q3/b/cOD3/3Xh9/974vf/gOP3/4Lk+P+D5Pj/hOT4/4Lk+P9/4/j/e+L3/3bh9/9x4Pf/at/2/2Td9v9e3PX/Zd32/2re9v9u4Pb/cuD3/3fh9/954fj/euH4/3nh+P944fj/deH3/3Ph9v9v3/f/at72/2Td9v9d3Pb/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=="/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><style data-styled-components="enNFoQ fJTUOz jvzENE AjcTS ljxEMT gjHXKT hAbzAj fvIFII jUVlgh epPIZB hGUhQB">
/* sc-component-id: sc-bdVaJa */
.AjcTS{position:absolute;width:100%;} .AjcTS.fixed{position:fixed;background:#fff;top:-65px;z-index:800;border-bottom:1px solid #e1e1e1;} .AjcTS .logo{background-image:url(https://shjie047.github.io/static/logo.2b22c228.png);} .AjcTS.frontend,.AjcTS.frontend > *{background-color:#108db8!important;} .AjcTS.backend,.AjcTS.backend > *{background-color:rgba(0,100,0,1)!important;} .AjcTS.mobile,.AjcTS.mobile > *{background-color:rgb(219,112,147)!important;} .AjcTS.mobile nav a,.AjcTS.frontend nav a,.AjcTS.backend nav a{color:#fff;} .AjcTS.mobile .logo,.AjcTS.frontend .logo,.AjcTS.backend .logo{background-image:url(https://shjie047.github.io/static/codemore_white.2439fcc8.png);}
/* sc-component-id: sc-bwzfXH */
.gjHXKT{height:50px;max-width:1000px;margin:0 auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;background-color:#fff;} .gjHXKT.fixed{position:fixed;left:0;right:0;top:0;border-bottom:1px solid #f1f1f1;} .gjHXKT.showBorder{border-bottom:1px solid #e7e7e7;} @media only screen and (max-width:400px){.gjHXKT{padding:0 20px;}} .gjHXKT a{font-size:1.6rem;font-weight:normal;} .gjHXKT .icon-link{font-size:1.8rem;} .gjHXKT .icon-btn{-webkit-apparance:none;background-color:transparent;border:none;outline:none;color:#fff;cursor:pointer;}
/* sc-component-id: sc-htpNat */
@media only screen and (max-width:920px){.hAbzAj{display:none;}} .hAbzAj a{font-size:1.5rem;} .hAbzAj::before{content:'';height:2.1rem;width:1px;background-color:#00000038;display:inline-block;vertical-align:middle;}
/* sc-component-id: sc-bxivhb */
.fvIFII{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;} .fvIFII .search{cursor:pointer;margin-left:10px;} .fvIFII .search i{font-size:20px;}
/* sc-component-id: sc-keyframes-enNFoQ */
@-webkit-keyframes enNFoQ{0%{opacity:0;bottom:100%;}100%{opacity:1;bottom:0;}} @keyframes enNFoQ{0%{opacity:0;bottom:100%;}100%{opacity:1;bottom:0;}}
/* sc-component-id: sc-bZQynM */
.jUVlgh::after{content:'';display:table;} @media screen and (max-width:717px){.jUVlgh{padding:1rem;}}
/* sc-component-id: sc-keyframes-fJTUOz */
@-webkit-keyframes fJTUOz{0%{width:0px;padding:4px 0;}100%{width:160px;padding:4px 5px;}} @keyframes fJTUOz{0%{width:0px;padding:4px 0;}100%{width:160px;padding:4px 5px;}}
/* sc-component-id: sc-htoDjs */
.ljxEMT{position:absolute;top:0;left:50%;top:50%;color:#fff;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-repeat:no-repeat;background-size:100% auto;width:10rem;height:2.5rem;}
/* sc-component-id: sc-iwsKbI */
.epPIZB{position:relative;width:80%;max-width:740px;margin:4rem auto;padding-bottom:4rem;border-bottom:1px solid #ebf2f6;word-wrap:break-word;} .epPIZB::after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;box-shadow:0 0 0 5px #fff;} .epPIZB .read-more{-webkit-text-decoration:none;text-decoration:none;} .epPIZB .author-thumb{width:24px;height:24px;float:left;margin-right:9px;border-radius:100%;} .epPIZB .post-header{margin-bottom:3.4rem;} .epPIZB .post-title a{-webkit-text-decoration:none;text-decoration:none;} .epPIZB .post-meta{display:block;margin:1.75rem 0 0;font-family:Open Sans,sans-serif;font-size:1.5rem;line-height:2.2rem;color:#9eabb3;} .epPIZB .post-excerpt p{margin:0;font-size:.9em;line-height:1.7em;} .epPIZB .post-meta a{color:#9eabb3;-webkit-text-decoration:none;text-decoration:none;} .epPIZB .post-meta a:hover{color:#9eabb3;-webkit-text-decoration:underline;text-decoration:underline;} .epPIZB .post-date{display:inline-block;text-transform:uppercase;font-size:1.3rem;white-space:nowrap;} .epPIZB .post-date.has-author{margin-left:8px;padding-left:12px;border-left:1px solid #d5dbde;} @media only screen and (max-width:900px){.epPIZB{font-size:.95em;}} @media only screen and (max-width:500px){.epPIZB{width:auto;margin:2rem 16px;padding-bottom:2rem;line-height:1.65em;}.epPIZB .post-excerpt p{font-size:.85em;}.epPIZB .post-meta{font-size:1.3rem;margin-top:1rem;}.epPIZB pre{padding:0!important;}} .epPIZB pre{padding:1.2rem;} .epPIZB pre > code{overflow-x:auto;box-shadow:0 0 15px rgba(0,0,0,.35);padding:1.5rem;} .epPIZB blockquote{border-left:3px solid #061e35!important;margin-left:-23px!important;padding-bottom:2px!important;padding-left:20px!important;color:#24292e!important;} .epPIZB blockquote p{color:#24292e!important;} .epPIZB blockquote a{color:#061e35!important;}
/* sc-component-id: sc-gZMcBi */
.hGUhQB{position:fixed;top:50%;-webkit-transform:translate(0,-50%);-ms-transform:translate(0,-50%);transform:translate(0,-50%);right:3rem;} .hGUhQB h3{font-size:16px;font-weight:400!important;} .hGUhQB ul{font-weight:300!important;margin:0;padding:0;font-size:12px;padding-left:3rem;padding-top:.2rem;} .hGUhQB li{max-width:160px;}</style></head><body><div id="root"><div class="sc-EHOje jvzENE" data-reactroot=""><div class="sc-bdVaJa AjcTS"><div style="max-width:1000px;margin:0 auto;background:#fff;height:65px;position:relative"><div class="logo sc-htoDjs ljxEMT"></div></div><nav class="main-nav sc-bwzfXH gjHXKT"><a class="icon-link" aria-current="false" href="https://shjie047.github.io/"><i class="iconfont icon-home"></i></a><span class="sc-htpNat hAbzAj"><a aria-current="false" href="https://shjie047.github.io/cates/frontend">前端</a><a aria-current="false" href="https://shjie047.github.io/cates/backend">后端</a><a aria-current="false" href="https://shjie047.github.io/cates/mobile">移动端</a></span><div class="sc-bxivhb fvIFII"><a class="archive icon-link" aria-current="false" data-tip="归档" data-for="tip-one" href="https://shjie047.github.io/archives"><i class="iconfont icon-archive"></i></a><a class="search"><i class="iconfont icon-search"></i></a></div></nav></div><div style="height:115px"></div><div class="sc-bZQynM jUVlgh"><article class="sc-iwsKbI epPIZB"><header class="post-header"><h1 class="post-title">ES2016, 2017和2018到底有哪些新东西？</h1><section class="post-meta "><a>rajaraodv</a><time class="post-date has-author" dateTime="2018-04-03">2018/4/3</time><span>, </span><span><span><a aria-current="false" href="https://shjie047.github.io/tags/JS">JS</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/Javascript">Javascript</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/Frontend">前端</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/Frontend">Frontend</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/ECMAScript">ECMAScript</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/ECMAScript2016">ECMAScript2016</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/ECMAScript2017">ECMAScript2017</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/ECMAScript2018">ECMAScript2018</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/ES6">ES6</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/ES7">ES7</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/Async">Async</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/Await">Await</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/Async/Await">Async/Await</a></span></span></section><div style="max-width:1000px;max-height:667px;margin:3rem 0"><img style="width:100%;height:100%;left:0;top:0;margin:auto" class="cover" src="http://p6jqy6mfr.bkt.clouddn.com/1_Z-9unq6Am3vekNOa5fD1xg.png" alt=""/></div></header><section class="post-content markdown-body"><div><p>JS更新的速度非常快，配套的教程却很少，今天为大家带来18个新特性，并详细讲解使用方法。</p><p><strong>下面依照JS版本的顺序开始介绍:</strong></p><p><img style="display:block;margin:0 auto;margin-top:4rem;cursor:zoom-in" src="http://p6jqy6mfr.bkt.clouddn.com/1_K09EWrqTcTwN9_dlhlzy6Q.png"/></p><h2>1. Array.prototype.includes</h2><p><code>includes</code>是数组的实例方法，这个方法的功能很简单：用于判断某一项是否存在数组里，和这个方法功能类似的有<code>indexOf</code>，两者的区别是<code>indexOf</code>无法判断<code>NaN</code>，
如图：</p><pre><code class="language-Javascript">const arr = [1, 2, 3, 4, NaN];

// es5
if (arr.indexOf(3) &gt;= 0) {
  console.log(true)
}

// es2016
if (arr.includes(1)) {
  console.log(true)
}

// 注：indexOf不支持检查`NaN`
arr.indexOf(NaN) // -1
arr.includes(NaN) // true</code></pre><h2>2. 求幂运算符</h2><p><strong>求幂运算符</strong>: <code>**</code>，用于取代以前的求幂方法<code>Math.pow</code>，</p><p>使用方法如下：</p><pre><code class="language-Javascript">// 之前
Math.pow(3, 2) // 9

// 现在
3**2 // 9</code></pre><p><img style="display:block;margin:0 auto;margin-top:4rem;cursor:zoom-in" src="http://p6jqy6mfr.bkt.clouddn.com/1_fV_95TaY3ocgE8hlDhhv8w.png"/></p><h2>1. Object.values()</h2><p><code>Object.values</code>方法和<code>Object.keys</code>类似，返回类型都是数组，返回的值是对象的值的集合，需要注意一点：两个方法都是返回自身的属性，不包括任何原型链上的属性，如图：</p><pre><code class="language-Javascript">const cars = {BMW: 3, Tesla: 2, Toyota: 1}

// es5
const vals = Object.keys(cars).map(key =&gt; cars[key]) 
console.log(vals) // [3, 2, 1]

// es2016
const values = Object.values(cars)
console.log(values) // [3, 2, 1]</code></pre><h2>2. Object.entries()</h2><p><code>Object.entries()</code>方法有点像<code>Object.keys</code>和<code>Object.values</code>的结合体，返回类型是数组，同时数组的每一项也是数组 -- 包含两项：key和value，这个方法的好处在于你可以通过<code>for of</code>遍历一次取出key/value 和 <code>Object</code>可以直接转为<code>Map</code>：</p><p><strong>例1</strong>，遍历:</p><pre><code class="language-Javascript">const cars = { BMW: 3, Tesla: 2, Toyota: 1 }

// es5的遍历方式
// 需要把`key`取出来，再遍历
Object.keys(cars).forEach(key =&gt; {
  console.log(`key: ${key}, value: ${cars[key]}`)
})

// es2017
// Object.entries(carts):
// [
//   [&#x27;BMW&#x27;, 3],
//   [&#x27;Tesla&#x27;, 2],
//   [&#x27;Toyota&#x27;, 1]
// ]
for (let [key, value] of Object.entries(cars)) {
  console.log(`key: ${key}, value: ${cars[key]}`)
}</code></pre><p><strong>例2</strong>，把object直接转换为<code>Map</code>:</p><pre><code class="language-Javascript">const cars = { BMW: 3, Tesla: 2, Toyota: 1 }

// es5
const map1 = new Map()
Object.keys(cars).map(key =&gt; {
  map1.set(key, cars[key])
})

console.log(map1) // Map { &#x27;BMW&#x27;: 3, &#x27;Tesla&#x27;: 2, &#x27;Toyota&#x27;: 1 }

// es2016
const map2 = new Map(Object.entries(cars))

console.log(map2) // Map { &#x27;BMW&#x27;: 3, &#x27;Tesla&#x27;: 2, &#x27;Toyota&#x27;: 1 }</code></pre><h2>3. String padding</h2><p>String增加了两个实例方法 -- <code>padStart</code>和<code>padEnd</code>，这两个方法可以在字符串的首/尾添加其他字符串:</p><pre><code class="language-Javascript">// &#x27;someStr&#x27;.padStart(字符数, [,添加的字符])

&#x27;hello&#x27;.padStart(&#x27;10&#x27;, &#x27;a&#x27;) // &#x27;aaaaahello&#x27;, 添加了5个字符`a`后一共`10`个字符
&#x27;hello&#x27;.padEnd(&#x27;10&#x27;, &#x27;b&#x27;) // &#x27;hellobbbbb&#x27;
&#x27;hello&#x27;.padStart(&#x27;7&#x27;) // &#x27;  hello&#x27;, 在头部添加两个个空格</code></pre><h3>3.1 padStart示例</h3><pre><code class="language-Javascript">const formatted = [0, 1, 12, 123, 1234, 12345].map(num =&gt;
  num.toString().padStart(10, &#x27;0&#x27;)
)

console.log(formatted)
// 输出:
// [
//   &#x27;0000000000&#x27;,
//   &#x27;0000000001&#x27;,
//   &#x27;0000000012,&#x27;
//   &#x27;0000000234,&#x27;
//   &#x27;0000001234,&#x27;
//   &#x27;0009012345&#x27;
// ]</code></pre><h3>3.2 padEnd示例</h3><pre><code class="language-Javascript">const cars = {
  &#x27;🚙BMW&#x27;: &#x27;10&#x27;,
  &#x27;🚘Tesla&#x27;: &#x27;5&#x27;,
  &#x27;🚖Lamborghini&#x27;: &#x27;0&#x27;
}

Object.entries(cars).map(([name, count]) =&gt; {
  console.log(`${name.padEnd(20, &#x27; -&#x27;)} Count: ${count.padStart(3, &#x27;0&#x27;)}`)
});

//输出:
// 🚙BMW - - - - - - -  Count: 010
// 🚘Tesla - - - - - -  Count: 005
// 🚖Lamborghini - - -  Count: 000</code></pre><h2>4.Object.getOwnPropertyDescriptors</h2><p>这个方法的作用是补充<code>Object.assign</code>的功能，在浅拷贝(shallow clone)对象的基础上，也会复制<code>getter</code>和<code>setter</code>方法：</p><p>下面的例子用<code>Object.defineProperties</code>拷贝原对象<code>Car</code>到新对象<code>ElectricCar</code>来展示<code>Object.assign</code>和<code>Object.getOwnPropertyDescriptors</code>的不同。</p><pre><code class="language-Javascript">const Car = {
  name: &#x27;BMW&#x27;,
  price: 100000,
  set discount(x) {
    this.d = x
  }
  get discount() {
    return this.d
  }
}

console.log(Object.getOwnPropertyDescriptor(Car, &#x27;discount&#x27;)
// 输出:
// {
//   get: [Function: get],
//   set: [Function: set],
//   enumerable: true,
//   configurable: true
// }

const ElectricCar = Object.assign({}, Car)
console.log(Object.getOwnPropertyDescriptor(ElectricCar, &#x27;discount&#x27;))
// 输出:
// {
//   value: undefined,
//   writable: true,
//   enumerable: true,
//   configurable: true
// }

// 使用`Object.assign`创建`ElectricCar`后，属性`getter`和`setter`丢失了</code></pre><h3>使用<code>Object.getOwnPropertyDescriptors</code>后:</h3><pre><code class="language-Javascript">const Car = {
  name: &#x27;BMW&#x27;,
  price: 100000,
  set discount(x) {
    this.d = x
  }
  get discount() {
    return this.d
  }
}

const ElectricCar2 = Object.defineProperties({}, Object.getOwnPropertyDescriptors(Car))
// 输出:
// {
//   get: [Function: get],  &lt;-----👈
//   set: [Function: set],  &lt;-----👈
//   enumerable: true,
//   configurable: true 
// }</code></pre><h2>5. 在函数最后一个参数的末尾添加逗号</h2><p>这是个很小的功能点，在函数形参最后一个参数末尾添加逗号，可以避免<code>git blame</code>提示上一个作者并不存在的改动，
代码示例：</p><pre><code class="language-Javascript">// 假设这个函数由 `程序员_1` 创建
// 这个函数最后一个参数`age`后没有逗号
function Person(
  name,
  age
) {
  this.name = name
  this.age = age
}

// 如果 `程序员_2` 这时有了以下修改
function Person(
  name,
  age, /* 那么这个`,`逗号也会引起`git blame`认为 `程序员_1` 修改了这一行*/
  gender /* 添加了新参数 */
) { // 新添加
  this.name = name
  this.age = age
  this.gender = gender // 新添加
}

// es2017对这个混淆的处理办法是:
// 通过 `程序员_1`在`age`末尾添加`,`逗号

// 更新如下:

// 假设这个函数由 `程序员_1` 创建
// 在最后一个参数`age`后添加`,`逗号
function Person(
  name,
  age, /* 添加逗号 */
) {
  this.name = name
  this.age = age
}</code></pre><h2>6. Async/Await</h2><p>这个特性是目前为止最重要的一个功能，<code>async</code>函数可以让我们避免频繁调用<em>恶心的</em><code>callback</code>，使代码保持干净整洁。</p><p>当编译器进入<code>async</code>函数后，遇到<code>await</code>关键字会暂停执行，可以把<code>await</code>后表达式当作一个<code>promise</code>，直到promise被<code>resolve</code>或<code>reject</code>后，函数才会恢复执行，</p><p>具体看如下代码：</p><pre><code class="language-Javascript">// es5的`Promise`
function getAmount(userId) {
  getUser(userId)
    .then(getBankBalance)
    .then(amount =&gt; {
      console.log(amount)
    })
}

// es2017的`async`
async function getAmount2(userId) {
  var user = await getUser(userId)
  var amount = await getBankBalance()
  console.log(amount)
}

getAmount(&#x27;1&#x27;) // $1,000
getAmount2(&#x27;1&#x27;) // $1,000

function getUser(userId) {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      resolve(&#x27;张三&#x27;)
    }, 1000)
  })
}

function getBankBalance() {
  return new Promise((resolve, reject) =&gt; {
    setTimeout(() =&gt; {
      if (user === &#x27;张三&#x27;) {
        resolve(&#x27;$1,000&#x27;)
      } else {
        resolve(&#x27;Unknown User&#x27;)
      }
    }, 1000)
  })
}</code></pre><h3>6.1 Async函数本身返回一个Promise</h3><p>因为async函数返回一个promise，所以想要得到async函数的返回值需要对返回的promise进行<code>then</code>求值。</p><p>具体看如下代码：</p><pre><code class="language-Javascript">async function doubleAndAdd(a, b) {
  a = await doubleAfter1Sec(a)
  b = await doubleAfter1Sec(b)
  return a + b
}

doubleAndAdd(1, 2).then(console.log) // 5 

async function doubleAfter1Sec(param) {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      resolve(param * 2)
    }, 1000)
  })
}</code></pre><h3>6.2 并行调用async/await</h3><p>上一个函数<code>doubleAndAdd</code>里依次调用了两个<code>async</code>函数，但是每次调用都必须等待1秒，性能很差；因为参数<code>a</code>和参数<code>b</code>之间并无耦合，所以我们可以使用<code>Promise.all</code>来并行执行这两次调用:</p><pre><code class="language-Javascript">async function doubleAndAdd(a, b) {
  // 使用`Promise.all`
  // 这个地方使用数组`解构`
  // 来得到两次调用的结果
  const [a, b] = Promise.all([doubleAfter1Sec(a), doubleAfter1Sec(b)])
  return a + b
}

doubleAndAdd(1, 2).then(console.log) // 5 

async function doubleAfter1Sec(param) {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      resolve(param * 2)
    }, 1000)
  })
}</code></pre><h3>6.3 async/await的错误处理</h3><p><code>async/await</code>对错误处理有很多方法：</p><h4>1. 在函数内使用try/catch</h4><pre><code class="language-Javascript">async function doubleAndAdd(a, b) {
  try {
    a = await doubleAfter1Sec(a)
    b = await doubleAfter1Sec(b)
  } catch (e) {
    return NaN
  }
  return a + b
}

doubleAndAdd(&#x27;one&#x27;, 2).then(console.log) // NaN
doubleAndAdd(1, 2).then(console.log) // 5 

async function doubleAfter1Sec(param) {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      const val = param * 2
      isNaN(val) ? reject(NaN) : resolve(val)
    }, 1000)
  })
}</code></pre><h4>2. catch 所有<code>await</code>表达式</h4><p>因为<code>await</code>表达式返回一个<code>promise</code>，所以我们可以在<code>await</code>表达式后直接执行<code>catch</code>来处理错误</p><pre><code class="language-Javascript">async function doubleAndAdd(a, b) {
  a = await doubleAfter1Sec(a).catch(e =&gt; console.log(`&#x27;a&#x27; is NaN`)
  b = await doubleAfter1Sec(b).catch(e =&gt; console.log(`&#x27;b&#x27; is NaN`))

  if (!a || !b) return NaN
  return a + b
}

doubleAndAdd(&#x27;one&#x27;, 2).then(console.log) // NaN, &quot;a&quot; is NaN
doubleAndAdd(1, 2).then(console.log) // 5 

async function doubleAfter1Sec(param) {
  return new Promise(resolve =&gt; {
    setTimeout(() =&gt; {
      const val = param * 2
      isNaN(val) ? reject(NaN) : resolve(val)
    }, 1000)
  })
}</code></pre><h4>3. catch 整个async-await函数</h4><pre><code class="language-Javascript">async function doubleAndAdd(a, b) {
  a = await doubleAfter1Sec(a)
  b = await doubleAfter1Sec(b)
  return a + b
}

doubleAndAdd(&#x27;one&#x27;, 2)
  .then(console.log)
  .catch(console.log) // 使用catch</code></pre><p><img style="display:block;margin:0 auto;margin-top:4rem;cursor:zoom-in" src="http://p6jqy6mfr.bkt.clouddn.com/1_X755b572fEcI0vK0fRKWkw.png"/></p><blockquote><p>ECMAScript目前在最终稿阶段，将会在2018年6月或7月正式推出。下面介绍的所有特性属于<strong>stage-4</strong>，即将成为ECMAScript 2018的一部分。</p></blockquote><h2>1. 共享内存和原子性</h2><p>这是JS的一个高级特性，也是JS引擎的核心改进。</p><p><strong>共享内存的主要思想是： 把多线程的特性带到JS，为了提高代码的性能和高并发，由之前的JS引擎管理内存变为自己管理内存。</strong> </p><p>这个特性由一个新的全局对象<a href="https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer" target="_blank">SharedArrayBuffer</a>来实现，这个对象在一块<strong>共享内存区</strong>储存数据，JS的主线程和<code>web-worker</code>线程共享这部分数据。</p><p>当前，如果我们想要在JS主线程和web-worker线程间共享数据时，必须使用<code>postMessage</code>在不同线程间传递数据，有了<code>SharedArrayBuffer</code>后，不同的线程可以直接访问这个对象来共享数据。</p><p>但是多线程间的共享内存会产生竞态条件，为了避免这种情况，JS引入了<code>原子性</code>的全局对象。这个对象提供了多种方法来保证正在被某个线程访问的内存被锁住，以达到内存安全。</p><h2>2. Tagged Template literal(带标签的模板字面量?) 限制被移除</h2><p>首先弄懂一个概念：什么s是Tagged Template literal ?</p><p><code>tagged template literal</code>出现在es2015以后，允许开发者自定义字符串被嵌入的值。举一个例子，标准的字符串嵌入一个值的方式是：</p><pre><code class="language-JavaScript">const userName = &#x27;张三&#x27;
const greetings = `hello ${userName}!`

console.log(greetings) // &quot;hello 张三!&quot;</code></pre><p>在<code>tagged template literal</code>里，你可以用一个函数通过参数来接收字符串写死的各部分，比如: <a href="">&#x27;hello&#x27;, &#x27;!&#x27;</a>和之后被替换为值的变量<a href="">&#x27;张三&#x27;</a>，最后通过函数返回任何你想要的结果，这个函数被称作<code>Tagged</code>函数，下面<code>Tagged</code>函数<code>greet</code>来扩展上例中的greetings：</p><pre><code class="language-Javascript">const userName = &#x27;张三&#x27;
const greetings = `hello ${userName}!`

console.log(greetings) // &quot;hello 张三!早上好!&quot;

// hardCodedPartsArray: 字符串写死的各部分,  [ &quot;hello &quot;, &quot;!&quot; ]
// replacementPartsArray: 字符串里嵌入的变量, [ &quot;张三&quot; ]
function greet(hardCodedPartsArray, ...replacementPartsArray) {
  let str = &#x27;&#x27;
  hardCodedPartsArray.forEach((part, i) =&gt; {
    if (i &lt; replacementPartsArray.length) {
      str += `${part}${replacementPartsArray[i] || &#x27;&#x27;}`
    } else {
      str += `${part} ${timeGreet()}` // 在结尾添加问候语
    }
  })

  return str
}

function timeGreet() {
  const hr = new Date().getHours()
  return hr &lt; 12
    ? &#x27;早上好!&#x27;
    : hr &lt; 18 ? &#x27;下午好!&#x27; : &#x27;晚上好!&#x27;
}</code></pre><h2>3. 正则表达式中的<code>.</code>匹配所有字符</h2><p>在目前的正则表达式中，虽然<code>.</code>点被认为代表所以字符，实际上它不会匹配像<code>\n</code>、<code>\r</code>和<code>\f</code>等换行符。</p><p>例如:</p><pre><code class="language-Javascript">// 之前
/first.second/.test(&#x27;first\nsecond&#x27;); // false</code></pre><p>这个改进使<code>.</code>点操作符匹配任意单个字符。为了保证下面这段代码在任何JS版本都正常工作，我们在结尾加上<code>/s</code>修饰符</p><pre><code class="language-Javascript">//ECMAScript 2018
/first.second/s.test(&#x27;first\nsecond&#x27;); // true   注意: /s 👈🏼</code></pre><h2>4. 正则表达式捕获Named Group</h2><p>这个改进带来了在其他语言中比如:Java、Python等已经支持了的有用的正则特性。这个特性允许开发者在正则中为不同的组写格式为<code>(&lt;?name&gt;)</code>的名字标识符，之后可以在匹配的结果里通过名字标识的组来获取对应的值。</p><h3>4.1 基础示例</h3><pre><code class="language-Javascript">// 之前
const re1 = /(\d{4})-(\d{2})-(\d{2})/
const result1 = re1.exec(&#x27;2015-01-08&#x27;)
console.log(result1)
// 输出：
// [
//   &quot;2015-01-08&quot;,
//   &quot;2015&quot;,
//   &quot;01&quot;,
//   &quot;08&quot;,
//   index: 0,
//   input: &quot;2015-01-08&quot;,
//   groups: undefined
// ]

// 现在 (es2018)
const re2 = /(?&lt;year&gt;\d{4})-(?&lt;month&gt;\d{2})-(?&lt;day&gt;\d{2})/u
const result2 = re2.exec(&#x27;2015-01-08&#x27;)
console.log(result2)

// 输出：
// [
//   &quot;2015-01-08&quot;,
//   &quot;2015&quot;,
//   &quot;01&quot;,
//   &quot;08&quot;,
//   groups: {
//     day: &quot;08&quot;,
//     month: &quot;01&quot;,
//     year: &quot;2015&quot;
//   },
//   index: 0,
//   input: &quot;2015-01-08&quot;,
// ]</code></pre><h3>4.2 在正则自身使用命名组</h3><p>我们可以使用格式<code>\k&lt;group name&gt;</code>在正则自身来引用之前的组。下面的用例子展示：</p><pre><code class="language-Javascript">// 在这个例子里，我们有一个命名组`fruit`，
// 它可以匹配`apple`或者`orange`，我们可以用`\k&lt;group name&gt;`(\k&lt;fruit&gt;)
// 来引用之前匹配的这个组
// 所以等号两边的值是相等的

const sameWords = /(?&lt;fruit&gt;apple|orange)==\k&lt;fruit&gt;/u
sameWords.test(&#x27;apple==apple&#x27;) // true
sameWords.test(&#x27;orange==orange&#x27;) // true
sameWords.test(&#x27;apple==orange&#x27;) // false</code></pre><h3>4.3 在String.prototype.replace里使用命名组</h3><p>命名组特性已经被添加到<code>replace</code>方法里，所以我们可以轻松地替换字符串了。</p><p>例如： 改变&quot;firstName, lastName&quot; 为 &quot;lastName, firstName&quot;:</p><pre><code class="language-Javascript">const re = /(?&lt;firstName&gt;[A-Za-z]+) (?&lt;lastName&gt;[A-Za-z]+)/u
&#x27;John Lennon&#x27;.replace(re, &#x27;$&lt;lastName&gt;, $&lt;firstName&gt;&#x27;) // Lennon John</code></pre><h2>5. 对象的Rest properties</h2><p>Rest操作符<code>...</code>（三个点）允许我们取出剩余的对象属性</p><h3>5.1 使用Rest properties来取出你想要使用的属性</h3><pre><code class="language-Javascript">let { name, age, ...remaining} = {
  name: &#x27;张三&#x27;,
  age: 20,
  gender: &#x27;男&#x27;,
  address: &#x27;xxxxx&#x27;
}

name // &#x27;张三&#x27;
age // 20</code></pre><h3>5.2 你甚至可以移除不想要的属性</h3><pre><code class="language-Javascript">// 如果我们想要删除address属性，
// 但是我们又不想要遍历对象重新创建新对象
// 我们只要简单的解构出这个要移除的属性
// 剩下的没有解构的对象
// 就是我们想要留下的对象
let {address, ...cleanObj} = {
  name: &#x27;john&#x27;,
  address: &#x27;北京市海淀区&#x27;,
  gender: &#x27;男&#x27;
}

cleanObj // {name, gender}</code></pre><h2>6. 对象的Spread properties</h2><p>Spread属性看起来和Rest属性很像，也是三个点<code>...</code>操作符，不同的是Spread用于创建新对象。</p><pre><code class="language-Javascript">const person = {name: &#x27;john&#x27;, age: 20}
const address = {city: &#x27;Beijing&#x27;, country: &#x27;china&#x27;}

const personWithAddress = {
  ...person,
  ...address
}

personWithAddress // {name, age, city, country}</code></pre><h2>7. 正则Lookbehind断言</h2><p>这个正则的改进允许我们保证在一些字符串之前存在某些字符串。</p><p>你可以使用一组<code>(?&lt;=...)</code>(问号，小于等于)寻找后面肯定的断言。</p><p>更进一步，你可以使用<code>(?&lt;!...</code>(问号，小于号叹号)寻找后面否定的断言。</p><p>肯定断言: 比如我们想要确定在符号<code>#</code>出现在单词<code>winning</code>前，即<code>#winning</code>，只返回<code>winning</code>:</p><pre><code class="language-Javascript">/(?&lt;=#).*/.test(&#x27;winning&#x27;) // false
/(?&lt;=#).*/.test(&#x27;#winning&#x27;) // true

// 之前
&#x27;#winning&#x27;.match(/#.*/)[0] // &#x27;#winning&#x27;

// es2018
&#x27;#winning&#x27;.match(/(?&lt;=#).*/)[0] // &#x27;winning&#x27;, 没有 #, #只是为了验证</code></pre><p>否定断言：比如我们想要取出数字前标志是#，而不是$的数字</p><pre><code class="language-Javascript">&#x27;this is a test signal $1.23&#x27;.match(/(?&lt;!\$)\d+\.\d+/) // null
&#x27;this is a test signal #2.43&#x27;.match(/(?&lt;!\$)\d+\.\d+/)[0] // 2.43</code></pre><h2>8. 正则Unicode属性转义符</h2><p>用正则匹配所有的unicode字符很困难。像<code>\w</code>、<code>\W</code>、<code>\d</code>等只能匹配英文字符和数字，但是出现在其他语言比如希腊语里的数字我们要怎么处理呢？</p><p>Unicode属性转义符就是为了解决这个问题。它使Unicode为每个字符添加描述性的<code>metadata</code>。</p></div></section><section class="post-footer"></section><div class="sc-gZMcBi hGUhQB"><h3>相关阅读:</h3><ul><li><a aria-current="false" href="https://shjie047.github.io/cates/Frontend/post/2018-03-10/JavaScript_Modules_Worth_Using">那些值得一用的JS库</a></li><li><a aria-current="false" href="https://shjie047.github.io/cates/Frontend/post/2018-04-08/hyperapp">1kb的JS框架 - Hyperapp</a></li></ul></div></article></div><div class="__react_component_tooltip place-top type-dark " data-id="tooltip"></div><div class="__react_component_tooltip place-top type-dark " data-id="tooltip"></div></div></div><script type="text/javascript">window.__CSS_CHUNKS__ = {"main":"https://shjie047.github.io/styles.b4b608e0.css"}</script><script type="text/javascript">
                window.__routeInfo = {'path':'cates/Frontend/post/2018-04-03/Here_are_examples_of_everything_new_in_ECMAScript_2016_2017_and_2018','templateID':1,'sharedPropsHashes':{'tags':'Zpc8p0'},'localProps':null,'allProps':{'post':{'title':'ES2016, 2017\u548C2018\u5230\u5E95\u6709\u54EA\u4E9B\u65B0\u4E1C\u897F\uFF1F','author':'rajaraodv','cover':'http://p6jqy6mfr.bkt.clouddn.com/1_Z-9unq6Am3vekNOa5fD1xg.png','iso8601Date':'2018-04-03T08:00:00+08:00','basename':'Here_are_examples_of_everything_new_in_ECMAScript_2016_2017_and_2018','tags':['JS','Javascript','\u524D\u7AEF','Frontend','ECMAScript','ECMAScript2016','ECMAScript2017','ECMAScript2018','ES6','ES7','Async','Await','Async/Await'],'date':'2018-04-03','cate':'Frontend','summary':'JS\u66F4\u65B0\u7684\u901F\u5EA6\u975E\u5E38\u5FEB\uFF0C\u914D\u5957\u7684\u6559\u7A0B\u5374\u5F88\u5C11\uFF0C\u4ECA\u5929\u4E3A\u5927\u5BB6\u5E26\u676518\u4E2A\u65B0\u7279\u6027\uFF0C\u5E76\u8BE6\u7EC6\u8BB2\u89E3\u4F7F\u7528\u65B9\u6CD5\u3002\n\n\u4E0B\u9762\u4F9D\u7167JS\u7248\u672C\u7684\u987A\u5E8F\u5F00\u59CB\u4ECB\u7ECD:\n\n\n\n1. Array.prototype.includes\n\nincludes\u662F\u6570\u7EC4\u7684\u5B9E\u4F8B\u65B9\u6CD5\uFF0C\u8FD9\u4E2A\u65B9\u6CD5\u7684\u529F\u80FD\u5F88\u7B80\u5355\uFF1A\u7528\u4E8E\u5224\u65AD\u67D0\u4E00\u9879\u662F\u5426\u5B58\u5728\u6570\u7EC4\u91CC\uFF0C\u548C\u8FD9\u4E2A\u65B9\u6CD5\u529F\u80FD\u7C7B\u4F3C\u7684\u6709indexOf\uFF0C\u4E24\u8005\u7684\u533A\u522B\u662FindexOf\u65E0\u6CD5\u5224\u65ADNaN\uFF0C\n\u5982\u56FE\uFF1A\n\n`Javascript\nconst arr = [1, 2, 3, 4, NaN];\n\n// es5\nif (arr.indexOf(3) &gt;= 0) {\n  console.log(true)\n}\n\n// es2016\nif (arr.includes(1)) {\n  console.log(true)\n}\n\n// \u6CE8\uFF1AindexOf\u4E0D\u652F\u6301\u68C0\u67E5NaN\narr.indexOf(NaN) // -1\narr.includes(NaN) // true\n`\n\n2. \u6C42\u5E42\u8FD0\u7B97\u7B26\n\n\u6C42\u5E42\u8FD0\u7B97\u7B26: **\uFF0C\u7528\u4E8E\u53D6\u4EE3\u4EE5\u524D\u7684\u6C42\u5E42\u65B9\u6CD5Math.pow\uFF0C\n\n\u4F7F\u7528\u65B9\u6CD5\u5982\u4E0B\uFF1A\n\n`Javascript\n// \u4E4B\u524D\nMath.pow(3, 2) // 9\n\n// \u73B0\u5728\n3**2 // 9\n`\n\n\n\n1. Object.values()\n\nObject.values\u65B9\u6CD5\u548CObject.keys\u7C7B\u4F3C\uFF0C\u8FD4\u56DE\u7C7B\u578B\u90FD\u662F\u6570\u7EC4\uFF0C\u8FD4\u56DE\u7684\u503C\u662F\u5BF9\u8C61\u7684\u503C\u7684\u96C6\u5408\uFF0C\u9700\u8981\u6CE8\u610F\u4E00\u70B9\uFF1A\u4E24\u4E2A\u65B9\u6CD5\u90FD\u662F\u8FD4\u56DE\u81EA\u8EAB\u7684\u5C5E\u6027\uFF0C\u4E0D\u5305\u62EC\u4EFB\u4F55\u539F\u578B\u94FE\u4E0A\u7684\u5C5E\u6027\uFF0C\u5982\u56FE\uFF1A\n\n`Javascript\nconst cars = {BMW: 3, Tesla: 2, Toyota: 1}\n\n// es5\nconst vals = Object.keys(cars).map(key =&gt; cars[key]) \nconsole.log(vals) // [3, 2, 1]\n\n// es2016\nconst values = Object.values(cars)\nconsole.log(values) // [3, 2, 1]\n`\n\n2. Object.entries()\n\nObject.entries()\u65B9\u6CD5\u6709\u70B9\u50CFObject.keys\u548CObject.values\u7684\u7ED3\u5408\u4F53\uFF0C\u8FD4\u56DE\u7C7B\u578B\u662F\u6570\u7EC4\uFF0C\u540C\u65F6\u6570\u7EC4\u7684\u6BCF\u4E00\u9879\u4E5F\u662F\u6570\u7EC4 -- \u5305\u542B\u4E24\u9879\uFF1Akey\u548Cvalue\uFF0C\u8FD9\u4E2A\u65B9\u6CD5\u7684\u597D\u5904\u5728\u4E8E\u4F60\u53EF\u4EE5\u901A\u8FC7for of\u904D\u5386\u4E00\u6B21\u53D6\u51FAkey/value \u548C Object\u53EF\u4EE5\u76F4\u63A5\u8F6C\u4E3AMap\uFF1A\n\n\u4F8B1\uFF0C\u904D\u5386:\n\n`Javascript\nconst cars = { BMW: 3, Tesla: 2, Toyota: 1 }\n\n// es5\u7684\u904D\u5386\u65B9\u5F0F\n// \u9700\u8981\u628Akey\u53D6\u51FA\u6765\uFF0C\u518D\u904D\u5386\nObject.keys(cars).forEach(key =&gt; {\n  console.log(key: ${key}, value: ${cars[key]})\n})\n\n// es2017\n// Object.entries(carts):\n// [\n//   [&#39;BMW&#39;, 3],\n//   [&#39;Tesla&#39;, 2],\n//   [&#39;Toyota&#39;, 1]\n// ]\nfor (let [key, value] of Object.entries(cars)) {\n  console.log(key: ${key}, value: ${cars[key]})\n}\n` \n\n\u4F8B2\uFF0C\u628Aobject\u76F4\u63A5\u8F6C\u6362\u4E3AMap:\n\n`Javascript\nconst cars = { BMW: 3, Tesla: 2, Toyota: 1 }\n\n// es5\nconst map1 = new Map()\nObject.keys(cars).map(key =&gt; {\n  map1.set(key, cars[key])\n})\n\nconsole.log(map1) // Map { &#39;BMW&#39;: 3, &#39;Tesla&#39;: 2, &#39;Toyota&#39;: 1 }\n\n// es2016\nconst map2 = new Map(Object.entries(cars))\n\nconsole.log(map2) // Map { &#39;BMW&#39;: 3, &#39;Tesla&#39;: 2, &#39;Toyota&#39;: 1 }\n`\n\n3. String padding\n\nString\u589E\u52A0\u4E86\u4E24\u4E2A\u5B9E\u4F8B\u65B9\u6CD5 -- padStart\u548CpadEnd\uFF0C\u8FD9\u4E24\u4E2A\u65B9\u6CD5\u53EF\u4EE5\u5728\u5B57\u7B26\u4E32\u7684\u9996/\u5C3E\u6DFB\u52A0\u5176\u4ED6\u5B57\u7B26\u4E32:\n\n`Javascript\n// &#39;someStr&#39;.padStart(\u5B57\u7B26\u6570, [,\u6DFB\u52A0\u7684\u5B57\u7B26])\n\n&#39;hello&#39;.padStart(&#39;10&#39;, &#39;a&#39;) // &#39;aaaaahello&#39;, \u6DFB\u52A0\u4E865\u4E2A\u5B57\u7B26a\u540E\u4E00\u517110\u4E2A\u5B57\u7B26\n&#39;hello&#39;.padEnd(&#39;10&#39;, &#39;b&#39;) // &#39;hellobbbbb&#39;\n&#39;hello&#39;.padStart(&#39;7&#39;) // &#39;  hello&#39;, \u5728\u5934\u90E8\u6DFB\u52A0\u4E24\u4E2A\u4E2A\u7A7A\u683C\n`\n\n3.1 padStart\u793A\u4F8B\n\n`Javascript\nconst formatted = [0, 1, 12, 123, 1234, 12345].map(num =&gt;\n  num.toString().padStart(10, &#39;0&#39;)\n)\n\nconsole.log(formatted)\n// \u8F93\u51FA:\n// [\n//   &#39;0000000000&#39;,\n//   &#39;0000000001&#39;,\n//   &#39;0000000012,&#39;\n//   &#39;0000000234,&#39;\n//   &#39;0000001234,&#39;\n//   &#39;0009012345&#39;\n// ]\n`\n\n3.2 padEnd\u793A\u4F8B\n\n`Javascript\nconst cars = {\n  &#39;\uD83D\uDE99BMW&#39;: &#39;10&#39;,\n  &#39;\uD83D\uDE98Tesla&#39;: &#39;5&#39;,\n  &#39;\uD83D\uDE96Lamborghini&#39;: &#39;0&#39;\n}\n\nObject.entries(cars).map(([name, count]) =&gt; {\n  console.log(${name.padEnd(20, &#39; -&#39;)} Count: ${count.padStart(3, &#39;0&#39;)})\n});\n\n//\u8F93\u51FA:\n// \uD83D\uDE99BMW - - - - - - -  Count: 010\n// \uD83D\uDE98Tesla - - - - - -  Count: 005\n// \uD83D\uDE96Lamborghini - - -  Count: 000\n`\n\n4.Object.getOwnPropertyDescriptors\n\n\u8FD9\u4E2A\u65B9\u6CD5\u7684\u4F5C\u7528\u662F\u8865\u5145Object.assign\u7684\u529F\u80FD\uFF0C\u5728\u6D45\u62F7\u8D1D(shallow clone)\u5BF9\u8C61\u7684\u57FA\u7840\u4E0A\uFF0C\u4E5F\u4F1A\u590D\u5236getter\u548Csetter\u65B9\u6CD5\uFF1A\n\n\u4E0B\u9762\u7684\u4F8B\u5B50\u7528Object.defineProperties\u62F7\u8D1D\u539F\u5BF9\u8C61Car\u5230\u65B0\u5BF9\u8C61ElectricCar\u6765\u5C55\u793AObject.assign\u548CObject.getOwnPropertyDescriptors\u7684\u4E0D\u540C\u3002\n\n`Javascript\nconst Car = {\n  name: &#39;BMW&#39;,\n  price: 100000,\n  set discount(x) {\n    this.d = x\n  }\n  get discount() {\n    return this.d\n  }\n}\n\nconsole.log(Object.getOwnPropertyDescriptor(Car, &#39;discount&#39;)\n// \u8F93\u51FA:\n// {\n//   get: [Function: get],\n//   set: [Function: set],\n//   enumerable: true,\n//   configurable: true\n// }\n\nconst ElectricCar = Object.assign({}, Car)\nconsole.log(Object.getOwnPropertyDescriptor(ElectricCar, &#39;discount&#39;))\n// \u8F93\u51FA:\n// {\n//   value: undefined,\n//   writable: true,\n//   enumerable: true,\n//   configurable: true\n// }\n\n// \u4F7F\u7528Object.assign\u521B\u5EFAElectricCar\u540E\uFF0C\u5C5E\u6027getter\u548Csetter\u4E22\u5931\u4E86\n`\n\n\u4F7F\u7528Object.getOwnPropertyDescriptors\u540E:\n\n`Javascript\nconst Car = {\n  name: &#39;BMW&#39;,\n  price: 100000,\n  set discount(x) {\n    this.d = x\n  }\n  get discount() {\n    return this.d\n  }\n}\n\nconst ElectricCar2 = Object.defineProperties({}, Object.getOwnPropertyDescriptors(Car))\n// \u8F93\u51FA:\n// {\n//   get: [Function: get],  &lt;-----\uD83D\uDC48\n//   set: [Function: set],  &lt;-----\uD83D\uDC48\n//   enumerable: true,\n//   configurable: true \n// }\n`\n\n5. \u5728\u51FD\u6570\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u7684\u672B\u5C3E\u6DFB\u52A0\u9017\u53F7\n\n\u8FD9\u662F\u4E2A\u5F88\u5C0F\u7684\u529F\u80FD\u70B9\uFF0C\u5728\u51FD\u6570\u5F62\u53C2\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u672B\u5C3E\u6DFB\u52A0\u9017\u53F7\uFF0C\u53EF\u4EE5\u907F\u514Dgit blame\u63D0\u793A\u4E0A\u4E00\u4E2A\u4F5C\u8005\u5E76\u4E0D\u5B58\u5728\u7684\u6539\u52A8\uFF0C\n\u4EE3\u7801\u793A\u4F8B\uFF1A\n\nJavascript\n// \u5047\u8BBE\u8FD9\u4E2A\u51FD\u6570\u7531 \u7A0B\u5E8F\u5458_1 \u521B\u5EFA\n// \u8FD9\u4E2A\u51FD\u6570\u6700\u540E\u4E00\u4E2A\u53C2\u6570age`\u540E\u6CA1\u6709\u9017\u53F7\nfunction Person(\n  name,\n  age\n) {\n  this.name = name\n  this.age = age\n}\n\n// \u5982\u679C \u7A0B\u5E8F\u5458_2 \u8FD9\u65F6\u6709\u4E86\u4EE5\u4E0B\u4FEE\u6539\nfunction Person(\n  name,\n  age, / \u90A3\u4E48\u8FD9\u4E2A,\u9017\u53F7\u4E5F\u4F1A\u5F15\u8D77git blame\u8BA4\u4E3A \u7A0B\u5E8F\u5458_1 \u4FEE\u6539\u4E86\u8FD9\u4E00\u884C/\n  gender / \u6DFB\u52A0\u4E86\u65B0\u53C2\u6570 /\n) { // \u65B0\u6DFB\u52A0\n  this.name = name\n  this.age = age\n  this.gender = gender // \u65B0\u6DFB\u52A0\n}\n\n// es2017\u5BF9\u8FD9\u4E2A\u6DF7\u6DC6\u7684\u5904\u7406\u529E\u6CD5\u662F:\n// \u901A\u8FC7 \u7A0B\u5E8F\u5458_1\u5728age\u672B\u5C3E\u6DFB\u52A0,\u9017\u53F7\n\n// \u66F4\u65B0\u5982\u4E0B:\n\n// \u5047\u8BBE\u8FD9\u4E2A\u51FD\u6570\u7531 \u7A0B\u5E8F\u5458_1 \u521B\u5EFA\n// \u5728\u6700\u540E\u4E00\u4E2A\u53C2\u6570age\u540E\u6DFB\u52A0,\u9017\u53F7\nfunction Person(\n  name,\n  age, / \u6DFB\u52A0\u9017\u53F7 /\n) {\n  this.name = name\n  this.age = age\n}\n`\n\n6. Async/Await\n\n\u8FD9\u4E2A\u7279\u6027\u662F\u76EE\u524D\u4E3A\u6B62\u6700\u91CD\u8981\u7684\u4E00\u4E2A\u529F\u80FD\uFF0Casync\u51FD\u6570\u53EF\u4EE5\u8BA9\u6211\u4EEC\u907F\u514D\u9891\u7E41\u8C03\u7528\u6076\u5FC3\u7684callback\uFF0C\u4F7F\u4EE3\u7801\u4FDD\u6301\u5E72\u51C0\u6574\u6D01\u3002\n\n\u5F53\u7F16\u8BD1\u5668\u8FDB\u5165async\u51FD\u6570\u540E\uFF0C\u9047\u5230await\u5173\u952E\u5B57\u4F1A\u6682\u505C\u6267\u884C\uFF0C\u53EF\u4EE5\u628Aawait\u540E\u8868\u8FBE\u5F0F\u5F53\u4F5C\u4E00\u4E2Apromise\uFF0C\u76F4\u5230promise\u88ABresolve\u6216reject\u540E\uFF0C\u51FD\u6570\u624D\u4F1A\u6062\u590D\u6267\u884C\uFF0C\n\n\u5177\u4F53\u770B\u5982\u4E0B\u4EE3\u7801\uFF1A\n\nJavascript\n// es5\u7684Promise`\nfunction getAmount(userId) {\n  getUser(userId)\n    .then(getBankBalance)\n    .then(amount =&gt; {\n      console.log(amount)\n    })\n}\n\n// es2017\u7684async\nasync function getAmount2(userId) {\n  var user = await getUser(userId)\n  var amount = await getBankBalance()\n  console.log(amount)\n}\n\ngetAmount(&#39;1&#39;) // $1,000\ngetAmount2(&#39;1&#39;) // $1,000\n\nfunction getUser(userId) {\n  return new Promise(resolve =&gt; {\n    setTimeout(() =&gt; {\n      resolve(&#39;\u5F20\u4E09&#39;)\n    }, 1000)\n  })\n}\n\nfunction getBankBalance() {\n  return new Promise((resolve, reject) =&gt; {\n    setTimeout(() =&gt; {\n      if (user === &#39;\u5F20\u4E09&#39;) {\n        resolve(&#39;$1,000&#39;)\n      } else {\n        resolve(&#39;Unknown User&#39;)\n      }\n    }, 1000)\n  })\n}\n`\n\n6.1 Async\u51FD\u6570\u672C\u8EAB\u8FD4\u56DE\u4E00\u4E2APromise\n\n\u56E0\u4E3Aasync\u51FD\u6570\u8FD4\u56DE\u4E00\u4E2Apromise\uFF0C\u6240\u4EE5\u60F3\u8981\u5F97\u5230async\u51FD\u6570\u7684\u8FD4\u56DE\u503C\u9700\u8981\u5BF9\u8FD4\u56DE\u7684promise\u8FDB\u884Cthen\u6C42\u503C\u3002\n\n\u5177\u4F53\u770B\u5982\u4E0B\u4EE3\u7801\uFF1A\n\n`Javascript\nasync function doubleAndAdd(a, b) {\n  a = await doubleAfter1Sec(a)\n  b = await doubleAfter1Sec(b)\n  return a + b\n}\n\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve =&gt; {\n    setTimeout(() =&gt; {\n      resolve(param * 2)\n    }, 1000)\n  })\n}\n`\n\n6.2 \u5E76\u884C\u8C03\u7528async/await\n\n\u4E0A\u4E00\u4E2A\u51FD\u6570doubleAndAdd\u91CC\u4F9D\u6B21\u8C03\u7528\u4E86\u4E24\u4E2Aasync\u51FD\u6570\uFF0C\u4F46\u662F\u6BCF\u6B21\u8C03\u7528\u90FD\u5FC5\u987B\u7B49\u5F851\u79D2\uFF0C\u6027\u80FD\u5F88\u5DEE\uFF1B\u56E0\u4E3A\u53C2\u6570a\u548C\u53C2\u6570b\u4E4B\u95F4\u5E76\u65E0\u8026\u5408\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528Promise.all\u6765\u5E76\u884C\u6267\u884C\u8FD9\u4E24\u6B21\u8C03\u7528:\n\nJavascript\nasync function doubleAndAdd(a, b) {\n  // \u4F7F\u7528Promise.all\n  // \u8FD9\u4E2A\u5730\u65B9\u4F7F\u7528\u6570\u7EC4\u89E3\u6784`\n  // \u6765\u5F97\u5230\u4E24\u6B21\u8C03\u7528\u7684\u7ED3\u679C\n  const [a, b] = Promise.all([doubleAfter1Sec(a), doubleAfter1Sec(b)])\n  return a + b\n}\n\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve =&gt; {\n    setTimeout(() =&gt; {\n      resolve(param * 2)\n    }, 1000)\n  })\n}\n`\n\n6.3 async/await\u7684\u9519\u8BEF\u5904\u7406\n\nasync/await\u5BF9\u9519\u8BEF\u5904\u7406\u6709\u5F88\u591A\u65B9\u6CD5\uFF1A\n\n1. \u5728\u51FD\u6570\u5185\u4F7F\u7528try/catch\n\n`Javascript\nasync function doubleAndAdd(a, b) {\n  try {\n    a = await doubleAfter1Sec(a)\n    b = await doubleAfter1Sec(b)\n  } catch (e) {\n    return NaN\n  }\n  return a + b\n}\n\ndoubleAndAdd(&#39;one&#39;, 2).then(console.log) // NaN\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve =&gt; {\n    setTimeout(() =&gt; {\n      const val = param * 2\n      isNaN(val) ? reject(NaN) : resolve(val)\n    }, 1000)\n  })\n}\n`\n\n2. catch \u6240\u6709await\u8868\u8FBE\u5F0F\n\n\u56E0\u4E3Aawait\u8868\u8FBE\u5F0F\u8FD4\u56DE\u4E00\u4E2Apromise\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u5728await\u8868\u8FBE\u5F0F\u540E\u76F4\u63A5\u6267\u884Ccatch\u6765\u5904\u7406\u9519\u8BEF\n\nJavascript\nasync function doubleAndAdd(a, b) {\n  a = await doubleAfter1Sec(a).catch(e =&gt; console.log(&#39;a&#39; is NaN)\n  b = await doubleAfter1Sec(b).catch(e =&gt; console.log(&#39;b&#39; is NaN`))\n\n  if (!a || !b) return NaN\n  return a + b\n}\n\ndoubleAndAdd(&#39;one&#39;, 2).then(console.log) // NaN, &quot;a&quot; is NaN\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve =&gt; {\n    setTimeout(() =&gt; {\n      const val = param * 2\n      isNaN(val) ? reject(NaN) : resolve(val)\n    }, 1000)\n  })\n}\n`\n\n3. catch \u6574\u4E2Aasync-await\u51FD\u6570\n\n`Javascript\nasync function doubleAndAdd(a, b) {\n  a = await doubleAfter1Sec(a)\n  b = await doubleAfter1Sec(b)\n  return a + b\n}\n\ndoubleAndAdd(&#39;one&#39;, 2)\n  .then(console.log)\n  .catch(console.log) // \u4F7F\u7528catch\n`\n\n\n\nECMAScript\u76EE\u524D\u5728\u6700\u7EC8\u7A3F\u9636\u6BB5\uFF0C\u5C06\u4F1A\u57282018\u5E746\u6708\u62167\u6708\u6B63\u5F0F\u63A8\u51FA\u3002\u4E0B\u9762\u4ECB\u7ECD\u7684\u6240\u6709\u7279\u6027\u5C5E\u4E8Estage-4\uFF0C\u5373\u5C06\u6210\u4E3AECMAScript 2018\u7684\u4E00\u90E8\u5206\u3002\n\n1. \u5171\u4EAB\u5185\u5B58\u548C\u539F\u5B50\u6027\n\n\u8FD9\u662FJS\u7684\u4E00\u4E2A\u9AD8\u7EA7\u7279\u6027\uFF0C\u4E5F\u662FJS\u5F15\u64CE\u7684\u6838\u5FC3\u6539\u8FDB\u3002\n\n\u5171\u4EAB\u5185\u5B58\u7684\u4E3B\u8981\u601D\u60F3\u662F\uFF1A \u628A\u591A\u7EBF\u7A0B\u7684\u7279\u6027\u5E26\u5230JS\uFF0C\u4E3A\u4E86\u63D0\u9AD8\u4EE3\u7801\u7684\u6027\u80FD\u548C\u9AD8\u5E76\u53D1\uFF0C\u7531\u4E4B\u524D\u7684JS\u5F15\u64CE\u7BA1\u7406\u5185\u5B58\u53D8\u4E3A\u81EA\u5DF1\u7BA1\u7406\u5185\u5B58\u3002 \n\n\u8FD9\u4E2A\u7279\u6027\u7531\u4E00\u4E2A\u65B0\u7684\u5168\u5C40\u5BF9\u8C61SharedArrayBuffer\u6765\u5B9E\u73B0\uFF0C\u8FD9\u4E2A\u5BF9\u8C61\u5728\u4E00\u5757\u5171\u4EAB\u5185\u5B58\u533A\u50A8\u5B58\u6570\u636E\uFF0CJS\u7684\u4E3B\u7EBF\u7A0B\u548Cweb-worker\u7EBF\u7A0B\u5171\u4EAB\u8FD9\u90E8\u5206\u6570\u636E\u3002\n\n\u5F53\u524D\uFF0C\u5982\u679C\u6211\u4EEC\u60F3\u8981\u5728JS\u4E3B\u7EBF\u7A0B\u548Cweb-worker\u7EBF\u7A0B\u95F4\u5171\u4EAB\u6570\u636E\u65F6\uFF0C\u5FC5\u987B\u4F7F\u7528postMessage\u5728\u4E0D\u540C\u7EBF\u7A0B\u95F4\u4F20\u9012\u6570\u636E\uFF0C\u6709\u4E86SharedArrayBuffer\u540E\uFF0C\u4E0D\u540C\u7684\u7EBF\u7A0B\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E2A\u5BF9\u8C61\u6765\u5171\u4EAB\u6570\u636E\u3002\n\n\u4F46\u662F\u591A\u7EBF\u7A0B\u95F4\u7684\u5171\u4EAB\u5185\u5B58\u4F1A\u4EA7\u751F\u7ADE\u6001\u6761\u4EF6\uFF0C\u4E3A\u4E86\u907F\u514D\u8FD9\u79CD\u60C5\u51B5\uFF0CJS\u5F15\u5165\u4E86\u539F\u5B50\u6027\u7684\u5168\u5C40\u5BF9\u8C61\u3002\u8FD9\u4E2A\u5BF9\u8C61\u63D0\u4F9B\u4E86\u591A\u79CD\u65B9\u6CD5\u6765\u4FDD\u8BC1\u6B63\u5728\u88AB\u67D0\u4E2A\u7EBF\u7A0B\u8BBF\u95EE\u7684\u5185\u5B58\u88AB\u9501\u4F4F\uFF0C\u4EE5\u8FBE\u5230\u5185\u5B58\u5B89\u5168\u3002\n\n2. Tagged Template literal(\u5E26\u6807\u7B7E\u7684\u6A21\u677F\u5B57\u9762\u91CF?) \u9650\u5236\u88AB\u79FB\u9664\n\n\u9996\u5148\u5F04\u61C2\u4E00\u4E2A\u6982\u5FF5\uFF1A\u4EC0\u4E48s\u662FTagged Template literal ?\n\ntagged template literal\u51FA\u73B0\u5728es2015\u4EE5\u540E\uFF0C\u5141\u8BB8\u5F00\u53D1\u8005\u81EA\u5B9A\u4E49\u5B57\u7B26\u4E32\u88AB\u5D4C\u5165\u7684\u503C\u3002\u4E3E\u4E00\u4E2A\u4F8B\u5B50\uFF0C\u6807\u51C6\u7684\u5B57\u7B26\u4E32\u5D4C\u5165\u4E00\u4E2A\u503C\u7684\u65B9\u5F0F\u662F\uFF1A\n\nJavaScript\nconst userName = &#39;\u5F20\u4E09&#39;\nconst greetings = hello ${userName}!`\n\nconsole.log(greetings) // &quot;hello \u5F20\u4E09!&quot;\n`\n\n\u5728tagged template literal\u91CC\uFF0C\u4F60\u53EF\u4EE5\u7528\u4E00\u4E2A\u51FD\u6570\u901A\u8FC7\u53C2\u6570\u6765\u63A5\u6536\u5B57\u7B26\u4E32\u5199\u6B7B\u7684\u5404\u90E8\u5206\uFF0C\u6BD4\u5982: [&#39;hello&#39;, &#39;!&#39;]\u548C\u4E4B\u540E\u88AB\u66FF\u6362\u4E3A\u503C\u7684\u53D8\u91CF[&#39;\u5F20\u4E09&#39;]\uFF0C\u6700\u540E\u901A\u8FC7\u51FD\u6570\u8FD4\u56DE\u4EFB\u4F55\u4F60\u60F3\u8981\u7684\u7ED3\u679C\uFF0C\u8FD9\u4E2A\u51FD\u6570\u88AB\u79F0\u4F5CTagged\u51FD\u6570\uFF0C\u4E0B\u9762Tagged\u51FD\u6570greet\u6765\u6269\u5C55\u4E0A\u4F8B\u4E2D\u7684greetings\uFF1A\n\nJavascript\nconst userName = &#39;\u5F20\u4E09&#39;\nconst greetings = hello ${userName}!`\n\nconsole.log(greetings) // &quot;hello \u5F20\u4E09!\u65E9\u4E0A\u597D!&quot;\n\n// hardCodedPartsArray: \u5B57\u7B26\u4E32\u5199\u6B7B\u7684\u5404\u90E8\u5206,  [ &quot;hello &quot;, &quot;!&quot; ]\n// replacementPartsArray: \u5B57\u7B26\u4E32\u91CC\u5D4C\u5165\u7684\u53D8\u91CF, [ &quot;\u5F20\u4E09&quot; ]\nfunction greet(hardCodedPartsArray, ...replacementPartsArray) {\n  let str = &#39;&#39;\n  hardCodedPartsArray.forEach((part, i) =&gt; {\n    if (i &lt; replacementPartsArray.length) {\n      str += ${part}${replacementPartsArray[i] || &#39;&#39;}\n    } else {\n      str += ${part} ${timeGreet()} // \u5728\u7ED3\u5C3E\u6DFB\u52A0\u95EE\u5019\u8BED\n    }\n  })\n\n  return str\n}\n\nfunction timeGreet() {\n  const hr = new Date().getHours()\n  return hr &lt; 12\n    ? &#39;\u65E9\u4E0A\u597D!&#39;\n    : hr &lt; 18 ? &#39;\u4E0B\u5348\u597D!&#39; : &#39;\u665A\u4E0A\u597D!&#39;\n}\n`\n\n3. \u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\u7684.\u5339\u914D\u6240\u6709\u5B57\u7B26\n\n\u5728\u76EE\u524D\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\uFF0C\u867D\u7136.\u70B9\u88AB\u8BA4\u4E3A\u4EE3\u8868\u6240\u4EE5\u5B57\u7B26\uFF0C\u5B9E\u9645\u4E0A\u5B83\u4E0D\u4F1A\u5339\u914D\u50CF\\n\u3001\\r\u548C\\f\u7B49\u6362\u884C\u7B26\u3002\n\n\u4F8B\u5982:\n\nJavascript\n// \u4E4B\u524D\n/first.second/.test(&#39;first\\nsecond&#39;); // false\n\n\n\u8FD9\u4E2A\u6539\u8FDB\u4F7F.\u70B9\u64CD\u4F5C\u7B26\u5339\u914D\u4EFB\u610F\u5355\u4E2A\u5B57\u7B26\u3002\u4E3A\u4E86\u4FDD\u8BC1\u4E0B\u9762\u8FD9\u6BB5\u4EE3\u7801\u5728\u4EFB\u4F55JS\u7248\u672C\u90FD\u6B63\u5E38\u5DE5\u4F5C\uFF0C\u6211\u4EEC\u5728\u7ED3\u5C3E\u52A0\u4E0A/s\u4FEE\u9970\u7B26\n\nJavascript\n//ECMAScript 2018\n/first.second/s.test(&#39;first\\nsecond&#39;); // true   \u6CE8\u610F: /s \uD83D\uDC48\uD83C\uDFFC\n\n\n4. \u6B63\u5219\u8868\u8FBE\u5F0F\u6355\u83B7Named Group\n\n\u8FD9\u4E2A\u6539\u8FDB\u5E26\u6765\u4E86\u5728\u5176\u4ED6\u8BED\u8A00\u4E2D\u6BD4\u5982:Java\u3001Python\u7B49\u5DF2\u7ECF\u652F\u6301\u4E86\u7684\u6709\u7528\u7684\u6B63\u5219\u7279\u6027\u3002\u8FD9\u4E2A\u7279\u6027\u5141\u8BB8\u5F00\u53D1\u8005\u5728\u6B63\u5219\u4E2D\u4E3A\u4E0D\u540C\u7684\u7EC4\u5199\u683C\u5F0F\u4E3A(&lt;?name&gt;)\u7684\u540D\u5B57\u6807\u8BC6\u7B26\uFF0C\u4E4B\u540E\u53EF\u4EE5\u5728\u5339\u914D\u7684\u7ED3\u679C\u91CC\u901A\u8FC7\u540D\u5B57\u6807\u8BC6\u7684\u7EC4\u6765\u83B7\u53D6\u5BF9\u5E94\u7684\u503C\u3002\n\n4.1 \u57FA\u7840\u793A\u4F8B\n\n`Javascript\n// \u4E4B\u524D\nconst re1 = /(\\d{4})-(\\d{2})-(\\d{2})/\nconst result1 = re1.exec(&#39;2015-01-08&#39;)\nconsole.log(result1)\n// \u8F93\u51FA\uFF1A\n// [\n//   &quot;2015-01-08&quot;,\n//   &quot;2015&quot;,\n//   &quot;01&quot;,\n//   &quot;08&quot;,\n//   index: 0,\n//   input: &quot;2015-01-08&quot;,\n//   groups: undefined\n// ]\n\n// \u73B0\u5728 (es2018)\nconst re2 = /(?&lt;year&gt;\\d{4})-(?&lt;month&gt;\\d{2})-(?&lt;day&gt;\\d{2})/u\nconst result2 = re2.exec(&#39;2015-01-08&#39;)\nconsole.log(result2)\n\n// \u8F93\u51FA\uFF1A\n// [\n//   &quot;2015-01-08&quot;,\n//   &quot;2015&quot;,\n//   &quot;01&quot;,\n//   &quot;08&quot;,\n//   groups: {\n//     day: &quot;08&quot;,\n//     month: &quot;01&quot;,\n//     year: &quot;2015&quot;\n//   },\n//   index: 0,\n//   input: &quot;2015-01-08&quot;,\n// ]\n`\n\n4.2 \u5728\u6B63\u5219\u81EA\u8EAB\u4F7F\u7528\u547D\u540D\u7EC4\n\n\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u683C\u5F0F\\k&lt;group name&gt;\u5728\u6B63\u5219\u81EA\u8EAB\u6765\u5F15\u7528\u4E4B\u524D\u7684\u7EC4\u3002\u4E0B\u9762\u7684\u7528\u4F8B\u5B50\u5C55\u793A\uFF1A\n\nJavascript\n// \u5728\u8FD9\u4E2A\u4F8B\u5B50\u91CC\uFF0C\u6211\u4EEC\u6709\u4E00\u4E2A\u547D\u540D\u7EC4fruit\uFF0C\n// \u5B83\u53EF\u4EE5\u5339\u914Dapple\u6216\u8005orange\uFF0C\u6211\u4EEC\u53EF\u4EE5\u7528\\k&lt;group name&gt;`(\\k&lt;fruit&gt;)\n// \u6765\u5F15\u7528\u4E4B\u524D\u5339\u914D\u7684\u8FD9\u4E2A\u7EC4\n// \u6240\u4EE5\u7B49\u53F7\u4E24\u8FB9\u7684\u503C\u662F\u76F8\u7B49\u7684\n\nconst sameWords = /(?&lt;fruit&gt;apple|orange)==\\k&lt;fruit&gt;/u\nsameWords.test(&#39;apple==apple&#39;) // true\nsameWords.test(&#39;orange==orange&#39;) // true\nsameWords.test(&#39;apple==orange&#39;) // false\n`\n\n4.3 \u5728String.prototype.replace\u91CC\u4F7F\u7528\u547D\u540D\u7EC4\n\n\u547D\u540D\u7EC4\u7279\u6027\u5DF2\u7ECF\u88AB\u6DFB\u52A0\u5230replace\u65B9\u6CD5\u91CC\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u8F7B\u677E\u5730\u66FF\u6362\u5B57\u7B26\u4E32\u4E86\u3002\n\n\u4F8B\u5982\uFF1A \u6539\u53D8&quot;firstName, lastName&quot; \u4E3A &quot;lastName, firstName&quot;:\n\nJavascript\nconst re = /(?&lt;firstName&gt;[A-Za-z]+) (?&lt;lastName&gt;[A-Za-z]+)/u\n&#39;John Lennon&#39;.replace(re, &#39;$&lt;lastName&gt;, $&lt;firstName&gt;&#39;) // Lennon John\n\n\n5. \u5BF9\u8C61\u7684Rest properties\n\nRest\u64CD\u4F5C\u7B26...\uFF08\u4E09\u4E2A\u70B9\uFF09\u5141\u8BB8\u6211\u4EEC\u53D6\u51FA\u5269\u4F59\u7684\u5BF9\u8C61\u5C5E\u6027\n\n5.1 \u4F7F\u7528Rest properties\u6765\u53D6\u51FA\u4F60\u60F3\u8981\u4F7F\u7528\u7684\u5C5E\u6027\n\n`Javascript\nlet { name, age, ...remaining} = {\n  name: &#39;\u5F20\u4E09&#39;,\n  age: 20,\n  gender: &#39;\u7537&#39;,\n  address: &#39;xxxxx&#39;\n}\n\nname // &#39;\u5F20\u4E09&#39;\nage // 20\n`\n\n5.2 \u4F60\u751A\u81F3\u53EF\u4EE5\u79FB\u9664\u4E0D\u60F3\u8981\u7684\u5C5E\u6027\n\n`Javascript\n// \u5982\u679C\u6211\u4EEC\u60F3\u8981\u5220\u9664address\u5C5E\u6027\uFF0C\n// \u4F46\u662F\u6211\u4EEC\u53C8\u4E0D\u60F3\u8981\u904D\u5386\u5BF9\u8C61\u91CD\u65B0\u521B\u5EFA\u65B0\u5BF9\u8C61\n// \u6211\u4EEC\u53EA\u8981\u7B80\u5355\u7684\u89E3\u6784\u51FA\u8FD9\u4E2A\u8981\u79FB\u9664\u7684\u5C5E\u6027\n// \u5269\u4E0B\u7684\u6CA1\u6709\u89E3\u6784\u7684\u5BF9\u8C61\n// \u5C31\u662F\u6211\u4EEC\u60F3\u8981\u7559\u4E0B\u7684\u5BF9\u8C61\nlet {address, ...cleanObj} = {\n  name: &#39;john&#39;,\n  address: &#39;\u5317\u4EAC\u5E02\u6D77\u6DC0\u533A&#39;,\n  gender: &#39;\u7537&#39;\n}\n\ncleanObj // {name, gender}\n`\n\n6. \u5BF9\u8C61\u7684Spread properties\n\nSpread\u5C5E\u6027\u770B\u8D77\u6765\u548CRest\u5C5E\u6027\u5F88\u50CF\uFF0C\u4E5F\u662F\u4E09\u4E2A\u70B9...\u64CD\u4F5C\u7B26\uFF0C\u4E0D\u540C\u7684\u662FSpread\u7528\u4E8E\u521B\u5EFA\u65B0\u5BF9\u8C61\u3002\n\n`Javascript\nconst person = {name: &#39;john&#39;, age: 20}\nconst address = {city: &#39;Beijing&#39;, country: &#39;china&#39;}\n\nconst personWithAddress = {\n  ...person,\n  ...address\n}\n\npersonWithAddress // {name, age, city, country}\n`\n\n7. \u6B63\u5219Lookbehind\u65AD\u8A00\n\n\u8FD9\u4E2A\u6B63\u5219\u7684\u6539\u8FDB\u5141\u8BB8\u6211\u4EEC\u4FDD\u8BC1\u5728\u4E00\u4E9B\u5B57\u7B26\u4E32\u4E4B\u524D\u5B58\u5728\u67D0\u4E9B\u5B57\u7B26\u4E32\u3002\n\n\u4F60\u53EF\u4EE5\u4F7F\u7528\u4E00\u7EC4(?&lt;=...)(\u95EE\u53F7\uFF0C\u5C0F\u4E8E\u7B49\u4E8E)\u5BFB\u627E\u540E\u9762\u80AF\u5B9A\u7684\u65AD\u8A00\u3002\n\n\u66F4\u8FDB\u4E00\u6B65\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528(?&lt;!...(\u95EE\u53F7\uFF0C\u5C0F\u4E8E\u53F7\u53F9\u53F7)\u5BFB\u627E\u540E\u9762\u5426\u5B9A\u7684\u65AD\u8A00\u3002\n\n\u80AF\u5B9A\u65AD\u8A00: \u6BD4\u5982\u6211\u4EEC\u60F3\u8981\u786E\u5B9A\u5728\u7B26\u53F7#\u51FA\u73B0\u5728\u5355\u8BCDwinning\u524D\uFF0C\u5373#winning\uFF0C\u53EA\u8FD4\u56DEwinning:\n\n`Javascript\n/(?&lt;=#)./.test(&#39;winning&#39;) // false\n/(?&lt;=#)./.test(&#39;#winning&#39;) // true\n\n// \u4E4B\u524D\n&#39;#winning&#39;.match(/#.*/)[0] // &#39;#winning&#39;\n\n// es2018\n&#39;#winning&#39;.match(/(?&lt;=#).*/)[0] // &#39;winning&#39;, \u6CA1\u6709 #, #\u53EA\u662F\u4E3A\u4E86\u9A8C\u8BC1\n`\n\n\u5426\u5B9A\u65AD\u8A00\uFF1A\u6BD4\u5982\u6211\u4EEC\u60F3\u8981\u53D6\u51FA\u6570\u5B57\u524D\u6807\u5FD7\u662F#\uFF0C\u800C\u4E0D\u662F$\u7684\u6570\u5B57\n\nJavascript\n&#39;this is a test signal $1.23&#39;.match(/(?&lt;!\\$)\\d+\\.\\d+/) // null\n&#39;this is a test signal #2.43&#39;.match(/(?&lt;!\\$)\\d+\\.\\d+/)[0] // 2.43\n\n\n8. \u6B63\u5219Unicode\u5C5E\u6027\u8F6C\u4E49\u7B26\n\n\u7528\u6B63\u5219\u5339\u914D\u6240\u6709\u7684unicode\u5B57\u7B26\u5F88\u56F0\u96BE\u3002\u50CF\\w\u3001\\W\u3001\\d\u7B49\u53EA\u80FD\u5339\u914D\u82F1\u6587\u5B57\u7B26\u548C\u6570\u5B57\uFF0C\u4F46\u662F\u51FA\u73B0\u5728\u5176\u4ED6\u8BED\u8A00\u6BD4\u5982\u5E0C\u814A\u8BED\u91CC\u7684\u6570\u5B57\u6211\u4EEC\u8981\u600E\u4E48\u5904\u7406\u5462\uFF1F\n\nUnicode\u5C5E\u6027\u8F6C\u4E49\u7B26\u5C31\u662F\u4E3A\u4E86\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u3002\u5B83\u4F7FUnicode\u4E3A\u6BCF\u4E2A\u5B57\u7B26\u6DFB\u52A0\u63CF\u8FF0\u6027\u7684metadata\u3002','readingtime':34,'url':'/cates/Frontend/post/2018-04-03/Here_are_examples_of_everything_new_in_ECMAScript_2016_2017_and_2018','dirs':['js'],'relatives':[{'url':'/cates/Frontend/post/2018-03-10/JavaScript_Modules_Worth_Using','title':'\u90A3\u4E9B\u503C\u5F97\u4E00\u7528\u7684JS\u5E93'},{'url':'/cates/Frontend/post/2018-04-08/hyperapp','title':'1kb\u7684JS\u6846\u67B6 - Hyperapp'}],'body':'\n\nJS\u66F4\u65B0\u7684\u901F\u5EA6\u975E\u5E38\u5FEB\uFF0C\u914D\u5957\u7684\u6559\u7A0B\u5374\u5F88\u5C11\uFF0C\u4ECA\u5929\u4E3A\u5927\u5BB6\u5E26\u676518\u4E2A\u65B0\u7279\u6027\uFF0C\u5E76\u8BE6\u7EC6\u8BB2\u89E3\u4F7F\u7528\u65B9\u6CD5\u3002\n\n**\u4E0B\u9762\u4F9D\u7167JS\u7248\u672C\u7684\u987A\u5E8F\u5F00\u59CB\u4ECB\u7ECD:**\n\n![](1_K09EWrqTcTwN9_dlhlzy6Q.png)\n\n## 1. Array.prototype.includes\n\n`includes`\u662F\u6570\u7EC4\u7684\u5B9E\u4F8B\u65B9\u6CD5\uFF0C\u8FD9\u4E2A\u65B9\u6CD5\u7684\u529F\u80FD\u5F88\u7B80\u5355\uFF1A\u7528\u4E8E\u5224\u65AD\u67D0\u4E00\u9879\u662F\u5426\u5B58\u5728\u6570\u7EC4\u91CC\uFF0C\u548C\u8FD9\u4E2A\u65B9\u6CD5\u529F\u80FD\u7C7B\u4F3C\u7684\u6709`indexOf`\uFF0C\u4E24\u8005\u7684\u533A\u522B\u662F`indexOf`\u65E0\u6CD5\u5224\u65AD`NaN`\uFF0C\n\u5982\u56FE\uFF1A\n\n```Javascript\nconst arr = [1, 2, 3, 4, NaN];\n\n// es5\nif (arr.indexOf(3) >= 0) {\n  console.log(true)\n}\n\n// es2016\nif (arr.includes(1)) {\n  console.log(true)\n}\n\n// \u6CE8\uFF1AindexOf\u4E0D\u652F\u6301\u68C0\u67E5`NaN`\narr.indexOf(NaN) // -1\narr.includes(NaN) // true\n```\n\n## 2. \u6C42\u5E42\u8FD0\u7B97\u7B26\n\n**\u6C42\u5E42\u8FD0\u7B97\u7B26**: `**`\uFF0C\u7528\u4E8E\u53D6\u4EE3\u4EE5\u524D\u7684\u6C42\u5E42\u65B9\u6CD5`Math.pow`\uFF0C\n\n\u4F7F\u7528\u65B9\u6CD5\u5982\u4E0B\uFF1A\n\n```Javascript\n// \u4E4B\u524D\nMath.pow(3, 2) // 9\n\n// \u73B0\u5728\n3**2 // 9\n```\n\n![](1_fV_95TaY3ocgE8hlDhhv8w.png)\n\n## 1. Object.values()\n\n`Object.values`\u65B9\u6CD5\u548C`Object.keys`\u7C7B\u4F3C\uFF0C\u8FD4\u56DE\u7C7B\u578B\u90FD\u662F\u6570\u7EC4\uFF0C\u8FD4\u56DE\u7684\u503C\u662F\u5BF9\u8C61\u7684\u503C\u7684\u96C6\u5408\uFF0C\u9700\u8981\u6CE8\u610F\u4E00\u70B9\uFF1A\u4E24\u4E2A\u65B9\u6CD5\u90FD\u662F\u8FD4\u56DE\u81EA\u8EAB\u7684\u5C5E\u6027\uFF0C\u4E0D\u5305\u62EC\u4EFB\u4F55\u539F\u578B\u94FE\u4E0A\u7684\u5C5E\u6027\uFF0C\u5982\u56FE\uFF1A\n\n```Javascript\nconst cars = {BMW: 3, Tesla: 2, Toyota: 1}\n\n// es5\nconst vals = Object.keys(cars).map(key => cars[key]) \nconsole.log(vals) // [3, 2, 1]\n\n// es2016\nconst values = Object.values(cars)\nconsole.log(values) // [3, 2, 1]\n```\n\n\n## 2. Object.entries()\n\n`Object.entries()`\u65B9\u6CD5\u6709\u70B9\u50CF`Object.keys`\u548C`Object.values`\u7684\u7ED3\u5408\u4F53\uFF0C\u8FD4\u56DE\u7C7B\u578B\u662F\u6570\u7EC4\uFF0C\u540C\u65F6\u6570\u7EC4\u7684\u6BCF\u4E00\u9879\u4E5F\u662F\u6570\u7EC4 -- \u5305\u542B\u4E24\u9879\uFF1Akey\u548Cvalue\uFF0C\u8FD9\u4E2A\u65B9\u6CD5\u7684\u597D\u5904\u5728\u4E8E\u4F60\u53EF\u4EE5\u901A\u8FC7`for of`\u904D\u5386\u4E00\u6B21\u53D6\u51FAkey/value \u548C `Object`\u53EF\u4EE5\u76F4\u63A5\u8F6C\u4E3A`Map`\uFF1A\n\n**\u4F8B1**\uFF0C\u904D\u5386:\n\n```Javascript\nconst cars = { BMW: 3, Tesla: 2, Toyota: 1 }\n\n// es5\u7684\u904D\u5386\u65B9\u5F0F\n// \u9700\u8981\u628A`key`\u53D6\u51FA\u6765\uFF0C\u518D\u904D\u5386\nObject.keys(cars).forEach(key => {\n  console.log(`key: ${key}, value: ${cars[key]}`)\n})\n\n// es2017\n// Object.entries(carts):\n// [\n//   [\'BMW\', 3],\n//   [\'Tesla\', 2],\n//   [\'Toyota\', 1]\n// ]\nfor (let [key, value] of Object.entries(cars)) {\n  console.log(`key: ${key}, value: ${cars[key]}`)\n}\n``` \n\n**\u4F8B2**\uFF0C\u628Aobject\u76F4\u63A5\u8F6C\u6362\u4E3A`Map`:\n\n```Javascript\nconst cars = { BMW: 3, Tesla: 2, Toyota: 1 }\n\n// es5\nconst map1 = new Map()\nObject.keys(cars).map(key => {\n  map1.set(key, cars[key])\n})\n\nconsole.log(map1) // Map { \'BMW\': 3, \'Tesla\': 2, \'Toyota\': 1 }\n\n// es2016\nconst map2 = new Map(Object.entries(cars))\n\nconsole.log(map2) // Map { \'BMW\': 3, \'Tesla\': 2, \'Toyota\': 1 }\n```\n\n## 3. String padding\n\nString\u589E\u52A0\u4E86\u4E24\u4E2A\u5B9E\u4F8B\u65B9\u6CD5 -- `padStart`\u548C`padEnd`\uFF0C\u8FD9\u4E24\u4E2A\u65B9\u6CD5\u53EF\u4EE5\u5728\u5B57\u7B26\u4E32\u7684\u9996/\u5C3E\u6DFB\u52A0\u5176\u4ED6\u5B57\u7B26\u4E32:\n\n```Javascript\n// \'someStr\'.padStart(\u5B57\u7B26\u6570, [,\u6DFB\u52A0\u7684\u5B57\u7B26])\n\n\'hello\'.padStart(\'10\', \'a\') // \'aaaaahello\', \u6DFB\u52A0\u4E865\u4E2A\u5B57\u7B26`a`\u540E\u4E00\u5171`10`\u4E2A\u5B57\u7B26\n\'hello\'.padEnd(\'10\', \'b\') // \'hellobbbbb\'\n\'hello\'.padStart(\'7\') // \'  hello\', \u5728\u5934\u90E8\u6DFB\u52A0\u4E24\u4E2A\u4E2A\u7A7A\u683C\n```\n\n### 3.1 padStart\u793A\u4F8B\n\n```Javascript\nconst formatted = [0, 1, 12, 123, 1234, 12345].map(num =>\n  num.toString().padStart(10, \'0\')\n)\n\nconsole.log(formatted)\n// \u8F93\u51FA:\n// [\n//   \'0000000000\',\n//   \'0000000001\',\n//   \'0000000012,\'\n//   \'0000000234,\'\n//   \'0000001234,\'\n//   \'0009012345\'\n// ]\n```\n\n### 3.2 padEnd\u793A\u4F8B\n\n```Javascript\nconst cars = {\n  \'\uD83D\uDE99BMW\': \'10\',\n  \'\uD83D\uDE98Tesla\': \'5\',\n  \'\uD83D\uDE96Lamborghini\': \'0\'\n}\n\nObject.entries(cars).map(([name, count]) => {\n  console.log(`${name.padEnd(20, \' -\')} Count: ${count.padStart(3, \'0\')}`)\n});\n\n//\u8F93\u51FA:\n// \uD83D\uDE99BMW - - - - - - -  Count: 010\n// \uD83D\uDE98Tesla - - - - - -  Count: 005\n// \uD83D\uDE96Lamborghini - - -  Count: 000\n```\n\n## 4.Object.getOwnPropertyDescriptors\n\n\u8FD9\u4E2A\u65B9\u6CD5\u7684\u4F5C\u7528\u662F\u8865\u5145`Object.assign`\u7684\u529F\u80FD\uFF0C\u5728\u6D45\u62F7\u8D1D(shallow clone)\u5BF9\u8C61\u7684\u57FA\u7840\u4E0A\uFF0C\u4E5F\u4F1A\u590D\u5236`getter`\u548C`setter`\u65B9\u6CD5\uFF1A\n\n\u4E0B\u9762\u7684\u4F8B\u5B50\u7528`Object.defineProperties`\u62F7\u8D1D\u539F\u5BF9\u8C61`Car`\u5230\u65B0\u5BF9\u8C61`ElectricCar`\u6765\u5C55\u793A`Object.assign`\u548C`Object.getOwnPropertyDescriptors`\u7684\u4E0D\u540C\u3002\n\n```Javascript\nconst Car = {\n  name: \'BMW\',\n  price: 100000,\n  set discount(x) {\n    this.d = x\n  }\n  get discount() {\n    return this.d\n  }\n}\n\nconsole.log(Object.getOwnPropertyDescriptor(Car, \'discount\')\n// \u8F93\u51FA:\n// {\n//   get: [Function: get],\n//   set: [Function: set],\n//   enumerable: true,\n//   configurable: true\n// }\n\nconst ElectricCar = Object.assign({}, Car)\nconsole.log(Object.getOwnPropertyDescriptor(ElectricCar, \'discount\'))\n// \u8F93\u51FA:\n// {\n//   value: undefined,\n//   writable: true,\n//   enumerable: true,\n//   configurable: true\n// }\n\n// \u4F7F\u7528`Object.assign`\u521B\u5EFA`ElectricCar`\u540E\uFF0C\u5C5E\u6027`getter`\u548C`setter`\u4E22\u5931\u4E86\n```\n\n### \u4F7F\u7528`Object.getOwnPropertyDescriptors`\u540E:\n\n```Javascript\nconst Car = {\n  name: \'BMW\',\n  price: 100000,\n  set discount(x) {\n    this.d = x\n  }\n  get discount() {\n    return this.d\n  }\n}\n\nconst ElectricCar2 = Object.defineProperties({}, Object.getOwnPropertyDescriptors(Car))\n// \u8F93\u51FA:\n// {\n//   get: [Function: get],  <-----\uD83D\uDC48\n//   set: [Function: set],  <-----\uD83D\uDC48\n//   enumerable: true,\n//   configurable: true \n// }\n```\n\n## 5. \u5728\u51FD\u6570\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u7684\u672B\u5C3E\u6DFB\u52A0\u9017\u53F7\n\n\u8FD9\u662F\u4E2A\u5F88\u5C0F\u7684\u529F\u80FD\u70B9\uFF0C\u5728\u51FD\u6570\u5F62\u53C2\u6700\u540E\u4E00\u4E2A\u53C2\u6570\u672B\u5C3E\u6DFB\u52A0\u9017\u53F7\uFF0C\u53EF\u4EE5\u907F\u514D`git blame`\u63D0\u793A\u4E0A\u4E00\u4E2A\u4F5C\u8005\u5E76\u4E0D\u5B58\u5728\u7684\u6539\u52A8\uFF0C\n\u4EE3\u7801\u793A\u4F8B\uFF1A\n\n```Javascript\n// \u5047\u8BBE\u8FD9\u4E2A\u51FD\u6570\u7531 `\u7A0B\u5E8F\u5458_1` \u521B\u5EFA\n// \u8FD9\u4E2A\u51FD\u6570\u6700\u540E\u4E00\u4E2A\u53C2\u6570`age`\u540E\u6CA1\u6709\u9017\u53F7\nfunction Person(\n  name,\n  age\n) {\n  this.name = name\n  this.age = age\n}\n\n// \u5982\u679C `\u7A0B\u5E8F\u5458_2` \u8FD9\u65F6\u6709\u4E86\u4EE5\u4E0B\u4FEE\u6539\nfunction Person(\n  name,\n  age, /* \u90A3\u4E48\u8FD9\u4E2A`,`\u9017\u53F7\u4E5F\u4F1A\u5F15\u8D77`git blame`\u8BA4\u4E3A `\u7A0B\u5E8F\u5458_1` \u4FEE\u6539\u4E86\u8FD9\u4E00\u884C*/\n  gender /* \u6DFB\u52A0\u4E86\u65B0\u53C2\u6570 */\n) { // \u65B0\u6DFB\u52A0\n  this.name = name\n  this.age = age\n  this.gender = gender // \u65B0\u6DFB\u52A0\n}\n\n// es2017\u5BF9\u8FD9\u4E2A\u6DF7\u6DC6\u7684\u5904\u7406\u529E\u6CD5\u662F:\n// \u901A\u8FC7 `\u7A0B\u5E8F\u5458_1`\u5728`age`\u672B\u5C3E\u6DFB\u52A0`,`\u9017\u53F7\n\n// \u66F4\u65B0\u5982\u4E0B:\n\n// \u5047\u8BBE\u8FD9\u4E2A\u51FD\u6570\u7531 `\u7A0B\u5E8F\u5458_1` \u521B\u5EFA\n// \u5728\u6700\u540E\u4E00\u4E2A\u53C2\u6570`age`\u540E\u6DFB\u52A0`,`\u9017\u53F7\nfunction Person(\n  name,\n  age, /* \u6DFB\u52A0\u9017\u53F7 */\n) {\n  this.name = name\n  this.age = age\n}\n```\n\n## 6. Async/Await\n\n\u8FD9\u4E2A\u7279\u6027\u662F\u76EE\u524D\u4E3A\u6B62\u6700\u91CD\u8981\u7684\u4E00\u4E2A\u529F\u80FD\uFF0C`async`\u51FD\u6570\u53EF\u4EE5\u8BA9\u6211\u4EEC\u907F\u514D\u9891\u7E41\u8C03\u7528*\u6076\u5FC3\u7684*`callback`\uFF0C\u4F7F\u4EE3\u7801\u4FDD\u6301\u5E72\u51C0\u6574\u6D01\u3002\n\n\u5F53\u7F16\u8BD1\u5668\u8FDB\u5165`async`\u51FD\u6570\u540E\uFF0C\u9047\u5230`await`\u5173\u952E\u5B57\u4F1A\u6682\u505C\u6267\u884C\uFF0C\u53EF\u4EE5\u628A`await`\u540E\u8868\u8FBE\u5F0F\u5F53\u4F5C\u4E00\u4E2A`promise`\uFF0C\u76F4\u5230promise\u88AB`resolve`\u6216`reject`\u540E\uFF0C\u51FD\u6570\u624D\u4F1A\u6062\u590D\u6267\u884C\uFF0C\n\n\u5177\u4F53\u770B\u5982\u4E0B\u4EE3\u7801\uFF1A\n\n```Javascript\n// es5\u7684`Promise`\nfunction getAmount(userId) {\n  getUser(userId)\n    .then(getBankBalance)\n    .then(amount => {\n      console.log(amount)\n    })\n}\n\n// es2017\u7684`async`\nasync function getAmount2(userId) {\n  var user = await getUser(userId)\n  var amount = await getBankBalance()\n  console.log(amount)\n}\n\ngetAmount(\'1\') // $1,000\ngetAmount2(\'1\') // $1,000\n\nfunction getUser(userId) {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(\'\u5F20\u4E09\')\n    }, 1000)\n  })\n}\n\nfunction getBankBalance() {\n  return new Promise((resolve, reject) => {\n    setTimeout(() => {\n      if (user === \'\u5F20\u4E09\') {\n        resolve(\'$1,000\')\n      } else {\n        resolve(\'Unknown User\')\n      }\n    }, 1000)\n  })\n}\n```\n\n### 6.1 Async\u51FD\u6570\u672C\u8EAB\u8FD4\u56DE\u4E00\u4E2APromise\n\n\u56E0\u4E3Aasync\u51FD\u6570\u8FD4\u56DE\u4E00\u4E2Apromise\uFF0C\u6240\u4EE5\u60F3\u8981\u5F97\u5230async\u51FD\u6570\u7684\u8FD4\u56DE\u503C\u9700\u8981\u5BF9\u8FD4\u56DE\u7684promise\u8FDB\u884C`then`\u6C42\u503C\u3002\n\n\u5177\u4F53\u770B\u5982\u4E0B\u4EE3\u7801\uFF1A\n\n```Javascript\nasync function doubleAndAdd(a, b) {\n  a = await doubleAfter1Sec(a)\n  b = await doubleAfter1Sec(b)\n  return a + b\n}\n\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(param * 2)\n    }, 1000)\n  })\n}\n```\n\n### 6.2 \u5E76\u884C\u8C03\u7528async/await\n\n\u4E0A\u4E00\u4E2A\u51FD\u6570`doubleAndAdd`\u91CC\u4F9D\u6B21\u8C03\u7528\u4E86\u4E24\u4E2A`async`\u51FD\u6570\uFF0C\u4F46\u662F\u6BCF\u6B21\u8C03\u7528\u90FD\u5FC5\u987B\u7B49\u5F851\u79D2\uFF0C\u6027\u80FD\u5F88\u5DEE\uFF1B\u56E0\u4E3A\u53C2\u6570`a`\u548C\u53C2\u6570`b`\u4E4B\u95F4\u5E76\u65E0\u8026\u5408\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528`Promise.all`\u6765\u5E76\u884C\u6267\u884C\u8FD9\u4E24\u6B21\u8C03\u7528:\n\n```Javascript\nasync function doubleAndAdd(a, b) {\n  // \u4F7F\u7528`Promise.all`\n  // \u8FD9\u4E2A\u5730\u65B9\u4F7F\u7528\u6570\u7EC4`\u89E3\u6784`\n  // \u6765\u5F97\u5230\u4E24\u6B21\u8C03\u7528\u7684\u7ED3\u679C\n  const [a, b] = Promise.all([doubleAfter1Sec(a), doubleAfter1Sec(b)])\n  return a + b\n}\n\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      resolve(param * 2)\n    }, 1000)\n  })\n}\n```\n\n### 6.3 async/await\u7684\u9519\u8BEF\u5904\u7406\n\n`async/await`\u5BF9\u9519\u8BEF\u5904\u7406\u6709\u5F88\u591A\u65B9\u6CD5\uFF1A\n\n#### 1. \u5728\u51FD\u6570\u5185\u4F7F\u7528try/catch\n\n```Javascript\nasync function doubleAndAdd(a, b) {\n  try {\n    a = await doubleAfter1Sec(a)\n    b = await doubleAfter1Sec(b)\n  } catch (e) {\n    return NaN\n  }\n  return a + b\n}\n\ndoubleAndAdd(\'one\', 2).then(console.log) // NaN\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      const val = param * 2\n      isNaN(val) ? reject(NaN) : resolve(val)\n    }, 1000)\n  })\n}\n```\n\n#### 2. catch \u6240\u6709`await`\u8868\u8FBE\u5F0F\n\n\u56E0\u4E3A`await`\u8868\u8FBE\u5F0F\u8FD4\u56DE\u4E00\u4E2A`promise`\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u5728`await`\u8868\u8FBE\u5F0F\u540E\u76F4\u63A5\u6267\u884C`catch`\u6765\u5904\u7406\u9519\u8BEF\n\n```Javascript\nasync function doubleAndAdd(a, b) {\n  a = await doubleAfter1Sec(a).catch(e => console.log(`\'a\' is NaN`)\n  b = await doubleAfter1Sec(b).catch(e => console.log(`\'b\' is NaN`))\n\n  if (!a || !b) return NaN\n  return a + b\n}\n\ndoubleAndAdd(\'one\', 2).then(console.log) // NaN, "a" is NaN\ndoubleAndAdd(1, 2).then(console.log) // 5 \n\nasync function doubleAfter1Sec(param) {\n  return new Promise(resolve => {\n    setTimeout(() => {\n      const val = param * 2\n      isNaN(val) ? reject(NaN) : resolve(val)\n    }, 1000)\n  })\n}\n```\n\n#### 3. catch \u6574\u4E2Aasync-await\u51FD\u6570\n\n```Javascript\nasync function doubleAndAdd(a, b) {\n  a = await doubleAfter1Sec(a)\n  b = await doubleAfter1Sec(b)\n  return a + b\n}\n\ndoubleAndAdd(\'one\', 2)\n  .then(console.log)\n  .catch(console.log) // \u4F7F\u7528catch\n```\n\n![](1_X755b572fEcI0vK0fRKWkw.png)\n\n> ECMAScript\u76EE\u524D\u5728\u6700\u7EC8\u7A3F\u9636\u6BB5\uFF0C\u5C06\u4F1A\u57282018\u5E746\u6708\u62167\u6708\u6B63\u5F0F\u63A8\u51FA\u3002\u4E0B\u9762\u4ECB\u7ECD\u7684\u6240\u6709\u7279\u6027\u5C5E\u4E8E**stage-4**\uFF0C\u5373\u5C06\u6210\u4E3AECMAScript 2018\u7684\u4E00\u90E8\u5206\u3002\n\n## 1. \u5171\u4EAB\u5185\u5B58\u548C\u539F\u5B50\u6027\n\n\u8FD9\u662FJS\u7684\u4E00\u4E2A\u9AD8\u7EA7\u7279\u6027\uFF0C\u4E5F\u662FJS\u5F15\u64CE\u7684\u6838\u5FC3\u6539\u8FDB\u3002\n\n**\u5171\u4EAB\u5185\u5B58\u7684\u4E3B\u8981\u601D\u60F3\u662F\uFF1A \u628A\u591A\u7EBF\u7A0B\u7684\u7279\u6027\u5E26\u5230JS\uFF0C\u4E3A\u4E86\u63D0\u9AD8\u4EE3\u7801\u7684\u6027\u80FD\u548C\u9AD8\u5E76\u53D1\uFF0C\u7531\u4E4B\u524D\u7684JS\u5F15\u64CE\u7BA1\u7406\u5185\u5B58\u53D8\u4E3A\u81EA\u5DF1\u7BA1\u7406\u5185\u5B58\u3002** \n\n\u8FD9\u4E2A\u7279\u6027\u7531\u4E00\u4E2A\u65B0\u7684\u5168\u5C40\u5BF9\u8C61[SharedArrayBuffer](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/SharedArrayBuffer)\u6765\u5B9E\u73B0\uFF0C\u8FD9\u4E2A\u5BF9\u8C61\u5728\u4E00\u5757**\u5171\u4EAB\u5185\u5B58\u533A**\u50A8\u5B58\u6570\u636E\uFF0CJS\u7684\u4E3B\u7EBF\u7A0B\u548C`web-worker`\u7EBF\u7A0B\u5171\u4EAB\u8FD9\u90E8\u5206\u6570\u636E\u3002\n\n\u5F53\u524D\uFF0C\u5982\u679C\u6211\u4EEC\u60F3\u8981\u5728JS\u4E3B\u7EBF\u7A0B\u548Cweb-worker\u7EBF\u7A0B\u95F4\u5171\u4EAB\u6570\u636E\u65F6\uFF0C\u5FC5\u987B\u4F7F\u7528`postMessage`\u5728\u4E0D\u540C\u7EBF\u7A0B\u95F4\u4F20\u9012\u6570\u636E\uFF0C\u6709\u4E86`SharedArrayBuffer`\u540E\uFF0C\u4E0D\u540C\u7684\u7EBF\u7A0B\u53EF\u4EE5\u76F4\u63A5\u8BBF\u95EE\u8FD9\u4E2A\u5BF9\u8C61\u6765\u5171\u4EAB\u6570\u636E\u3002\n\n\u4F46\u662F\u591A\u7EBF\u7A0B\u95F4\u7684\u5171\u4EAB\u5185\u5B58\u4F1A\u4EA7\u751F\u7ADE\u6001\u6761\u4EF6\uFF0C\u4E3A\u4E86\u907F\u514D\u8FD9\u79CD\u60C5\u51B5\uFF0CJS\u5F15\u5165\u4E86`\u539F\u5B50\u6027`\u7684\u5168\u5C40\u5BF9\u8C61\u3002\u8FD9\u4E2A\u5BF9\u8C61\u63D0\u4F9B\u4E86\u591A\u79CD\u65B9\u6CD5\u6765\u4FDD\u8BC1\u6B63\u5728\u88AB\u67D0\u4E2A\u7EBF\u7A0B\u8BBF\u95EE\u7684\u5185\u5B58\u88AB\u9501\u4F4F\uFF0C\u4EE5\u8FBE\u5230\u5185\u5B58\u5B89\u5168\u3002\n\n## 2. Tagged Template literal(\u5E26\u6807\u7B7E\u7684\u6A21\u677F\u5B57\u9762\u91CF?) \u9650\u5236\u88AB\u79FB\u9664\n\n\u9996\u5148\u5F04\u61C2\u4E00\u4E2A\u6982\u5FF5\uFF1A\u4EC0\u4E48s\u662FTagged Template literal ?\n\n`tagged template literal`\u51FA\u73B0\u5728es2015\u4EE5\u540E\uFF0C\u5141\u8BB8\u5F00\u53D1\u8005\u81EA\u5B9A\u4E49\u5B57\u7B26\u4E32\u88AB\u5D4C\u5165\u7684\u503C\u3002\u4E3E\u4E00\u4E2A\u4F8B\u5B50\uFF0C\u6807\u51C6\u7684\u5B57\u7B26\u4E32\u5D4C\u5165\u4E00\u4E2A\u503C\u7684\u65B9\u5F0F\u662F\uFF1A\n\n```JavaScript\nconst userName = \'\u5F20\u4E09\'\nconst greetings = `hello ${userName}!`\n\nconsole.log(greetings) // "hello \u5F20\u4E09!"\n```\n\n\u5728`tagged template literal`\u91CC\uFF0C\u4F60\u53EF\u4EE5\u7528\u4E00\u4E2A\u51FD\u6570\u901A\u8FC7\u53C2\u6570\u6765\u63A5\u6536\u5B57\u7B26\u4E32\u5199\u6B7B\u7684\u5404\u90E8\u5206\uFF0C\u6BD4\u5982: [\'hello\', \'!\']\u548C\u4E4B\u540E\u88AB\u66FF\u6362\u4E3A\u503C\u7684\u53D8\u91CF[\'\u5F20\u4E09\']\uFF0C\u6700\u540E\u901A\u8FC7\u51FD\u6570\u8FD4\u56DE\u4EFB\u4F55\u4F60\u60F3\u8981\u7684\u7ED3\u679C\uFF0C\u8FD9\u4E2A\u51FD\u6570\u88AB\u79F0\u4F5C`Tagged`\u51FD\u6570\uFF0C\u4E0B\u9762`Tagged`\u51FD\u6570`greet`\u6765\u6269\u5C55\u4E0A\u4F8B\u4E2D\u7684greetings\uFF1A\n\n```Javascript\nconst userName = \'\u5F20\u4E09\'\nconst greetings = `hello ${userName}!`\n\nconsole.log(greetings) // "hello \u5F20\u4E09!\u65E9\u4E0A\u597D!"\n\n// hardCodedPartsArray: \u5B57\u7B26\u4E32\u5199\u6B7B\u7684\u5404\u90E8\u5206,  [ "hello ", "!" ]\n// replacementPartsArray: \u5B57\u7B26\u4E32\u91CC\u5D4C\u5165\u7684\u53D8\u91CF, [ "\u5F20\u4E09" ]\nfunction greet(hardCodedPartsArray, ...replacementPartsArray) {\n  let str = \'\'\n  hardCodedPartsArray.forEach((part, i) => {\n    if (i < replacementPartsArray.length) {\n      str += `${part}${replacementPartsArray[i] || \'\'}`\n    } else {\n      str += `${part} ${timeGreet()}` // \u5728\u7ED3\u5C3E\u6DFB\u52A0\u95EE\u5019\u8BED\n    }\n  })\n\n  return str\n}\n\nfunction timeGreet() {\n  const hr = new Date().getHours()\n  return hr < 12\n    ? \'\u65E9\u4E0A\u597D!\'\n    : hr < 18 ? \'\u4E0B\u5348\u597D!\' : \'\u665A\u4E0A\u597D!\'\n}\n```\n\n## 3. \u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\u7684`.`\u5339\u914D\u6240\u6709\u5B57\u7B26\n\n\u5728\u76EE\u524D\u7684\u6B63\u5219\u8868\u8FBE\u5F0F\u4E2D\uFF0C\u867D\u7136`.`\u70B9\u88AB\u8BA4\u4E3A\u4EE3\u8868\u6240\u4EE5\u5B57\u7B26\uFF0C\u5B9E\u9645\u4E0A\u5B83\u4E0D\u4F1A\u5339\u914D\u50CF`\\n`\u3001`\\r`\u548C`\\f`\u7B49\u6362\u884C\u7B26\u3002\n\n\u4F8B\u5982:\n\n```Javascript\n// \u4E4B\u524D\n/first.second/.test(\'first\\nsecond\'); // false\n```\n\n\u8FD9\u4E2A\u6539\u8FDB\u4F7F`.`\u70B9\u64CD\u4F5C\u7B26\u5339\u914D\u4EFB\u610F\u5355\u4E2A\u5B57\u7B26\u3002\u4E3A\u4E86\u4FDD\u8BC1\u4E0B\u9762\u8FD9\u6BB5\u4EE3\u7801\u5728\u4EFB\u4F55JS\u7248\u672C\u90FD\u6B63\u5E38\u5DE5\u4F5C\uFF0C\u6211\u4EEC\u5728\u7ED3\u5C3E\u52A0\u4E0A`/s`\u4FEE\u9970\u7B26\n\n```Javascript\n//ECMAScript 2018\n/first.second/s.test(\'first\\nsecond\'); // true   \u6CE8\u610F: /s \uD83D\uDC48\uD83C\uDFFC\n```\n\n## 4. \u6B63\u5219\u8868\u8FBE\u5F0F\u6355\u83B7Named Group\n\n\u8FD9\u4E2A\u6539\u8FDB\u5E26\u6765\u4E86\u5728\u5176\u4ED6\u8BED\u8A00\u4E2D\u6BD4\u5982:Java\u3001Python\u7B49\u5DF2\u7ECF\u652F\u6301\u4E86\u7684\u6709\u7528\u7684\u6B63\u5219\u7279\u6027\u3002\u8FD9\u4E2A\u7279\u6027\u5141\u8BB8\u5F00\u53D1\u8005\u5728\u6B63\u5219\u4E2D\u4E3A\u4E0D\u540C\u7684\u7EC4\u5199\u683C\u5F0F\u4E3A`(<?name>)`\u7684\u540D\u5B57\u6807\u8BC6\u7B26\uFF0C\u4E4B\u540E\u53EF\u4EE5\u5728\u5339\u914D\u7684\u7ED3\u679C\u91CC\u901A\u8FC7\u540D\u5B57\u6807\u8BC6\u7684\u7EC4\u6765\u83B7\u53D6\u5BF9\u5E94\u7684\u503C\u3002\n\n### 4.1 \u57FA\u7840\u793A\u4F8B\n\n```Javascript\n// \u4E4B\u524D\nconst re1 = /(\\d{4})-(\\d{2})-(\\d{2})/\nconst result1 = re1.exec(\'2015-01-08\')\nconsole.log(result1)\n// \u8F93\u51FA\uFF1A\n// [\n//   "2015-01-08",\n//   "2015",\n//   "01",\n//   "08",\n//   index: 0,\n//   input: "2015-01-08",\n//   groups: undefined\n// ]\n\n// \u73B0\u5728 (es2018)\nconst re2 = /(?<year>\\d{4})-(?<month>\\d{2})-(?<day>\\d{2})/u\nconst result2 = re2.exec(\'2015-01-08\')\nconsole.log(result2)\n\n// \u8F93\u51FA\uFF1A\n// [\n//   "2015-01-08",\n//   "2015",\n//   "01",\n//   "08",\n//   groups: {\n//     day: "08",\n//     month: "01",\n//     year: "2015"\n//   },\n//   index: 0,\n//   input: "2015-01-08",\n// ]\n```\n\n### 4.2 \u5728\u6B63\u5219\u81EA\u8EAB\u4F7F\u7528\u547D\u540D\u7EC4\n\n\u6211\u4EEC\u53EF\u4EE5\u4F7F\u7528\u683C\u5F0F`\\k<group name>`\u5728\u6B63\u5219\u81EA\u8EAB\u6765\u5F15\u7528\u4E4B\u524D\u7684\u7EC4\u3002\u4E0B\u9762\u7684\u7528\u4F8B\u5B50\u5C55\u793A\uFF1A\n\n```Javascript\n// \u5728\u8FD9\u4E2A\u4F8B\u5B50\u91CC\uFF0C\u6211\u4EEC\u6709\u4E00\u4E2A\u547D\u540D\u7EC4`fruit`\uFF0C\n// \u5B83\u53EF\u4EE5\u5339\u914D`apple`\u6216\u8005`orange`\uFF0C\u6211\u4EEC\u53EF\u4EE5\u7528`\\k<group name>`(\\k<fruit>)\n// \u6765\u5F15\u7528\u4E4B\u524D\u5339\u914D\u7684\u8FD9\u4E2A\u7EC4\n// \u6240\u4EE5\u7B49\u53F7\u4E24\u8FB9\u7684\u503C\u662F\u76F8\u7B49\u7684\n\nconst sameWords = /(?<fruit>apple|orange)==\\k<fruit>/u\nsameWords.test(\'apple==apple\') // true\nsameWords.test(\'orange==orange\') // true\nsameWords.test(\'apple==orange\') // false\n```\n\n### 4.3 \u5728String.prototype.replace\u91CC\u4F7F\u7528\u547D\u540D\u7EC4\n\n\u547D\u540D\u7EC4\u7279\u6027\u5DF2\u7ECF\u88AB\u6DFB\u52A0\u5230`replace`\u65B9\u6CD5\u91CC\uFF0C\u6240\u4EE5\u6211\u4EEC\u53EF\u4EE5\u8F7B\u677E\u5730\u66FF\u6362\u5B57\u7B26\u4E32\u4E86\u3002\n\n\u4F8B\u5982\uFF1A \u6539\u53D8"firstName, lastName" \u4E3A "lastName, firstName":\n\n```Javascript\nconst re = /(?<firstName>[A-Za-z]+) (?<lastName>[A-Za-z]+)/u\n\'John Lennon\'.replace(re, \'$<lastName>, $<firstName>\') // Lennon John\n```\n\n## 5. \u5BF9\u8C61\u7684Rest properties\n\nRest\u64CD\u4F5C\u7B26`...`\uFF08\u4E09\u4E2A\u70B9\uFF09\u5141\u8BB8\u6211\u4EEC\u53D6\u51FA\u5269\u4F59\u7684\u5BF9\u8C61\u5C5E\u6027\n\n### 5.1 \u4F7F\u7528Rest properties\u6765\u53D6\u51FA\u4F60\u60F3\u8981\u4F7F\u7528\u7684\u5C5E\u6027\n\n```Javascript\nlet { name, age, ...remaining} = {\n  name: \'\u5F20\u4E09\',\n  age: 20,\n  gender: \'\u7537\',\n  address: \'xxxxx\'\n}\n\nname // \'\u5F20\u4E09\'\nage // 20\n```\n\n### 5.2 \u4F60\u751A\u81F3\u53EF\u4EE5\u79FB\u9664\u4E0D\u60F3\u8981\u7684\u5C5E\u6027\n\n```Javascript\n// \u5982\u679C\u6211\u4EEC\u60F3\u8981\u5220\u9664address\u5C5E\u6027\uFF0C\n// \u4F46\u662F\u6211\u4EEC\u53C8\u4E0D\u60F3\u8981\u904D\u5386\u5BF9\u8C61\u91CD\u65B0\u521B\u5EFA\u65B0\u5BF9\u8C61\n// \u6211\u4EEC\u53EA\u8981\u7B80\u5355\u7684\u89E3\u6784\u51FA\u8FD9\u4E2A\u8981\u79FB\u9664\u7684\u5C5E\u6027\n// \u5269\u4E0B\u7684\u6CA1\u6709\u89E3\u6784\u7684\u5BF9\u8C61\n// \u5C31\u662F\u6211\u4EEC\u60F3\u8981\u7559\u4E0B\u7684\u5BF9\u8C61\nlet {address, ...cleanObj} = {\n  name: \'john\',\n  address: \'\u5317\u4EAC\u5E02\u6D77\u6DC0\u533A\',\n  gender: \'\u7537\'\n}\n\ncleanObj // {name, gender}\n```\n\n## 6. \u5BF9\u8C61\u7684Spread properties\n\nSpread\u5C5E\u6027\u770B\u8D77\u6765\u548CRest\u5C5E\u6027\u5F88\u50CF\uFF0C\u4E5F\u662F\u4E09\u4E2A\u70B9`...`\u64CD\u4F5C\u7B26\uFF0C\u4E0D\u540C\u7684\u662FSpread\u7528\u4E8E\u521B\u5EFA\u65B0\u5BF9\u8C61\u3002\n\n```Javascript\nconst person = {name: \'john\', age: 20}\nconst address = {city: \'Beijing\', country: \'china\'}\n\nconst personWithAddress = {\n  ...person,\n  ...address\n}\n\npersonWithAddress // {name, age, city, country}\n```\n\n## 7. \u6B63\u5219Lookbehind\u65AD\u8A00\n\n\u8FD9\u4E2A\u6B63\u5219\u7684\u6539\u8FDB\u5141\u8BB8\u6211\u4EEC\u4FDD\u8BC1\u5728\u4E00\u4E9B\u5B57\u7B26\u4E32\u4E4B\u524D\u5B58\u5728\u67D0\u4E9B\u5B57\u7B26\u4E32\u3002\n\n\u4F60\u53EF\u4EE5\u4F7F\u7528\u4E00\u7EC4`(?<=...)`(\u95EE\u53F7\uFF0C\u5C0F\u4E8E\u7B49\u4E8E)\u5BFB\u627E\u540E\u9762\u80AF\u5B9A\u7684\u65AD\u8A00\u3002\n\n\u66F4\u8FDB\u4E00\u6B65\uFF0C\u4F60\u53EF\u4EE5\u4F7F\u7528`(?<!...`(\u95EE\u53F7\uFF0C\u5C0F\u4E8E\u53F7\u53F9\u53F7)\u5BFB\u627E\u540E\u9762\u5426\u5B9A\u7684\u65AD\u8A00\u3002\n\n\u80AF\u5B9A\u65AD\u8A00: \u6BD4\u5982\u6211\u4EEC\u60F3\u8981\u786E\u5B9A\u5728\u7B26\u53F7`#`\u51FA\u73B0\u5728\u5355\u8BCD`winning`\u524D\uFF0C\u5373`#winning`\uFF0C\u53EA\u8FD4\u56DE`winning`:\n\n```Javascript\n/(?<=#).*/.test(\'winning\') // false\n/(?<=#).*/.test(\'#winning\') // true\n\n// \u4E4B\u524D\n\'#winning\'.match(/#.*/)[0] // \'#winning\'\n\n// es2018\n\'#winning\'.match(/(?<=#).*/)[0] // \'winning\', \u6CA1\u6709 #, #\u53EA\u662F\u4E3A\u4E86\u9A8C\u8BC1\n```\n\n\u5426\u5B9A\u65AD\u8A00\uFF1A\u6BD4\u5982\u6211\u4EEC\u60F3\u8981\u53D6\u51FA\u6570\u5B57\u524D\u6807\u5FD7\u662F#\uFF0C\u800C\u4E0D\u662F$\u7684\u6570\u5B57\n\n```Javascript\n\'this is a test signal $1.23\'.match(/(?<!\\$)\\d+\\.\\d+/) // null\n\'this is a test signal #2.43\'.match(/(?<!\\$)\\d+\\.\\d+/)[0] // 2.43\n```\n\n## 8. \u6B63\u5219Unicode\u5C5E\u6027\u8F6C\u4E49\u7B26\n\n\u7528\u6B63\u5219\u5339\u914D\u6240\u6709\u7684unicode\u5B57\u7B26\u5F88\u56F0\u96BE\u3002\u50CF`\\w`\u3001`\\W`\u3001`\\d`\u7B49\u53EA\u80FD\u5339\u914D\u82F1\u6587\u5B57\u7B26\u548C\u6570\u5B57\uFF0C\u4F46\u662F\u51FA\u73B0\u5728\u5176\u4ED6\u8BED\u8A00\u6BD4\u5982\u5E0C\u814A\u8BED\u91CC\u7684\u6570\u5B57\u6211\u4EEC\u8981\u600E\u4E48\u5904\u7406\u5462\uFF1F\n\nUnicode\u5C5E\u6027\u8F6C\u4E49\u7B26\u5C31\u662F\u4E3A\u4E86\u89E3\u51B3\u8FD9\u4E2A\u95EE\u9898\u3002\u5B83\u4F7FUnicode\u4E3A\u6BCF\u4E2A\u5B57\u7B26\u6DFB\u52A0\u63CF\u8FF0\u6027\u7684`metadata`\u3002\n\n\n'},'tags':['Vagrant','Translate','Backend','Ansible','Go','Architecture','Web','Http','HTTP/2','HTTP','Middleware','Java','OKHttp','Mybatis','CPU','Linux','Dartlang','Dart','Flutter','CrossPlatform','Mobile','JS','Javascript','Frontend','NodeJS','Node','NPM','JSON','Jackson','ECMAScript','ECMAScript2016','ECMAScript2017','ECMAScript2018','ES6','ES7','Async','Await','Async/Await','Java8','APM','Performance','Spring','SpringMVC','Hyperapp','React']},'siteData':{'title':'\u4EE3\u7801\u62FE\u9057'}};</script><script defer="" type="text/javascript" src="https://shjie047.github.io/bootstrap.d5ea8805.js"></script><script defer="" type="text/javascript" src="https://shjie047.github.io/templates/src/containers/Post.5710f9d8.js"></script><script defer="" type="text/javascript" src="https://shjie047.github.io/main.1a92e948.js"></script></body></html>