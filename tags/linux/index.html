<!DOCTYPE html><html lang="en" data-reactroot=""><head><title data-react-helmet="true">代码拾遗</title><meta data-react-helmet="true" property="og:description" content="这是一个互联网相关的技术类博客、开发笔记，提供全面的、前沿的计算机前端、后端教程，包括最新的国外技术文章，掌握最新的互联网技术资讯、趋势"/><meta data-react-helmet="true" property="og:title" content="代码拾遗"/><meta data-react-helmet="true" property="og:type" content="文章"/><meta data-react-helmet="true" name="title" content="代码拾遗"/><meta data-react-helmet="true" name="description" content="这是一个互联网相关的技术类博客、开发笔记，提供全面的、前沿的计算机前端、后端教程，包括最新的国外技术文章，掌握最新的互联网技术资讯、趋势"/><meta data-react-helmet="true" name="keywords" content="前端,后端,Java,Javascript,js,开发,教程,技术"/><link rel="preload" as="script" href="https://shjie047.github.io/bootstrap.46c64089.js"/><link rel="preload" as="script" href="https://shjie047.github.io/templates/src/containers/Blog.0253cd40.js"/><link rel="preload" as="script" href="https://shjie047.github.io/main.8ebda1c8.js"/><link rel="preload" as="style" href="https://shjie047.github.io/styles.e228ad1f.css"/><link rel="stylesheet" href="https://shjie047.github.io/styles.e228ad1f.css"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><style data-styled-components="fJTUOz uTxCW dNaeMY fTrCIB cLovag LFWGu iHYXdd eOzHfA dMjtJC kPNeRC">
/* sc-component-id: sc-htpNat */
.fTrCIB{padding:0 40px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;} @media only screen and (max-width:400px){.fTrCIB{padding:0 20px;}} .fTrCIB a{font-size:1.6rem;font-weight:normal;} .fTrCIB .icon-link{font-size:1.8rem;} .fTrCIB .icon-btn{-webkit-apparance:none;background-color:transparent;border:none;outline:none;color:#fff;cursor:pointer;}
/* sc-component-id: sc-keyframes-fJTUOz */
@-webkit-keyframes fJTUOz{0%{width:0px;padding:4px 0;}100%{width:160px;padding:4px 5px;}} @keyframes fJTUOz{0%{width:0px;padding:4px 0;}100%{width:160px;padding:4px 5px;}}
/* sc-component-id: sc-bxivhb */
.iHYXdd{margin-left:auto;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;overflow:hidden;} .iHYXdd .search-input input{-webkit-apparance:none;border:0;outline:0;padding:4px 5px;margin:0;background-color:#fff;width:160px;-webkit-animation:.2s fJTUOz ease;animation:.2s fJTUOz ease;}
/* sc-component-id: sc-ifAKCX */
@media only screen and (max-width:920px){.cLovag{display:none;}} .cLovag a{font-size:1.4rem;} .cLovag::before{content:'';height:2.1rem;width:1px;background-color:#00000038;display:inline-block;vertical-align:middle;}
/* sc-component-id: sc-EHOje */
.LFWGu{display:none;padding:0;margin:0;position:relative;font-size:1.4rem;} .LFWGu::before{content:'';height:2.1rem;width:1px;background-color:#00000038;display:inline-block;vertical-align:middle;} .LFWGu > i{display:inline-block;padding:1rem;color:#fff;font-weight:normal;-webkit-transition:color .3s ease;transition:color .3s ease;} .LFWGu a{font-size:1.4rem;font-weight:normal;line-height:1;display:block;padding:1.2rem 3rem 1.2rem 1rem;} .LFWGu li{margin:0;} .LFWGu ul{list-style:none;padding:0;margin:0;position:absolute;top:100%;left:0;background-color:#108db8;display:none;width:120px;padding:10px 0;} .LFWGu ul.show{display:inline-block;} @media only screen and (max-width:920px){.LFWGu{display:inline;}}
/* sc-component-id: sc-bZQynM */
.dNaeMY{position:absolute;top:0;left:50%;top:50%;color:#fff;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);background-repeat:no-repeat;background-size:100% auto;width:8rem;height:2rem;}
/* sc-component-id: sc-gZMcBi */
.eOzHfA{position:relative;width:80%;max-width:710px;margin:4rem auto;padding-bottom:4rem;border-bottom:1px solid #ebf2f6;word-wrap:break-word;} .eOzHfA::after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;box-shadow:0 0 0 5px #fff;} .eOzHfA .read-more{-webkit-text-decoration:none;text-decoration:none;} .eOzHfA .author-thumb{width:24px;height:24px;float:left;margin-right:9px;border-radius:100%;} .eOzHfA .post-header{margin-bottom:3.4rem;} .eOzHfA .post-title a{-webkit-text-decoration:none;text-decoration:none;} .eOzHfA .post-meta{display:block;margin:1.75rem 0 0;font-family:Open Sans,sans-serif;font-size:1.5rem;line-height:2.2rem;color:#9eabb3;} .eOzHfA .post-excerpt p{margin:0;font-size:.9em;line-height:1.7em;} .eOzHfA .post-meta a{color:#9eabb3;-webkit-text-decoration:none;text-decoration:none;} .eOzHfA .post-meta a:hover{color:#9eabb3;-webkit-text-decoration:underline;text-decoration:underline;} .eOzHfA .post-date{display:inline-block;text-transform:uppercase;font-size:1.3rem;white-space:nowrap;} .eOzHfA .post-date.has-author{margin-left:8px;padding-left:12px;border-left:1px solid #d5dbde;} @media only screen and (max-width:900px){.eOzHfA{font-size:.95em;}} @media only screen and (max-width:500px){.eOzHfA{width:auto;margin:2rem 16px;padding-bottom:2rem;line-height:1.65em;}.eOzHfA .post-excerpt p{font-size:.85em;}.eOzHfA .post-meta{font-size:1.3rem;margin-top:1rem;}.eOzHfA pre{padding:0!important;}} .eOzHfA pre{padding:1.2rem;} .eOzHfA pre > code{overflow-x:auto;box-shadow:0 0 15px rgba(0,0,0,.35);padding:1.5rem;} .eOzHfA blockquote{border-left:3px solid #061e35!important;margin-left:-23px!important;padding-bottom:2px!important;padding-left:20px!important;color:#24292e!important;} .eOzHfA blockquote p{color:#24292e!important;} .eOzHfA blockquote a{color:#061e35!important;}
/* sc-component-id: sc-gqjmRU */
.dMjtJC{display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;-webkit-box-pack:center;-webkit-justify-content:center;-ms-flex-pack:center;justify-content:center;color:#9eabb3;font-size:1.3rem;margin-bottom:3rem;-webkit-user-select:none;-moz-user-select:none;-ms-user-select:none;user-select:none;}
/* sc-component-id: sc-jTzLTM */
.kPNeRC{margin:0 2.5rem;}</style></head><body><div id="root"><div class="sc-bwzfXH uTxCW" data-reactroot=""><div class="headroom-wrapper"><div style="position:relative;top:0;left:0;right:0;z-index:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)" class="headroom headroom--unfixed"><div class="sc-bZQynM dNaeMY" style="background-image:url(data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIxODgiIGhlaWdodD0iNDUiIHZpZXdCb3g9IjAgMCAxODggNDUiPjx0ZXh0IGZpbGw9IiNGRkYiIGZpbGwtcnVsZT0iZXZlbm9kZCIgZm9udC1mYW1pbHk9IllvdVl1YW4iIGZvbnQtc2l6ZT0iNDgiPjx0c3BhbiB4PSItMiIgeT0iMzgiPuS7o+eggeaLvumBlzwvdHNwYW4+PC90ZXh0Pjwvc3ZnPg==)"></div><nav class="sc-htpNat fTrCIB"><a class="icon-link" aria-current="false" href="https://shjie047.github.io/"><i class="iconfont icon-home"></i></a><span class="sc-ifAKCX cLovag"><a aria-current="false" href="https://shjie047.github.io/tags/frontend">前端</a><a aria-current="false" href="https://shjie047.github.io/tags/backend">后端</a><a aria-current="false" href="https://shjie047.github.io/tags/mobile">移动端</a><a aria-current="false" href="https://shjie047.github.io/tags/java">Java</a></span><span class="toggled-popular sc-EHOje LFWGu"><i class="iconfont icon-popular"></i><ul><li><a aria-current="false" href="https://shjie047.github.io/tags/backend">后端</a></li><li><a aria-current="false" href="https://shjie047.github.io/tags/mobile">移动端</a></li><li><a aria-current="false" href="https://shjie047.github.io/tags/java">Java</a></li></ul></span><div class="sc-bxivhb iHYXdd"><a class="archive icon-link" aria-current="false" data-tip="归档" href="https://shjie047.github.io/archives"><i class="iconfont icon-archive"></i></a></div></nav></div></div><div class="content"><div><div><article class="sc-gZMcBi eOzHfA"><header class="post-header"><h2 class="post-title"><a aria-current="false" href="https://shjie047.github.io/post/2017-03-25/cpu-load-high/">Linux 如何查找Java 程序CPU负载过高</a></h2></header><section class="post-excerpt"><p>准备程序：

`Java
package test;

public class Test{
    public static void main(String[] args){
        new Thread(new Runnable(){
            public void run(){
                while(true){

        ...<a class="read-more" aria-current="false" href="https://shjie047.github.io/post/2017-03-25/cpu-load-high/">»</a></p></section><footer class="post-meta"><time class="post-date" dateTime="2017-03-25">2017-03-25</time></footer></article></div><div class="sc-gqjmRU dMjtJC"><div class="sc-jTzLTM kPNeRC">Page <!-- -->1<!-- --> of <!-- -->1</div></div></div></div><div class="__react_component_tooltip place-top type-dark " data-id="tooltip"></div></div></div><script src="https://s22.cnzz.com/z_stat.php?id=1273381451&amp;web_id=1273381451" language="JavaScript"></script><script type="text/javascript">window.__CSS_CHUNKS__ = {"main":"https://shjie047.github.io/styles.e228ad1f.css"}</script><script type="text/javascript">
                window.__routeInfo = {'path':'tags/linux','templateID':3,'sharedPropsHashes':{},'localProps':null,'allProps':{'posts':[{'title':'Linux \u5982\u4F55\u67E5\u627EJava \u7A0B\u5E8FCPU\u8D1F\u8F7D\u8FC7\u9AD8','tags':['CPU','Java','Linux','backend'],'iso8601Date':'2017-03-25T19:20:26+08:00','basename':'cpu-load-high','body':'\n\n\n\u51C6\u5907\u7A0B\u5E8F\uFF1A\n\n```Java\npackage test;\n\npublic class Test{\n    public static void main(String[] args){\n        new Thread(new Runnable(){\n            public void run(){\n                while(true){\n\n                }\n            }\n        }).start();\n    }\n}\n```\n\u5176\u4E2D\u4E00\u4E2A\u7EBF\u7A0B\u56DE\u5BFC\u81F4\u4E00\u76F4\u5360\u7528CPU\uFF0C\u7F16\u8BD1\u8FD0\u884C\u3002\u901A\u8FC7`top` \u83B7\u53D6CPU\u5360\u7528\u4FE1\u606F\n![top cpu](https://raw.githubusercontent.com/mashuai/hexo-blog/master/images/top.png)\n\u53EF\u4EE5\u770B\u5230\u5360\u7528\u6700\u9AD8\u7684 pid\u662F 25955\n\u901A\u8FC7`top -p 25955 -H` \u83B7\u53D6\u8FDB\u7A0B\u5185\u90E8\u7EBF\u7A0B\u7684CPU\u4F7F\u7528\u7387\u3002\n![topph](https://raw.githubusercontent.com/mashuai/hexo-blog/master/images/tophp.png)\n\u53EF\u4EE5\u53D1\u73B0\u5360\u7528\u6700\u9AD8\u7684\u7EBF\u7A0BID\u662F `25965` \u5C06\u5176\u8F6C\u6362\u4E3A16\u8FDB\u5236`python -c \'print hex(25965)\'` \u5F97\u5230\u7684\u503C\u662F`0x656d` \n\u4F7F\u7528 `jstack -l 25955 > jstack.log` \u5F97\u5230Java\u8FDB\u7A0B\u7684Thread dump\uFF0C\u901A\u8FC7 `grep -i 0x656d -A 30 jstack.log` \u83B7\u53D6Java Thread id\u4E3A0x656d\u7684\u7EBF\u7A0B\u7684thread dump\u3002\n![jstack](https://raw.githubusercontent.com/mashuai/hexo-blog/master/images/jstack.png)\n\u7136\u540E\u5C31\u53EF\u4EE5\u5B9A\u4F4D\u76F8\u5E94\u4EE3\u7801\u67E5\u627E\u4EE3\u7801\u5360\u7528CPU\u8FC7\u9AD8\u95EE\u9898\u3002\n','date':'2017-03-25'}]},'siteData':{'title':'React Static'}};</script><script defer="" type="text/javascript" src="https://shjie047.github.io/bootstrap.46c64089.js"></script><script defer="" type="text/javascript" src="https://shjie047.github.io/templates/src/containers/Blog.0253cd40.js"></script><script defer="" type="text/javascript" src="https://shjie047.github.io/main.8ebda1c8.js"></script></body></html>