<!DOCTYPE html><html lang="en" data-reactroot=""><head><title data-react-helmet="true">开发笔记</title><meta data-react-helmet="true" name="title" content="开发笔记"/><meta data-react-helmet="true" property="og:description" content="原文地址

 大多数web app都有一个相同的布局。这个布局可能包含一个header或者footer，甚至可能包含一个导航菜单。Go的标准库提供一个简单的方式来创建这些基本元素，通过..."/><meta data-react-helmet="true" property="og:title" content="为Go Web App 创建一个主页面"/><meta data-react-helmet="true" property="og:type" content="article"/><meta data-react-helmet="true" name="description" content="原文地址

 大多数web app都有一个相同的布局。这个布局可能包含一个header或者footer，甚至可能包含一个导航菜单。Go的标准库提供一个简单的方式来创建这些基本元素，通过..."/><meta data-react-helmet="true" name="keywords" content="Go,Translate,backend"/><link rel="preload" as="script" href="https://shjie047.github.io/bootstrap.5f624704.js"/><link rel="preload" as="script" href="https://shjie047.github.io/templates/src/containers/Post.c272ebe7.js"/><link rel="preload" as="script" href="https://shjie047.github.io/main.aaa99bb3.js"/><link rel="preload" as="style" href="https://shjie047.github.io/styles.d33ff26b.css"/><link rel="stylesheet" href="https://shjie047.github.io/styles.d33ff26b.css"/><meta charSet="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1"/><style data-styled-components="bDWFJH gkZsHu fuJRCL mvmj eesrXV Riikb">
/* sc-component-id: sc-bwzfXH */
.fuJRCL{padding:0 40px;display:-webkit-box;display:-webkit-flex;display:-ms-flexbox;display:flex;-webkit-align-items:center;-webkit-box-align:center;-ms-flex-align:center;align-items:center;} @media only screen and (max-width:400px){.fuJRCL{padding:0 20px;}} .fuJRCL a{font-size:1.6rem;font-weight:normal;} .fuJRCL .icon-link{font-size:1.8rem;} .fuJRCL .archive{margin-left:auto;}
/* sc-component-id: sc-htpNat */
@media only screen and (max-width:920px){.mvmj{display:none;}} .mvmj a{font-size:1.4rem;} .mvmj::before{content:'';height:2.1rem;width:1px;background-color:#00000038;display:inline-block;vertical-align:middle;}
/* sc-component-id: sc-bxivhb */
.eesrXV{display:none;padding:0;margin:0;position:relative;font-size:1.4rem;} .eesrXV::before{content:'';height:2.1rem;width:1px;background-color:#00000038;display:inline-block;vertical-align:middle;} .eesrXV > i{display:inline-block;padding:1rem;color:#fff;font-weight:normal;-webkit-transition:color .3s ease;transition:color .3s ease;} .eesrXV a{font-size:1.4rem;font-weight:normal;line-height:1;display:block;padding:1.2rem 3rem 1.2rem 1rem;} .eesrXV li{margin:0;} .eesrXV ul{list-style:none;padding:0;margin:0;position:absolute;top:100%;left:0;background-color:#108db8;display:none;width:120px;padding:10px 0;} .eesrXV ul.show{display:inline-block;} @media only screen and (max-width:920px){.eesrXV{display:inline;}}
/* sc-component-id: sc-ifAKCX */
.gkZsHu{position:absolute;top:0;left:50%;top:50%;font-size:1.6rem;color:#fff;-webkit-transform:translate(-50%,-50%);-ms-transform:translate(-50%,-50%);transform:translate(-50%,-50%);font-weight:normal;cursor:pointer;} .gkZsHu:hover{color:#fff!important;}
/* sc-component-id: sc-dnqmqq */
.Riikb{position:relative;width:80%;max-width:710px;margin:4rem auto;padding-bottom:4rem;border-bottom:1px solid #ebf2f6;word-wrap:break-word;} .Riikb::after{display:block;content:"";width:7px;height:7px;border:1px solid #e7eef2;position:absolute;bottom:-5px;left:50%;margin-left:-5px;background:#fff;border-radius:100%;box-shadow:0 0 0 5px #fff;} .Riikb .read-more{-webkit-text-decoration:none;text-decoration:none;} .Riikb .author-thumb{width:24px;height:24px;float:left;margin-right:9px;border-radius:100%;} .Riikb .post-header{margin-bottom:3.4rem;} .Riikb .post-title a{-webkit-text-decoration:none;text-decoration:none;} .Riikb .post-meta{display:block;margin:1.75rem 0 0;font-family:Open Sans,sans-serif;font-size:1.5rem;line-height:2.2rem;color:#9eabb3;} .Riikb .post-excerpt p{margin:0;font-size:.9em;line-height:1.7em;} .Riikb .post-meta a{color:#9eabb3;-webkit-text-decoration:none;text-decoration:none;} .Riikb .post-meta a:hover{color:#9eabb3;-webkit-text-decoration:underline;text-decoration:underline;} .Riikb .post-date{display:inline-block;text-transform:uppercase;font-size:1.3rem;white-space:nowrap;} .Riikb .post-date.has-author{margin-left:8px;padding-left:12px;border-left:1px solid #d5dbde;} @media only screen and (max-width:900px){.Riikb{font-size:.95em;}} @media only screen and (max-width:500px){.Riikb{width:auto;margin:2rem 16px;padding-bottom:2rem;line-height:1.65em;}.Riikb .post-excerpt p{font-size:.85em;}.Riikb .post-meta{font-size:1.3rem;margin-top:1rem;}}</style></head><body><div id="root"><div class="sc-bdVaJa bDWFJH" data-reactroot=""><div class="headroom-wrapper"><div style="position:relative;top:0;left:0;right:0;z-index:1;-webkit-transform:translateY(0);-ms-transform:translateY(0);transform:translateY(0)" class="headroom headroom--unfixed"><a class="sc-ifAKCX gkZsHu" aria-current="false" href="https://shjie047.github.io/">开发笔记</a><nav class="sc-bwzfXH fuJRCL"><a class="icon-link" aria-current="false" href="https://shjie047.github.io/"><i class="iconfont icon-home"></i></a><span class="sc-htpNat mvmj"><a aria-current="false" href="https://shjie047.github.io/tags/backend">后端</a><a aria-current="false" href="https://shjie047.github.io/tags/mobile">移动端</a><a aria-current="false" href="https://shjie047.github.io/tags/java">Java</a></span><span class="toggled-popular sc-bxivhb eesrXV"><i class="iconfont icon-popular"></i><ul><li><a aria-current="false" href="https://shjie047.github.io/tags/backend">后端</a></li><li><a aria-current="false" href="https://shjie047.github.io/tags/mobile">移动端</a></li><li><a aria-current="false" href="https://shjie047.github.io/tags/java">Java</a></li></ul></span><a class="archive icon-link" aria-current="false" data-tip="归档" href="https://shjie047.github.io/archives"><i class="iconfont icon-archive"></i></a></nav></div></div><div class="content"><article class="sc-dnqmqq Riikb"><header class="post-header"><h1 class="post-title">为Go Web App 创建一个主页面</h1><section class="post-meta "><time class="post-date" dateTime="2015-11-15">2015/11/15</time><span>, </span><span><span><a aria-current="false" href="https://shjie047.github.io/tags/go">Go</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/translate">Translate</a><span>, </span></span><span><a aria-current="false" href="https://shjie047.github.io/tags/backend">backend</a></span></span></section></header><section class="post-content markdown-body"><div><p><a href="http://sanatgersappa.blogspot.com/2013/11/creating-master-page-for-your-go-web-app.html" target="_blank">原文地址</a></p><p> 大多数web app都有一个相同的布局。这个布局可能包含一个header或者footer，甚至可能包含一个导航菜单。Go的标准库提供一个简单的方式来创建这些基本元素，通过被不同的页面重用，创建出模板页的效果。
 这个简单的例子来解释如何实现的：
 让我们来创建一个简单的包含两个view的web app，一个是 main 一个是about。这两个view都有相同的header和footer。
 header模板的代码如下：</p><pre><code class="language-html">{ { define &quot;header&quot; }}
&lt;!DOCTYPE html&gt;
&lt;html&gt;
    &lt;head&gt;
        &lt;title&gt;{ {.Title}}&lt;/title&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css&quot;&gt;
        &lt;link rel=&quot;stylesheet&quot; href=&quot;//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css&quot;&gt;
        &lt;style type=&quot;text/css&quot;&gt;
            body {padding-bottom: 70px;}
            .content {margin:10px;}
        &lt;/style&gt;
    &lt;/head&gt;
    &lt;body&gt;
        &lt;nav class=&quot;navbar navbar-default&quot; role=&quot;navigation&quot;&gt;
          &lt;div class=&quot;navbar-header&quot;&gt;
            &lt;a class=&quot;navbar-brand&quot; href=&quot;/&quot;&gt;Go App&lt;/a&gt;
          &lt;/div&gt;
          &lt;div class=&quot;collapse navbar-collapse navbar-ex1-collapse&quot;&gt;  
            &lt;ul class=&quot;nav navbar-nav&quot;&gt;
                &lt;li&gt;&lt;a href=&quot;/&quot;&gt;Main&lt;/a&gt;&lt;/li&gt;
                &lt;li&gt;&lt;a href=&quot;/about&quot;&gt;About&lt;/a&gt;&lt;/li&gt;
            &lt;/ul&gt;
          &lt;/div&gt;
        &lt;/nav&gt;
{ { end }}</code></pre><p> footer模板的代码如下：</p><pre><code class="language-html">{ { define &quot;footer&quot; }}
        &lt;p class=&quot;navbar-text navbar-fixed-bottom&quot;&gt;Go Rocks!&lt;/p&gt;    
        &lt;script src=&quot;//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js&quot;&gt;&lt;/script&gt;
    &lt;/body&gt;
&lt;/html&gt;
{ { end }}</code></pre><p> main 模板的代码如下：</p><pre><code class="language-html">{ {define &quot;main&quot;}}
{ { template &quot;header&quot; .}}
&lt;div class=&quot;content&quot;&gt;
    &lt;h2&gt;Main&lt;/h2&gt;
    &lt;div&gt;This is the Main page&lt;/div&gt;
&lt;/div&gt;
{ {template &quot;footer&quot; .}}
{ { end}}</code></pre><p> about 模板的代码如下：</p><pre><code class="language-html">{ {define &quot;about&quot;}}
{ { template &quot;header&quot; .}}
&lt;div class=&quot;content&quot;&gt;
    &lt;h2&gt;About&lt;/h2&gt;
    &lt;div&gt;This is the About page&lt;/div&gt;
&lt;/div&gt;
{ {template &quot;footer&quot; .}}
{ { end}}</code></pre><p> 服务器代码如下：</p><pre><code class="language-Go">package main

import (
    &quot;html/template&quot;
    &quot;net/http&quot;
)

//Compile templates on start
var templates = template.Must(template.ParseFiles(&quot;header.html&quot;, &quot;footer.html&quot;, &quot;main.html&quot;, &quot;about.html&quot;))

//A Page structure
type Page struct {
    Title string
}

//Display the named template
func display(w http.ResponseWriter, tmpl string, data interface{}) {
    templates.ExecuteTemplate(w, tmpl, data)
}

//The handlers.
func mainHandler(w http.ResponseWriter, r *http.Request) {
    display(w, &quot;main&quot;, &amp;Page{Title: &quot;Home&quot;})
}

func aboutHandler(w http.ResponseWriter, r *http.Request) {
    display(w, &quot;about&quot;, &amp;Page{Title: &quot;About&quot;})
}

func main() {
    http.HandleFunc(&quot;/&quot;, mainHandler)
    http.HandleFunc(&quot;/about&quot;, aboutHandler)

    //Listen on port 8080
    http.ListenAndServe(&quot;:8080&quot;, nil)
}</code></pre><p> 每一个模板页都有一个 <code>{ { define &quot;name&quot; }}</code>的命令来定义模板的名字。main和about页面通过<code>{ { template &quot;name&quot; }}</code>来包含header和footer。<code>.</code> 出入上下文来命名模板。现在，不管main和about页面如何执行，他们的页面都会包含header和footer。
 两个页面的结果如下：</p><p><img style="display:block;margin:4rem auto" src="https://raw.githubusercontent.com/mashuai/hexo-blog/master/goweb/main.png"/><br/><img style="display:block;margin:4rem auto" src="https://raw.githubusercontent.com/mashuai/hexo-blog/master/goweb/about.png"/>  </p></div></section><section class="post-footer"></section></article></div><div class="__react_component_tooltip place-top type-dark " data-id="tooltip"></div></div></div><script type="text/javascript">window.__CSS_CHUNKS__ = {"main":"https://shjie047.github.io/styles.d33ff26b.css"}</script><script type="text/javascript">
                window.__routeInfo = {'path':'post/2015-11-15/\u4E3AGo-Web-App-\u521B\u5EFA\u4E00\u4E2A\u4E3B\u9875\u9762','templateID':2,'sharedPropsHashes':{},'localProps':null,'allProps':{'post':{'title':'\u4E3AGo Web App \u521B\u5EFA\u4E00\u4E2A\u4E3B\u9875\u9762','tags':['Go','Translate','backend'],'iso8601Date':'2015-11-15T01:59:00+08:00','basename':'\u4E3AGo-Web-App-\u521B\u5EFA\u4E00\u4E2A\u4E3B\u9875\u9762','body':'\n\n\n[\u539F\u6587\u5730\u5740](http://sanatgersappa.blogspot.com/2013/11/creating-master-page-for-your-go-web-app.html)\n\n \u5927\u591A\u6570web app\u90FD\u6709\u4E00\u4E2A\u76F8\u540C\u7684\u5E03\u5C40\u3002\u8FD9\u4E2A\u5E03\u5C40\u53EF\u80FD\u5305\u542B\u4E00\u4E2Aheader\u6216\u8005footer\uFF0C\u751A\u81F3\u53EF\u80FD\u5305\u542B\u4E00\u4E2A\u5BFC\u822A\u83DC\u5355\u3002Go\u7684\u6807\u51C6\u5E93\u63D0\u4F9B\u4E00\u4E2A\u7B80\u5355\u7684\u65B9\u5F0F\u6765\u521B\u5EFA\u8FD9\u4E9B\u57FA\u672C\u5143\u7D20\uFF0C\u901A\u8FC7\u88AB\u4E0D\u540C\u7684\u9875\u9762\u91CD\u7528\uFF0C\u521B\u5EFA\u51FA\u6A21\u677F\u9875\u7684\u6548\u679C\u3002\n \u8FD9\u4E2A\u7B80\u5355\u7684\u4F8B\u5B50\u6765\u89E3\u91CA\u5982\u4F55\u5B9E\u73B0\u7684\uFF1A\n \u8BA9\u6211\u4EEC\u6765\u521B\u5EFA\u4E00\u4E2A\u7B80\u5355\u7684\u5305\u542B\u4E24\u4E2Aview\u7684web app\uFF0C\u4E00\u4E2A\u662F main \u4E00\u4E2A\u662Fabout\u3002\u8FD9\u4E24\u4E2Aview\u90FD\u6709\u76F8\u540C\u7684header\u548Cfooter\u3002\n header\u6A21\u677F\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```html\n{ { define "header" }}\n<!DOCTYPE html>\n<html>\n    <head>\n        <title>{ {.Title}}</title>\n        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap.min.css">\n        <link rel="stylesheet" href="//netdna.bootstrapcdn.com/bootstrap/3.0.0/css/bootstrap-theme.min.css">\n        <style type="text/css">\n            body {padding-bottom: 70px;}\n            .content {margin:10px;}\n        <\/style>\n    </head>\n    <body>\n        <nav class="navbar navbar-default" role="navigation">\n          <div class="navbar-header">\n            <a class="navbar-brand" href="https://shjie047.github.io/">Go App</a>\n          </div>\n          <div class="collapse navbar-collapse navbar-ex1-collapse">  \n            <ul class="nav navbar-nav">\n                <li><a href="https://shjie047.github.io/">Main</a></li>\n                <li><a href="https://shjie047.github.io/about">About</a></li>\n            </ul>\n          </div>\n        </nav>\n{ { end }}\n```\n\n footer\u6A21\u677F\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n\n```html\n{ { define "footer" }}\n        <p class="navbar-text navbar-fixed-bottom">Go Rocks!</p>    \n        <"+"script src="//netdna.bootstrapcdn.com/bootstrap/3.0.0/js/bootstrap.min.js"><\/script>\n    </body>\n</html>\n{ { end }}\n\n```\n\n main \u6A21\u677F\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```html\n{ {define "main"}}\n{ { template "header" .}}\n<div class="content">\n    <h2>Main</h2>\n    <div>This is the Main page</div>\n</div>\n{ {template "footer" .}}\n{ { end}}\n```\n\n about \u6A21\u677F\u7684\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```html\n{ {define "about"}}\n{ { template "header" .}}\n<div class="content">\n    <h2>About</h2>\n    <div>This is the About page</div>\n</div>\n{ {template "footer" .}}\n{ { end}}\n```\n\n \u670D\u52A1\u5668\u4EE3\u7801\u5982\u4E0B\uFF1A\n\n```Go\npackage main\n\nimport (\n    "html/template"\n    "net/http"\n)\n\n//Compile templates on start\nvar templates = template.Must(template.ParseFiles("header.html", "footer.html", "main.html", "about.html"))\n\n//A Page structure\ntype Page struct {\n    Title string\n}\n\n//Display the named template\nfunc display(w http.ResponseWriter, tmpl string, data interface{}) {\n    templates.ExecuteTemplate(w, tmpl, data)\n}\n\n//The handlers.\nfunc mainHandler(w http.ResponseWriter, r *http.Request) {\n    display(w, "main", &Page{Title: "Home"})\n}\n\nfunc aboutHandler(w http.ResponseWriter, r *http.Request) {\n    display(w, "about", &Page{Title: "About"})\n}\n\nfunc main() {\n    http.HandleFunc("/", mainHandler)\n    http.HandleFunc("/about", aboutHandler)\n\n    //Listen on port 8080\n    http.ListenAndServe(":8080", nil)\n}\n```\n\n \u6BCF\u4E00\u4E2A\u6A21\u677F\u9875\u90FD\u6709\u4E00\u4E2A `{ { define "name" }}`\u7684\u547D\u4EE4\u6765\u5B9A\u4E49\u6A21\u677F\u7684\u540D\u5B57\u3002main\u548Cabout\u9875\u9762\u901A\u8FC7`{ { template "name" }}`\u6765\u5305\u542Bheader\u548Cfooter\u3002`.` \u51FA\u5165\u4E0A\u4E0B\u6587\u6765\u547D\u540D\u6A21\u677F\u3002\u73B0\u5728\uFF0C\u4E0D\u7BA1main\u548Cabout\u9875\u9762\u5982\u4F55\u6267\u884C\uFF0C\u4ED6\u4EEC\u7684\u9875\u9762\u90FD\u4F1A\u5305\u542Bheader\u548Cfooter\u3002\n \u4E24\u4E2A\u9875\u9762\u7684\u7ED3\u679C\u5982\u4E0B\uFF1A\n\n![main](https://raw.githubusercontent.com/mashuai/hexo-blog/master/goweb/main.png)  \n![about](https://raw.githubusercontent.com/mashuai/hexo-blog/master/goweb/about.png)  \n','date':'2015-11-15'}},'siteData':{'title':'React Static'}};</script><script defer="" type="text/javascript" src="https://shjie047.github.io/bootstrap.5f624704.js"></script><script defer="" type="text/javascript" src="https://shjie047.github.io/templates/src/containers/Post.c272ebe7.js"></script><script defer="" type="text/javascript" src="https://shjie047.github.io/main.aaa99bb3.js"></script></body></html>